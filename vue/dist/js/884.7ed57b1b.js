"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[884],{53884:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var o=a(56768),s=a(24232),n=a(45130);const i={class:"container"},l={class:"mode-select"},r={class:"input-group"},d=["placeholder"],c={class:"char-count"},h={key:0,class:"controls"},m=["value"],g=["disabled"],u={key:0},p={key:1},k={key:1,class:"error-message"},v={key:2,class:"result-container"},L={class:"image-wrapper"},b=["src"],C={class:"action-buttons"};function x(e,t,a,x,M,w){return(0,o.uX)(),(0,o.CE)("div",{id:"app",class:(0,s.C4)(["ai-image-generator",{"light-mode":M.isLightMode}])},[(0,o.Lk)("div",i,[t[7]||(t[7]=(0,o.Lk)("h1",{class:"main-title"},[(0,o.eW)("AI "),(0,o.Lk)("span",{class:"highlight"},"图像生成"),(0,o.eW)("工具")],-1)),(0,o.Lk)("div",l,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>w.setMode("normal")),class:(0,s.C4)({active:"normal"===M.mode})}," 普通绘图 ",2),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>w.setMode("math")),class:(0,s.C4)({active:"math"===M.mode})}," 数学绘图 ",2)]),(0,o.Lk)("div",r,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>M.inputText=e),placeholder:w.placeholderText,maxlength:"1000"},null,8,d),[[n.Jo,M.inputText]]),(0,o.Lk)("div",c,(0,s.v_)(M.inputText.length)+"/1000",1)]),"normal"===M.mode?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>M.selectedResolution=e),class:"resolution-select"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(M.resolutions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.value,value:e.value},(0,s.v_)(e.label)+" ("+(0,s.v_)(e.points)+"点数) ",9,m)))),128))],512),[[n.u1,M.selectedResolution]])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>w.generateImage&&w.generateImage(...e)),disabled:M.isLoading,class:"generate-btn"},[M.isLoading?((0,o.uX)(),(0,o.CE)("span",u,"生成中...")):((0,o.uX)(),(0,o.CE)("span",p,(0,s.v_)(w.generateButtonText),1))],8,g),M.errorMsg?((0,o.uX)(),(0,o.CE)("div",k,(0,s.v_)(M.errorMsg),1)):(0,o.Q3)("",!0),M.imageUrl?((0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("div",L,[(0,o.Lk)("img",{src:M.imageUrl,alt:"生成的图片",class:"generated-image"},null,8,b)]),(0,o.Lk)("div",C,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>w.downloadImage&&w.downloadImage(...e)),class:"download-btn"},"下载图片"),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>w.regenerate&&w.regenerate(...e)),class:"regenerate-btn"},"重新生成")])])):(0,o.Q3)("",!0)])],2)}var M=a(94373),w={data(){return{mode:"normal",inputText:"",selectedResolution:"512x512",resolutions:[{label:"512x512",value:"512x512",points:6},{label:"768x768",value:"768x768",points:8},{label:"1024x1024",value:"1024x1024",points:14}],imageUrl:"",isLoading:!1,errorMsg:"",isLightMode:"light"===localStorage.getItem("theme-mode")}},computed:{placeholderText(){return"normal"===this.mode?"请输入图片描述，例如：雪山脚下的蓝色湖泊...":"请输入数学绘图需求，例如：绘制三维正弦函数图像，添加颜色渐变"},generateButtonText(){return"normal"===this.mode?"生成图片":"生成数学图表"}},mounted(){this.checkThemeMode(),window.addEventListener("storage",this.checkThemeMode),window.addEventListener("themeChange",this.checkThemeMode)},beforeUnmount(){window.removeEventListener("storage",this.checkThemeMode),window.removeEventListener("themeChange",this.checkThemeMode)},methods:{setMode(e){this.mode=e,this.resetState()},resetState(){this.inputText="",this.imageUrl="",this.errorMsg=""},async generateImage(){if(this.inputText.trim()){this.isLoading=!0,this.errorMsg="";try{const e={text:this.inputText,mode:this.mode};"normal"===this.mode&&(e.resolution=this.selectedResolution);const t=await M.A.post("http://localhost:2200/image/api/generate",e);this.imageUrl=`data:image/png;base64,${t.data.image}`}catch(e){this.errorMsg=e.response?.data?.error||"生成失败，请检查网络或重试"}finally{this.isLoading=!1}}else this.errorMsg="请输入内容"},downloadImage(){const e=document.createElement("a");e.href=this.imageUrl,e.download=`generated_${Date.now()}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},regenerate(){this.generateImage()},checkThemeMode(){this.isLightMode="light"===localStorage.getItem("theme-mode")}}},T=a(71241);const E=(0,T.A)(w,[["render",x],["__scopeId","data-v-3c6a65c1"]]);var I=E}}]);
//# sourceMappingURL=884.7ed57b1b.js.map
"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[985],{12985:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});var o=a(56768),s=a(24232),i=a(45130);const n={class:"container"},l={class:"steps"},r={key:0,class:"step-content"},d={class:"file-upload"},p={key:0},c={class:"upload-btn"},u={key:1,class:"uploading"},v={key:2,class:"uploaded"},h={key:0,class:"error-message"},k={key:1,class:"step-content"},g={class:"conversion-form"},m={class:"file-info"},L={class:"form-group"},f={class:"toggle-switch"},b={key:0,class:"script-options"},_={class:"form-group"},C={class:"form-group"},D={class:"form-group"},y={class:"form-group"},S={class:"form-group"},U={class:"form-group"},F={class:"form-group"},E={class:"slider-container"},I={class:"slider-value"},x={class:"form-group"},w={key:2,class:"step-content"},P={class:"processing"},T={key:3,class:"step-content"},M={key:0,class:"success"},V={class:"video-player"},X=["src"],$={key:0,class:"error-message"},j={class:"actions"},A={key:1,class:"error"};function Q(e,t,a,Q,z,W){return(0,o.uX)(),(0,o.CE)("div",{class:(0,s.C4)(["home",{"light-mode":z.isLightMode}])},[t[54]||(t[54]=(0,o.Lk)("h1",null,"PPTè½¬è§†é¢‘å·¥å…·",-1)),(0,o.Lk)("div",n,[(0,o.Lk)("div",l,[(0,o.Lk)("div",{class:(0,s.C4)(["step",{active:z.currentStep>=1}])},"1. ä¸Šä¼ PPT",2),(0,o.Lk)("div",{class:(0,s.C4)(["step",{active:z.currentStep>=2}])},"2. è®¾ç½®å‚æ•°",2),(0,o.Lk)("div",{class:(0,s.C4)(["step",{active:z.currentStep>=3}])},"3. ç”Ÿæˆè§†é¢‘",2)]),1===z.currentStep?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("div",d,[t[27]||(t[27]=(0,o.Lk)("h2",null,"ä¸Šä¼ PPTæ–‡ä»¶",-1)),(0,o.Lk)("div",{class:(0,s.C4)(["upload-area",{"drag-over":z.isDragging}]),onDragover:t[1]||(t[1]=(0,i.D$)((e=>z.isDragging=!0),["prevent"])),onDragleave:t[2]||(t[2]=(0,i.D$)((e=>z.isDragging=!1),["prevent"])),onDrop:t[3]||(t[3]=(0,i.D$)(((...e)=>W.handleFileDrop&&W.handleFileDrop(...e)),["prevent"]))},[z.isUploading||z.file?z.isUploading?((0,o.uX)(),(0,o.CE)("div",u,[t[24]||(t[24]=(0,o.Lk)("div",{class:"spinner"},null,-1)),(0,o.Lk)("p",null,"æ­£åœ¨ä¸Šä¼  "+(0,s.v_)(z.file.name),1),(0,o.Lk)("p",null,(0,s.v_)(Math.round(z.uploadProgress))+"%",1)])):((0,o.uX)(),(0,o.CE)("div",v,[t[25]||(t[25]=(0,o.Lk)("i",{class:"file-icon"},"âœ…",-1)),(0,o.Lk)("p",null,(0,s.v_)(z.file.name),1),t[26]||(t[26]=(0,o.Lk)("p",null,"å·²ä¸Šä¼ ",-1))])):((0,o.uX)(),(0,o.CE)("div",p,[t[21]||(t[21]=(0,o.Lk)("i",{class:"file-icon"},"ğŸ“„",-1)),t[22]||(t[22]=(0,o.Lk)("p",null,"æ‹–æ”¾PPTæ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–",-1)),(0,o.Lk)("label",c,[t[20]||(t[20]=(0,o.eW)(" é€‰æ‹©æ–‡ä»¶ ")),(0,o.Lk)("input",{type:"file",accept:".ppt,.pptx",onChange:t[0]||(t[0]=(...e)=>W.handleFileChange&&W.handleFileChange(...e))},null,32)]),t[23]||(t[23]=(0,o.Lk)("p",{class:"note"},"æ”¯æŒ.pptå’Œ.pptxæ ¼å¼ï¼Œæœ€å¤§50MB",-1))]))],34),z.error?((0,o.uX)(),(0,o.CE)("div",h,(0,s.v_)(z.error),1)):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),2===z.currentStep?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("div",g,[t[47]||(t[47]=(0,o.Lk)("h2",null,"è®¾ç½®è½¬æ¢å‚æ•°",-1)),(0,o.Lk)("p",m,"æ–‡ä»¶: "+(0,s.v_)(z.uploadedFilename),1),(0,o.Lk)("form",{onSubmit:t[14]||(t[14]=(0,i.D$)(((...e)=>W.submitForm&&W.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",L,[t[29]||(t[29]=(0,o.Lk)("label",null,"ä½¿ç”¨AIç”Ÿæˆæ¼”è®²ç¨¿",-1)),(0,o.Lk)("div",f,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"use-script","onUpdate:modelValue":t[4]||(t[4]=e=>z.formData.use_generated_script=e),onChange:t[5]||(t[5]=(...e)=>W.toggleScriptOptions&&W.toggleScriptOptions(...e))},null,544),[[i.lH,z.formData.use_generated_script]]),t[28]||(t[28]=(0,o.Lk)("label",{for:"use-script",class:"toggle-label"},null,-1))])]),z.formData.use_generated_script?((0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",_,[t[31]||(t[31]=(0,o.Lk)("label",{for:"script-style"},"æ¼”è®²é£æ ¼",-1)),(0,o.bo)((0,o.Lk)("select",{id:"script-style","onUpdate:modelValue":t[6]||(t[6]=e=>z.formData.script_style=e)},t[30]||(t[30]=[(0,o.Lk)("option",{value:"æ ‡å‡†"},"æ ‡å‡†",-1),(0,o.Lk)("option",{value:"å¹½é»˜"},"å¹½é»˜",-1),(0,o.Lk)("option",{value:"ä¸¥è°¨"},"ä¸¥è°¨",-1),(0,o.Lk)("option",{value:"æ¿€åŠ±"},"æ¿€åŠ±",-1)]),512),[[i.u1,z.formData.script_style]])]),(0,o.Lk)("div",C,[t[33]||(t[33]=(0,o.Lk)("label",{for:"target-audience"},"ç›®æ ‡å—ä¼—",-1)),(0,o.bo)((0,o.Lk)("select",{id:"target-audience","onUpdate:modelValue":t[7]||(t[7]=e=>z.formData.target_audience=e)},t[32]||(t[32]=[(0,o.Fv)('<option value="é€šç”¨" data-v-09aac67a>é€šç”¨</option><option value="å°å­¦ç”Ÿ" data-v-09aac67a>å°å­¦ç”Ÿ</option><option value="åˆä¸­ç”Ÿ" data-v-09aac67a>åˆä¸­ç”Ÿ</option><option value="é«˜ä¸­ç”Ÿ" data-v-09aac67a>é«˜ä¸­ç”Ÿ</option><option value="å¤§å­¦ç”Ÿ" data-v-09aac67a>å¤§å­¦ç”Ÿ</option><option value="ä¸“ä¸šäººå£«" data-v-09aac67a>ä¸“ä¸šäººå£«</option>',6)]),512),[[i.u1,z.formData.target_audience]])]),(0,o.Lk)("div",D,[t[35]||(t[35]=(0,o.Lk)("label",{for:"total-duration"},"æ¼”è®²æ—¶é•¿",-1)),(0,o.bo)((0,o.Lk)("select",{id:"total-duration","onUpdate:modelValue":t[8]||(t[8]=e=>z.formData.total_duration=e)},t[34]||(t[34]=[(0,o.Lk)("option",{value:"ç®€çŸ­"},"ç®€çŸ­ (3-5åˆ†é’Ÿ)",-1),(0,o.Lk)("option",{value:"ä¸­ç­‰"},"ä¸­ç­‰ (5-10åˆ†é’Ÿ)",-1),(0,o.Lk)("option",{value:"è¯¦ç»†"},"è¯¦ç»† (10-15åˆ†é’Ÿ)",-1)]),512),[[i.u1,z.formData.total_duration]])]),(0,o.Lk)("div",y,[t[37]||(t[37]=(0,o.Lk)("label",{for:"subject"},"å­¦ç§‘ç±»å‹",-1)),(0,o.bo)((0,o.Lk)("select",{id:"subject","onUpdate:modelValue":t[9]||(t[9]=e=>z.formData.subject=e)},t[36]||(t[36]=[(0,o.Fv)('<option value="é€šç”¨" data-v-09aac67a>é€šç”¨</option><option value="è¯­æ–‡" data-v-09aac67a>è¯­æ–‡</option><option value="æ•°å­¦" data-v-09aac67a>æ•°å­¦</option><option value="è‹±è¯­" data-v-09aac67a>è‹±è¯­</option><option value="ç‰©ç†" data-v-09aac67a>ç‰©ç†</option><option value="åŒ–å­¦" data-v-09aac67a>åŒ–å­¦</option><option value="ç”Ÿç‰©" data-v-09aac67a>ç”Ÿç‰©</option><option value="å†å²" data-v-09aac67a>å†å²</option><option value="åœ°ç†" data-v-09aac67a>åœ°ç†</option><option value="æ”¿æ²»" data-v-09aac67a>æ”¿æ²»</option>',10)]),512),[[i.u1,z.formData.subject]])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",S,[t[38]||(t[38]=(0,o.Lk)("label",{for:"slide-duration"},"é»˜è®¤å¹»ç¯ç‰‡æ—¶é•¿ (ç§’)",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",id:"slide-duration","onUpdate:modelValue":t[10]||(t[10]=e=>z.formData.slide_duration=e),min:"1",max:"30",step:"1"},null,512),[[i.Jo,z.formData.slide_duration,void 0,{number:!0}]]),t[39]||(t[39]=(0,o.Lk)("span",{class:"note"},"å½“å¹»ç¯ç‰‡æ²¡æœ‰è¯­éŸ³æ—¶çš„é»˜è®¤æ˜¾ç¤ºæ—¶é•¿",-1))]),(0,o.Lk)("div",U,[t[41]||(t[41]=(0,o.Lk)("label",{for:"lang"},"è¯­éŸ³è¯­è¨€",-1)),(0,o.bo)((0,o.Lk)("select",{id:"lang","onUpdate:modelValue":t[11]||(t[11]=e=>z.formData.lang=e)},t[40]||(t[40]=[(0,o.Lk)("option",{value:"zh-cn"},"ä¸­æ–‡ (æ™®é€šè¯)",-1),(0,o.Lk)("option",{value:"en-us"},"è‹±è¯­ (ç¾å›½)",-1)]),512),[[i.u1,z.formData.lang]])]),(0,o.Lk)("div",F,[t[42]||(t[42]=(0,o.Lk)("label",{for:"speed"},"è¯­é€Ÿ",-1)),(0,o.Lk)("div",E,[(0,o.bo)((0,o.Lk)("input",{type:"range",id:"speed","onUpdate:modelValue":t[12]||(t[12]=e=>z.formData.speed=e),min:"0",max:"100",step:"1",class:"slider"},null,512),[[i.Jo,z.formData.speed,void 0,{number:!0}]]),(0,o.Lk)("span",I,(0,s.v_)(z.formData.speed),1)]),t[43]||(t[43]=(0,o.Lk)("span",{class:"note"},"0-æ…¢é€Ÿï¼Œ50-æ­£å¸¸ï¼Œ100-å¿«é€Ÿ",-1))]),(0,o.Lk)("div",x,[t[45]||(t[45]=(0,o.Lk)("label",{for:"vcn"},"å‘éŸ³äºº",-1)),(0,o.bo)((0,o.Lk)("select",{id:"vcn","onUpdate:modelValue":t[13]||(t[13]=e=>z.formData.vcn=e)},t[44]||(t[44]=[(0,o.Fv)('<option value="x4_mingge" data-v-09aac67a>æ˜å“¥ (ç”·å£°)</option><option value="x4_xiaoying" data-v-09aac67a>ç§€è‹± (è€å¹´å¥³å£°)</option><option value="x4_xiaoguo" data-v-09aac67a>å°æœ (å¥³å£°)</option><option value="x4_xiaozhong" data-v-09aac67a>å°å¿  (ç”·å£°)</option><option value="x4_qianxue" data-v-09aac67a>åƒé›ª (å¥³å£°)</option><option value="x4_yeting" data-v-09aac67a>å¸Œæ¶µ (å¥³å£°)</option><option value="x4_lingbosong" data-v-09aac67a>è†ä¼¯æ¾ (è€å¹´ç”·å£°)</option><option value="x4_lingxiaoshan_profnews" data-v-09aac67a>è†å°çŠ (å¥³å£°)</option><option value="x4_doudou" data-v-09aac67a>è±†è±† (ç”·ç«¥å£°)</option><option value="x4_chaoge" data-v-09aac67a>è¶…å“¥ (ç”·å£°)</option><option value="x4_guanyijie" data-v-09aac67a>å…³å±± (ä¸“é¢˜ç”·å£°)</option><option value="x4_feidie" data-v-09aac67a>é£ç¢Ÿå“¥ (ç”·å£°)</option>',12)]),512),[[i.u1,z.formData.vcn]])]),t[46]||(t[46]=(0,o.Lk)("div",{class:"form-actions"},[(0,o.Lk)("button",{type:"submit",class:"btn-submit"},"å¼€å§‹è½¬æ¢")],-1))],32),(0,o.Lk)("button",{class:"btn-secondary",onClick:t[15]||(t[15]=e=>z.currentStep=1)},"è¿”å›")])])):(0,o.Q3)("",!0),3===z.currentStep?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("div",P,[t[48]||(t[48]=(0,o.Lk)("h2",null,"æ­£åœ¨å¤„ç†æ‚¨çš„PPT...",-1)),t[49]||(t[49]=(0,o.Lk)("div",{class:"progress-bar"},[(0,o.Lk)("div",{class:"progress-animation"})],-1)),t[50]||(t[50]=(0,o.Lk)("p",null,"è¯·è€å¿ƒç­‰å¾…ï¼Œè½¬æ¢è¿‡ç¨‹å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿã€‚",-1)),(0,o.Lk)("p",null,"å¤„ç†çŠ¶æ€: "+(0,s.v_)(z.processingStatus),1)])])):(0,o.Q3)("",!0),4===z.currentStep?((0,o.uX)(),(0,o.CE)("div",T,[z.conversionSuccess?((0,o.uX)(),(0,o.CE)("div",M,[t[52]||(t[52]=(0,o.Lk)("h2",null,"è½¬æ¢æˆåŠŸï¼",-1)),(0,o.Lk)("div",V,[(0,o.Lk)("video",{ref:"videoPlayer",class:"video-js",controls:"",preload:"auto",width:"100%",height:"auto",src:z.videoUrl,"data-setup":"{}",onError:t[16]||(t[16]=(...e)=>W.handleVideoError&&W.handleVideoError(...e))},t[51]||(t[51]=[(0,o.Lk)("p",{class:"vjs-no-js"}," è¦æŸ¥çœ‹æ­¤è§†é¢‘ï¼Œè¯·å¯ç”¨JavaScriptå¹¶è€ƒè™‘å‡çº§åˆ°æ”¯æŒHTML5è§†é¢‘çš„æµè§ˆå™¨ ",-1)]),40,X),z.videoError?((0,o.uX)(),(0,o.CE)("div",$," è§†é¢‘åŠ è½½é”™è¯¯: "+(0,s.v_)(z.videoError),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",j,[(0,o.Lk)("button",{class:"btn-primary",onClick:t[17]||(t[17]=(...e)=>W.downloadVideo&&W.downloadVideo(...e))},"ä¸‹è½½è§†é¢‘"),(0,o.Lk)("button",{class:"btn-secondary",onClick:t[18]||(t[18]=(...e)=>W.resetForm&&W.resetForm(...e))},"å¼€å§‹æ–°çš„è½¬æ¢")])])):((0,o.uX)(),(0,o.CE)("div",A,[t[53]||(t[53]=(0,o.Lk)("h2",null,"è½¬æ¢å¤±è´¥",-1)),(0,o.Lk)("p",null,(0,s.v_)(z.errorMessage),1),(0,o.Lk)("button",{class:"btn-secondary",onClick:t[19]||(t[19]=(...e)=>W.resetForm&&W.resetForm(...e))},"é‡è¯•")]))])):(0,o.Q3)("",!0)])],2)}var z=a(94373);const W=z.A.create({baseURL:"http://localhost:2200/pptv",headers:{"Content-Type":"application/json"}});var J={name:"CombinedComponent",data(){return{isLightMode:"light"===localStorage.getItem("theme-mode"),currentStep:1,taskId:null,uploadedFilename:"",processingStatus:"åˆå§‹åŒ–ä¸­...",statusInterval:null,conversionSuccess:!1,videoUrl:"",errorMessage:"",videoError:null,file:null,isDragging:!1,isUploading:!1,uploadProgress:0,error:null,formData:{use_generated_script:!0,script_style:"æ ‡å‡†",target_audience:"é€šç”¨",total_duration:"ä¸­ç­‰",subject:"é€šç”¨",slide_duration:5,lang:"zh-cn",speed:50,vcn:"x4_mingge"}}},mounted(){this.checkThemeMode(),window.addEventListener("storage",this.checkThemeMode),window.addEventListener("themeChange",this.checkThemeMode)},beforeUnmount(){this.statusInterval&&clearInterval(this.statusInterval),window.removeEventListener("storage",this.checkThemeMode),window.removeEventListener("themeChange",this.checkThemeMode)},methods:{checkThemeMode(){this.isLightMode="light"===localStorage.getItem("theme-mode")},downloadVideo(){if(!this.videoUrl)return;const e=document.createElement("a");e.href=`${this.videoUrl}?download=true`,e.setAttribute("download",`${this.uploadedFilename.split(".")[0]}.mp4`),e.setAttribute("target","_blank"),document.body.appendChild(e),e.click(),setTimeout((()=>{document.body.removeChild(e)}),100)},handleFileChange(e){const t=e.target.files[0];t&&this.validateAndSetFile(t)},handleFileDrop(e){this.isDragging=!1;const t=e.dataTransfer.files[0];t&&this.validateAndSetFile(t)},validateAndSetFile(e){const t=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],a=e.name.split(".").pop().toLowerCase();t.includes(e.type)||["ppt","pptx"].includes(a)?e.size>52428800?this.error="æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB":(this.file=e,this.error=null,this.uploadFile()):this.error="åªæ”¯æŒPPTæ–‡ä»¶(.ppt æˆ– .pptx)"},uploadFile(){this.isUploading=!0,this.uploadProgress=0;const e=new FormData;e.append("file",this.file),W.post("/api/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{this.uploadProgress=e.loaded/e.total*100}}).then((e=>{this.isUploading=!1,this.handleFileUploaded({task_id:e.data.task_id,filename:this.file.name})})).catch((e=>{this.isUploading=!1,this.error=e.response?.data?.error||"ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•",this.file=null}))},toggleScriptOptions(){},submitForm(){this.startConversion(this.formData)},handleFileUploaded(e){this.taskId=e.task_id,this.uploadedFilename=e.filename,this.currentStep=2},startConversion(e){this.currentStep=3,W.post(`/api/convert/${this.taskId}`,e).then((()=>{this.checkTaskStatus()})).catch((e=>{this.handleError(e)}))},checkTaskStatus(){this.statusInterval&&clearInterval(this.statusInterval),this.statusInterval=setInterval((()=>{W.get(`/api/tasks/${this.taskId}`).then((e=>{if(this.processingStatus=e.data.status,"completed"===e.data.status){clearInterval(this.statusInterval),this.conversionSuccess=!0;let t=e.data.video_url;t&&(t.startsWith("http")||t.startsWith("/")?!t.startsWith("http")&&t.startsWith("/")?this.videoUrl=`${W.defaults.baseURL}${t}`:this.videoUrl=t:this.videoUrl=`${W.defaults.baseURL}/${t}`),this.currentStep=4}else"failed"===e.data.status&&(clearInterval(this.statusInterval),this.conversionSuccess=!1,this.errorMessage=e.data.error||"è½¬æ¢è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯",this.currentStep=4)})).catch((e=>{clearInterval(this.statusInterval),this.handleError(e)}))}),3e3)},handleError(e){this.conversionSuccess=!1,this.errorMessage=e.response?.data?.error||"å‘ç”ŸæœªçŸ¥é”™è¯¯",this.currentStep=4},resetForm(){this.currentStep=1,this.taskId=null,this.uploadedFilename="",this.processingStatus="åˆå§‹åŒ–ä¸­...",this.conversionSuccess=!1,this.videoUrl="",this.errorMessage="",this.file=null,this.isDragging=!1,this.isUploading=!1,this.uploadProgress=0,this.error=null,this.formData={use_generated_script:!0,script_style:"æ ‡å‡†",target_audience:"é€šç”¨",total_duration:"ä¸­ç­‰",subject:"é€šç”¨",slide_duration:5,lang:"zh-cn",speed:50,vcn:"x4_mingge"},this.statusInterval&&(clearInterval(this.statusInterval),this.statusInterval=null)},handleVideoError(e){this.videoError=`è§†é¢‘æ— æ³•æ’­æ”¾ (é”™è¯¯ä»£ç : ${e.target.error?e.target.error.code:"æœªçŸ¥"})`,console.error("è§†é¢‘åŠ è½½é”™è¯¯:",e)}}},O=a(71241);const R=(0,O.A)(J,[["render",Q],["__scopeId","data-v-09aac67a"]]);var B=R}}]);
//# sourceMappingURL=985.117f8ba7.js.map
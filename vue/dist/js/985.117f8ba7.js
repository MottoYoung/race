"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[985],{12985:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});var o=a(56768),s=a(24232),i=a(45130);const n={class:"container"},l={class:"steps"},r={key:0,class:"step-content"},d={class:"file-upload"},p={key:0},c={class:"upload-btn"},u={key:1,class:"uploading"},v={key:2,class:"uploaded"},h={key:0,class:"error-message"},k={key:1,class:"step-content"},g={class:"conversion-form"},m={class:"file-info"},L={class:"form-group"},f={class:"toggle-switch"},b={key:0,class:"script-options"},_={class:"form-group"},C={class:"form-group"},D={class:"form-group"},y={class:"form-group"},S={class:"form-group"},U={class:"form-group"},F={class:"form-group"},E={class:"slider-container"},I={class:"slider-value"},x={class:"form-group"},w={key:2,class:"step-content"},P={class:"processing"},T={key:3,class:"step-content"},M={key:0,class:"success"},V={class:"video-player"},X=["src"],$={key:0,class:"error-message"},j={class:"actions"},A={key:1,class:"error"};function Q(e,t,a,Q,z,W){return(0,o.uX)(),(0,o.CE)("div",{class:(0,s.C4)(["home",{"light-mode":z.isLightMode}])},[t[54]||(t[54]=(0,o.Lk)("h1",null,"PPT转视频工具",-1)),(0,o.Lk)("div",n,[(0,o.Lk)("div",l,[(0,o.Lk)("div",{class:(0,s.C4)(["step",{active:z.currentStep>=1}])},"1. 上传PPT",2),(0,o.Lk)("div",{class:(0,s.C4)(["step",{active:z.currentStep>=2}])},"2. 设置参数",2),(0,o.Lk)("div",{class:(0,s.C4)(["step",{active:z.currentStep>=3}])},"3. 生成视频",2)]),1===z.currentStep?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("div",d,[t[27]||(t[27]=(0,o.Lk)("h2",null,"上传PPT文件",-1)),(0,o.Lk)("div",{class:(0,s.C4)(["upload-area",{"drag-over":z.isDragging}]),onDragover:t[1]||(t[1]=(0,i.D$)((e=>z.isDragging=!0),["prevent"])),onDragleave:t[2]||(t[2]=(0,i.D$)((e=>z.isDragging=!1),["prevent"])),onDrop:t[3]||(t[3]=(0,i.D$)(((...e)=>W.handleFileDrop&&W.handleFileDrop(...e)),["prevent"]))},[z.isUploading||z.file?z.isUploading?((0,o.uX)(),(0,o.CE)("div",u,[t[24]||(t[24]=(0,o.Lk)("div",{class:"spinner"},null,-1)),(0,o.Lk)("p",null,"正在上传 "+(0,s.v_)(z.file.name),1),(0,o.Lk)("p",null,(0,s.v_)(Math.round(z.uploadProgress))+"%",1)])):((0,o.uX)(),(0,o.CE)("div",v,[t[25]||(t[25]=(0,o.Lk)("i",{class:"file-icon"},"✅",-1)),(0,o.Lk)("p",null,(0,s.v_)(z.file.name),1),t[26]||(t[26]=(0,o.Lk)("p",null,"已上传",-1))])):((0,o.uX)(),(0,o.CE)("div",p,[t[21]||(t[21]=(0,o.Lk)("i",{class:"file-icon"},"📄",-1)),t[22]||(t[22]=(0,o.Lk)("p",null,"拖放PPT文件到此处，或",-1)),(0,o.Lk)("label",c,[t[20]||(t[20]=(0,o.eW)(" 选择文件 ")),(0,o.Lk)("input",{type:"file",accept:".ppt,.pptx",onChange:t[0]||(t[0]=(...e)=>W.handleFileChange&&W.handleFileChange(...e))},null,32)]),t[23]||(t[23]=(0,o.Lk)("p",{class:"note"},"支持.ppt和.pptx格式，最大50MB",-1))]))],34),z.error?((0,o.uX)(),(0,o.CE)("div",h,(0,s.v_)(z.error),1)):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),2===z.currentStep?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("div",g,[t[47]||(t[47]=(0,o.Lk)("h2",null,"设置转换参数",-1)),(0,o.Lk)("p",m,"文件: "+(0,s.v_)(z.uploadedFilename),1),(0,o.Lk)("form",{onSubmit:t[14]||(t[14]=(0,i.D$)(((...e)=>W.submitForm&&W.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",L,[t[29]||(t[29]=(0,o.Lk)("label",null,"使用AI生成演讲稿",-1)),(0,o.Lk)("div",f,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"use-script","onUpdate:modelValue":t[4]||(t[4]=e=>z.formData.use_generated_script=e),onChange:t[5]||(t[5]=(...e)=>W.toggleScriptOptions&&W.toggleScriptOptions(...e))},null,544),[[i.lH,z.formData.use_generated_script]]),t[28]||(t[28]=(0,o.Lk)("label",{for:"use-script",class:"toggle-label"},null,-1))])]),z.formData.use_generated_script?((0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",_,[t[31]||(t[31]=(0,o.Lk)("label",{for:"script-style"},"演讲风格",-1)),(0,o.bo)((0,o.Lk)("select",{id:"script-style","onUpdate:modelValue":t[6]||(t[6]=e=>z.formData.script_style=e)},t[30]||(t[30]=[(0,o.Lk)("option",{value:"标准"},"标准",-1),(0,o.Lk)("option",{value:"幽默"},"幽默",-1),(0,o.Lk)("option",{value:"严谨"},"严谨",-1),(0,o.Lk)("option",{value:"激励"},"激励",-1)]),512),[[i.u1,z.formData.script_style]])]),(0,o.Lk)("div",C,[t[33]||(t[33]=(0,o.Lk)("label",{for:"target-audience"},"目标受众",-1)),(0,o.bo)((0,o.Lk)("select",{id:"target-audience","onUpdate:modelValue":t[7]||(t[7]=e=>z.formData.target_audience=e)},t[32]||(t[32]=[(0,o.Fv)('<option value="通用" data-v-09aac67a>通用</option><option value="小学生" data-v-09aac67a>小学生</option><option value="初中生" data-v-09aac67a>初中生</option><option value="高中生" data-v-09aac67a>高中生</option><option value="大学生" data-v-09aac67a>大学生</option><option value="专业人士" data-v-09aac67a>专业人士</option>',6)]),512),[[i.u1,z.formData.target_audience]])]),(0,o.Lk)("div",D,[t[35]||(t[35]=(0,o.Lk)("label",{for:"total-duration"},"演讲时长",-1)),(0,o.bo)((0,o.Lk)("select",{id:"total-duration","onUpdate:modelValue":t[8]||(t[8]=e=>z.formData.total_duration=e)},t[34]||(t[34]=[(0,o.Lk)("option",{value:"简短"},"简短 (3-5分钟)",-1),(0,o.Lk)("option",{value:"中等"},"中等 (5-10分钟)",-1),(0,o.Lk)("option",{value:"详细"},"详细 (10-15分钟)",-1)]),512),[[i.u1,z.formData.total_duration]])]),(0,o.Lk)("div",y,[t[37]||(t[37]=(0,o.Lk)("label",{for:"subject"},"学科类型",-1)),(0,o.bo)((0,o.Lk)("select",{id:"subject","onUpdate:modelValue":t[9]||(t[9]=e=>z.formData.subject=e)},t[36]||(t[36]=[(0,o.Fv)('<option value="通用" data-v-09aac67a>通用</option><option value="语文" data-v-09aac67a>语文</option><option value="数学" data-v-09aac67a>数学</option><option value="英语" data-v-09aac67a>英语</option><option value="物理" data-v-09aac67a>物理</option><option value="化学" data-v-09aac67a>化学</option><option value="生物" data-v-09aac67a>生物</option><option value="历史" data-v-09aac67a>历史</option><option value="地理" data-v-09aac67a>地理</option><option value="政治" data-v-09aac67a>政治</option>',10)]),512),[[i.u1,z.formData.subject]])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",S,[t[38]||(t[38]=(0,o.Lk)("label",{for:"slide-duration"},"默认幻灯片时长 (秒)",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number",id:"slide-duration","onUpdate:modelValue":t[10]||(t[10]=e=>z.formData.slide_duration=e),min:"1",max:"30",step:"1"},null,512),[[i.Jo,z.formData.slide_duration,void 0,{number:!0}]]),t[39]||(t[39]=(0,o.Lk)("span",{class:"note"},"当幻灯片没有语音时的默认显示时长",-1))]),(0,o.Lk)("div",U,[t[41]||(t[41]=(0,o.Lk)("label",{for:"lang"},"语音语言",-1)),(0,o.bo)((0,o.Lk)("select",{id:"lang","onUpdate:modelValue":t[11]||(t[11]=e=>z.formData.lang=e)},t[40]||(t[40]=[(0,o.Lk)("option",{value:"zh-cn"},"中文 (普通话)",-1),(0,o.Lk)("option",{value:"en-us"},"英语 (美国)",-1)]),512),[[i.u1,z.formData.lang]])]),(0,o.Lk)("div",F,[t[42]||(t[42]=(0,o.Lk)("label",{for:"speed"},"语速",-1)),(0,o.Lk)("div",E,[(0,o.bo)((0,o.Lk)("input",{type:"range",id:"speed","onUpdate:modelValue":t[12]||(t[12]=e=>z.formData.speed=e),min:"0",max:"100",step:"1",class:"slider"},null,512),[[i.Jo,z.formData.speed,void 0,{number:!0}]]),(0,o.Lk)("span",I,(0,s.v_)(z.formData.speed),1)]),t[43]||(t[43]=(0,o.Lk)("span",{class:"note"},"0-慢速，50-正常，100-快速",-1))]),(0,o.Lk)("div",x,[t[45]||(t[45]=(0,o.Lk)("label",{for:"vcn"},"发音人",-1)),(0,o.bo)((0,o.Lk)("select",{id:"vcn","onUpdate:modelValue":t[13]||(t[13]=e=>z.formData.vcn=e)},t[44]||(t[44]=[(0,o.Fv)('<option value="x4_mingge" data-v-09aac67a>明哥 (男声)</option><option value="x4_xiaoying" data-v-09aac67a>秀英 (老年女声)</option><option value="x4_xiaoguo" data-v-09aac67a>小果 (女声)</option><option value="x4_xiaozhong" data-v-09aac67a>小忠 (男声)</option><option value="x4_qianxue" data-v-09aac67a>千雪 (女声)</option><option value="x4_yeting" data-v-09aac67a>希涵 (女声)</option><option value="x4_lingbosong" data-v-09aac67a>聆伯松 (老年男声)</option><option value="x4_lingxiaoshan_profnews" data-v-09aac67a>聆小珊 (女声)</option><option value="x4_doudou" data-v-09aac67a>豆豆 (男童声)</option><option value="x4_chaoge" data-v-09aac67a>超哥 (男声)</option><option value="x4_guanyijie" data-v-09aac67a>关山 (专题男声)</option><option value="x4_feidie" data-v-09aac67a>飞碟哥 (男声)</option>',12)]),512),[[i.u1,z.formData.vcn]])]),t[46]||(t[46]=(0,o.Lk)("div",{class:"form-actions"},[(0,o.Lk)("button",{type:"submit",class:"btn-submit"},"开始转换")],-1))],32),(0,o.Lk)("button",{class:"btn-secondary",onClick:t[15]||(t[15]=e=>z.currentStep=1)},"返回")])])):(0,o.Q3)("",!0),3===z.currentStep?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("div",P,[t[48]||(t[48]=(0,o.Lk)("h2",null,"正在处理您的PPT...",-1)),t[49]||(t[49]=(0,o.Lk)("div",{class:"progress-bar"},[(0,o.Lk)("div",{class:"progress-animation"})],-1)),t[50]||(t[50]=(0,o.Lk)("p",null,"请耐心等待，转换过程可能需要几分钟。",-1)),(0,o.Lk)("p",null,"处理状态: "+(0,s.v_)(z.processingStatus),1)])])):(0,o.Q3)("",!0),4===z.currentStep?((0,o.uX)(),(0,o.CE)("div",T,[z.conversionSuccess?((0,o.uX)(),(0,o.CE)("div",M,[t[52]||(t[52]=(0,o.Lk)("h2",null,"转换成功！",-1)),(0,o.Lk)("div",V,[(0,o.Lk)("video",{ref:"videoPlayer",class:"video-js",controls:"",preload:"auto",width:"100%",height:"auto",src:z.videoUrl,"data-setup":"{}",onError:t[16]||(t[16]=(...e)=>W.handleVideoError&&W.handleVideoError(...e))},t[51]||(t[51]=[(0,o.Lk)("p",{class:"vjs-no-js"}," 要查看此视频，请启用JavaScript并考虑升级到支持HTML5视频的浏览器 ",-1)]),40,X),z.videoError?((0,o.uX)(),(0,o.CE)("div",$," 视频加载错误: "+(0,s.v_)(z.videoError),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",j,[(0,o.Lk)("button",{class:"btn-primary",onClick:t[17]||(t[17]=(...e)=>W.downloadVideo&&W.downloadVideo(...e))},"下载视频"),(0,o.Lk)("button",{class:"btn-secondary",onClick:t[18]||(t[18]=(...e)=>W.resetForm&&W.resetForm(...e))},"开始新的转换")])])):((0,o.uX)(),(0,o.CE)("div",A,[t[53]||(t[53]=(0,o.Lk)("h2",null,"转换失败",-1)),(0,o.Lk)("p",null,(0,s.v_)(z.errorMessage),1),(0,o.Lk)("button",{class:"btn-secondary",onClick:t[19]||(t[19]=(...e)=>W.resetForm&&W.resetForm(...e))},"重试")]))])):(0,o.Q3)("",!0)])],2)}var z=a(94373);const W=z.A.create({baseURL:"http://localhost:2200/pptv",headers:{"Content-Type":"application/json"}});var J={name:"CombinedComponent",data(){return{isLightMode:"light"===localStorage.getItem("theme-mode"),currentStep:1,taskId:null,uploadedFilename:"",processingStatus:"初始化中...",statusInterval:null,conversionSuccess:!1,videoUrl:"",errorMessage:"",videoError:null,file:null,isDragging:!1,isUploading:!1,uploadProgress:0,error:null,formData:{use_generated_script:!0,script_style:"标准",target_audience:"通用",total_duration:"中等",subject:"通用",slide_duration:5,lang:"zh-cn",speed:50,vcn:"x4_mingge"}}},mounted(){this.checkThemeMode(),window.addEventListener("storage",this.checkThemeMode),window.addEventListener("themeChange",this.checkThemeMode)},beforeUnmount(){this.statusInterval&&clearInterval(this.statusInterval),window.removeEventListener("storage",this.checkThemeMode),window.removeEventListener("themeChange",this.checkThemeMode)},methods:{checkThemeMode(){this.isLightMode="light"===localStorage.getItem("theme-mode")},downloadVideo(){if(!this.videoUrl)return;const e=document.createElement("a");e.href=`${this.videoUrl}?download=true`,e.setAttribute("download",`${this.uploadedFilename.split(".")[0]}.mp4`),e.setAttribute("target","_blank"),document.body.appendChild(e),e.click(),setTimeout((()=>{document.body.removeChild(e)}),100)},handleFileChange(e){const t=e.target.files[0];t&&this.validateAndSetFile(t)},handleFileDrop(e){this.isDragging=!1;const t=e.dataTransfer.files[0];t&&this.validateAndSetFile(t)},validateAndSetFile(e){const t=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],a=e.name.split(".").pop().toLowerCase();t.includes(e.type)||["ppt","pptx"].includes(a)?e.size>52428800?this.error="文件大小不能超过50MB":(this.file=e,this.error=null,this.uploadFile()):this.error="只支持PPT文件(.ppt 或 .pptx)"},uploadFile(){this.isUploading=!0,this.uploadProgress=0;const e=new FormData;e.append("file",this.file),W.post("/api/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{this.uploadProgress=e.loaded/e.total*100}}).then((e=>{this.isUploading=!1,this.handleFileUploaded({task_id:e.data.task_id,filename:this.file.name})})).catch((e=>{this.isUploading=!1,this.error=e.response?.data?.error||"上传失败，请重试",this.file=null}))},toggleScriptOptions(){},submitForm(){this.startConversion(this.formData)},handleFileUploaded(e){this.taskId=e.task_id,this.uploadedFilename=e.filename,this.currentStep=2},startConversion(e){this.currentStep=3,W.post(`/api/convert/${this.taskId}`,e).then((()=>{this.checkTaskStatus()})).catch((e=>{this.handleError(e)}))},checkTaskStatus(){this.statusInterval&&clearInterval(this.statusInterval),this.statusInterval=setInterval((()=>{W.get(`/api/tasks/${this.taskId}`).then((e=>{if(this.processingStatus=e.data.status,"completed"===e.data.status){clearInterval(this.statusInterval),this.conversionSuccess=!0;let t=e.data.video_url;t&&(t.startsWith("http")||t.startsWith("/")?!t.startsWith("http")&&t.startsWith("/")?this.videoUrl=`${W.defaults.baseURL}${t}`:this.videoUrl=t:this.videoUrl=`${W.defaults.baseURL}/${t}`),this.currentStep=4}else"failed"===e.data.status&&(clearInterval(this.statusInterval),this.conversionSuccess=!1,this.errorMessage=e.data.error||"转换过程中出现错误",this.currentStep=4)})).catch((e=>{clearInterval(this.statusInterval),this.handleError(e)}))}),3e3)},handleError(e){this.conversionSuccess=!1,this.errorMessage=e.response?.data?.error||"发生未知错误",this.currentStep=4},resetForm(){this.currentStep=1,this.taskId=null,this.uploadedFilename="",this.processingStatus="初始化中...",this.conversionSuccess=!1,this.videoUrl="",this.errorMessage="",this.file=null,this.isDragging=!1,this.isUploading=!1,this.uploadProgress=0,this.error=null,this.formData={use_generated_script:!0,script_style:"标准",target_audience:"通用",total_duration:"中等",subject:"通用",slide_duration:5,lang:"zh-cn",speed:50,vcn:"x4_mingge"},this.statusInterval&&(clearInterval(this.statusInterval),this.statusInterval=null)},handleVideoError(e){this.videoError=`视频无法播放 (错误代码: ${e.target.error?e.target.error.code:"未知"})`,console.error("视频加载错误:",e)}}},O=a(71241);const R=(0,O.A)(J,[["render",Q],["__scopeId","data-v-09aac67a"]]);var B=R}}]);
//# sourceMappingURL=985.117f8ba7.js.map
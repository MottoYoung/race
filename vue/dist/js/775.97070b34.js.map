{"version":3,"file":"js/775.97070b34.js","mappings":"qyCA4NAA,EAAAA,GAAGC,WAAW,CACZC,SAAS,EACTC,OAAO,IAIT,MAAMC,GAAwB,IAAIC,IAE5BC,GAAoBC,IACxB,IAAKA,EAAK,MAAO,GAGjB,GAAIH,GAAsBI,IAAID,GAC5B,OAAOH,GAAsBK,IAAIF,GAGnC,MAAMG,EAASV,EAAAA,GAAGW,eAAeJ,EAAK,CACpCK,UAAU,EACVC,cAAe,CACbC,MAAM,EACNC,MAAM,KAMV,OADAX,GAAsBY,IAAIT,EAAKG,GACxBA,CAAM,E,uCAaf,MAAMO,EAAaC,UACjB,IAEEC,GAAU,gBAAiB,QAAQ,GAGnC,MAAMC,QAAiBC,MAAM,6CAA8C,CACzEC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAEC,cAGzB,IAAKP,EAASQ,GAAI,CAChB,MAAMC,QAAkBT,EAASU,OACjC,MAAM,IAAIC,MAAMF,EAAUG,OAAS,OACrC,CAGA,MAAMC,QAAab,EAASa,QAG5BC,EAAAA,EAAAA,QAAOD,EAAM,WAGbd,GAAU,aAAc,WAAW,EACrC,CAAE,MAAOa,GACPG,QAAQH,MAAM,cAAeA,GAE7Bb,GAAU,SAASa,EAAMI,UAAW,SAAS,EAC/C,GAGIC,GAAgBC,EAAAA,EAAAA,IAAI,IACpBC,GAAuBD,EAAAA,EAAAA,IAAI,MAC3BE,GAAWF,EAAAA,EAAAA,IAAI,IACfG,IAAWH,EAAAA,EAAAA,IAAI,IACfI,IAASJ,EAAAA,EAAAA,IAAIK,aAAaC,QAAQ,WAAaC,KAAKC,MAAMC,YAC3DJ,aAAaC,QAAQ,WACxBD,aAAaK,QAAQ,SAAUN,GAAOO,OAExC,MAAMC,IAAkBZ,EAAAA,EAAAA,IAAI,MAEtBa,IAAUb,EAAAA,EAAAA,KAAI,GACdc,IAAad,EAAAA,EAAAA,IAAI,MACjBe,IAAYf,EAAAA,EAAAA,KAAI,GAChBgB,IAAehB,EAAAA,EAAAA,KAAK,GACpBiB,IAAiBjB,EAAAA,EAAAA,IAAI,IACrBkB,IAAYlB,EAAAA,EAAAA,KAAI,GAChBmB,IAAcnB,EAAAA,EAAAA,KAAI,GAClBoB,IAAWpB,EAAAA,EAAAA,KAAI,GACfqB,IAAkBrB,EAAAA,EAAAA,IAAI,MAC5B,IAAIsB,GAAiB,KAGrB,MAAMC,IAAevB,EAAAA,EAAAA,IAAI,IAEzB,SAASwB,GAAsBC,GAC7B,IAAKA,EAAiB,MAAO,GAG7B,GAAIA,EAAgBC,SAAS,MAC3B,OAAOD,EAIT,IAAIE,EAAYF,EAAgBG,QAC9B,uBACA,SAAUC,EAAOC,GACf,MAAO,OAAOA,EAAGC,YACnB,IAQF,OAJAJ,EAAYA,EAAUC,QAAQ,uBAAuB,SAAUC,EAAOC,GACpE,MAAO,IAAIA,EAAGC,SAChB,IAEOJ,CACT,CAEA,MAAMK,GAAaA,KACbX,GAAgBV,QAClBW,GAAiB,IAAIW,IAAJ,CAAWZ,GAAgBV,MAAO,CACjDuB,MAAO,CACLC,GAAI,eACJC,QAAQ,GAEVC,OAAQ,OACRC,KAAM,UACNC,QAAS,CACP,WACA,OACA,SACA,SACA,IACA,OACA,QACA,OACA,eACA,QACA,OACA,cACA,IACA,OACA,QACA,QACA,IACA,UACA,cAEFC,QAAS,CACPC,KAAM,CACJC,OAAQ,QACRC,aAAa,GAEfC,SAAU,CACRC,WAAW,EACXC,aAAa,GAEfC,KAAM,CACJX,QAAQ,EACRY,YAAY,IAGhBC,MAAQtC,IAENM,GAAeN,MAAQA,CAAK,EAE9BuC,MAAOA,MACLC,EAAAA,EAAAA,KAAS,KAEP,MAAMC,EAAmB5B,GAAsBP,GAAeN,OAC1DW,IACFA,GAAe+B,SAASD,EAC1B,GACA,IAGR,GAIFE,EAAAA,EAAAA,IAAMvC,IAAY9C,IACZA,GACFkF,EAAAA,EAAAA,KAAS,KACPnB,IAAY,IAGdV,IAAgBiC,SAClB,IAGF,MAAMC,IAAQxD,EAAAA,EAAAA,IAAI,CAChByD,MAAM,EACN3D,QAAS,GACT4D,KAAM,OACNC,UAAW,OAGP9E,GAAYA,CAACiB,EAAS4D,EAAO,OAAQE,GAAY,KAGnDJ,GAAM7C,MAAM8C,MACZD,GAAM7C,MAAMb,UAAYA,GACxB0D,GAAM7C,MAAM+C,OAASA,IAMnBF,GAAM7C,MAAMgD,WACdE,aAAaL,GAAM7C,MAAMgD,WAI3BH,GAAM7C,MAAQ,CACZ8C,MAAM,EACN3D,UACA4D,OACAC,UAAW,MAITC,IACFJ,GAAM7C,MAAMgD,UAAYG,YAAW,KACjCN,GAAM7C,MAAM8C,MAAO,CAAK,GACvB,MACL,EAGFM,EAAAA,GAAOpG,WAAW,CAChBqG,UAAWA,CAACvF,EAAMwF,KAChB,MAAMC,EAAWnB,EAAAA,EAAKoB,YAAYF,GAAQA,EAAO,YACjD,OAAOlB,EAAAA,EAAKiB,UAAUvF,EAAM,CAAEyF,aAAYvD,KAAK,EAEjDyD,QAAQ,EACRC,KAAK,IAGP,MAAMC,IAAatE,EAAAA,EAAAA,KAAI,GACjBuE,IAAkBvE,EAAAA,EAAAA,KAAI,GAGtBwE,GAAiBA,KAEjB1D,GAAWH,OAAS2D,GAAW3D,OACjC8D,OAAOC,uBAAsB,KAC3B,MAAMC,EAAY7D,GAAWH,MAC7BgE,EAAUC,SAAS,CACjBC,IAAKF,EAAUG,aACfC,SAAU,UACV,GAEN,GAIFC,EAAAA,EAAAA,KAAU,KAER,MAAMC,EAAQ5E,aAAaC,QAAQ,sBACnC,GAAI2E,EAAO,CACT,MAAMC,EAAU/F,KAAKgG,MAAMF,GAC3BlF,EAAcY,MAAQuE,EAAQE,KAAKC,IAAI,IAClCA,EACHC,UAAW,IAAI/E,KAAK8E,EAAKC,WACzBnF,SAAUkF,EAAKlF,SAASiF,KAAKG,IAAG,IAC3BA,EACHD,UAAW,IAAI/E,KAAKgF,EAAID,mBAIxBvF,EAAcY,MAAM6E,OAAS,IAC/BvF,EAAqBU,MAAQZ,EAAcY,MAAM,GAAGwB,KAItDgB,EAAAA,EAAAA,KAAS,KACPqB,KAEAV,WAAWU,GAAgB,IAAI,GAEnC,CAGI1D,GAAWH,OACbG,GAAWH,MAAM8E,iBAAiB,SAAUC,IAI9C,MAAMC,EAAQC,SAASC,cAAc,mBACrC,GAAIF,EAAO,CACT,MAAMG,EAAOH,EAAMI,YACnBJ,EAAMK,UAAY,GAElB,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAKN,OAAQS,IAAK,CACpC,MAAMC,EAAON,SAASO,cAAc,QACpCD,EAAKH,YAAcD,EAAKG,GACxBC,EAAKE,MAAMC,eAAwB,GAAJJ,EAAH,IAC5BC,EAAKI,UAAUC,IAAI,kBACnBZ,EAAMa,YAAYN,EACpB,CACF,CAGAO,KACAhC,OAAOgB,iBAAiB,UAAWgB,IACnChC,OAAOgB,iBAAiB,cAAegB,IAGvCC,GAAgB/F,MAAQ,IAAIgG,sBACzBC,IACCA,EAAQC,SAASC,IAEXA,EAAMC,gBACRD,EAAME,OAAOV,UAAUC,IAAI,UAC7B,GACA,GAEJ,CAAEU,KAAMnG,GAAWH,MAAOuG,UAAW,MAIvC/D,EAAAA,EAAAA,KAAS,KACPyC,SAASuB,iBAAiB,YAAYN,SAAStB,IAC7CmB,GAAgB/F,MAAMyG,QAAQ7B,EAAI,GAClC,GACF,KAGJ8B,EAAAA,EAAAA,KAAgB,KAEVvG,GAAWH,OACbG,GAAWH,MAAM2G,oBAAoB,SAAU5B,IAEjDjB,OAAO6C,oBAAoB,UAAWb,IACtChC,OAAO6C,oBAAoB,cAAeb,IAGtCC,GAAgB/F,OAClB+F,GAAgB/F,MAAM4G,YACxB,IAEF,MAAMC,IAAcxH,EAAAA,EAAAA,IAA2C,UAAvCK,aAAaC,QAAQ,eAEvCmG,GAAiBA,KACrBe,GAAY7G,MAA+C,UAAvCN,aAAaC,QAAQ,aAAyB,EAI9DoF,GAAeA,KACnB,IAAK5E,GAAWH,QAAUE,GAAQF,MAAO,OAEzC,MAAMgE,EAAY7D,GAAWH,MACvB8G,EACJ9C,EAAUG,aAAeH,EAAU+C,UAAY/C,EAAUgD,aAAe,GAGrEF,GAAelD,GAAgB5D,QAClC4D,GAAgB5D,OAAQ,EACxB2D,GAAW3D,OAAQ,GAIjB8G,GAAclD,GAAgB5D,QAChC4D,GAAgB5D,OAAQ,EACxB2D,GAAW3D,OAAQ,EACrB,EAIIiH,GAAwBA,KAC5B,MAAMC,EAAQtH,KAAKC,MAAMC,WAAaqH,KAAKC,SAAStH,SAAS,IAAIuH,OAAO,EAAG,GACrEC,EAAU,CACd9F,GAAI0F,EACJlC,MAAO,MAAM5F,EAAcY,MAAM6E,OAAS,IAC1CF,UAAW,IAAI/E,KACfJ,SAAU,IAsBZ,OApBAJ,EAAcY,MAAMuH,QAAQD,GAC5BhI,EAAqBU,MAAQkH,EAC7B1H,GAASQ,MAAQ,GAGjBO,GAAUP,OAAQ,EAGlBwH,KAGIpH,GAAUJ,QACZI,GAAUJ,OAAQ,IAIpBwC,EAAAA,EAAAA,KAAS,KACPqB,IAAgB,IAGXqD,CAAK,EAGRO,GAAsBjG,IAC1B,GAAItB,GAAQF,MAEV,YADA9B,GAAU,YAAa,QAIzBoB,EAAqBU,MAAQwB,EAC7B,MAAMkD,EAAOtF,EAAcY,MAAM0H,MAAMC,GAAMA,EAAEnG,KAAOA,IAClDkD,IACFlF,GAASQ,MAAQ0E,EAAKlF,SAGtBe,GAAUP,OAAQ,EACdP,GAAOO,OAASwB,GAElBpD,MAAM,6CAA8C,CAClDC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CACnBmJ,QAASnI,GAAOO,MAChB6H,gBAAiBrG,MAGlBsG,MAAMC,GAAQA,EAAIlJ,SAClBiJ,MAAME,IACLzH,GAAUP,MAAQgI,EAAKC,SAAS,IAEjCC,OAAOC,IACNjJ,QAAQH,MAAM,YAAaoJ,EAAI,KAMnC/H,GAAUJ,QACZI,GAAUJ,OAAQ,IAIpBwC,EAAAA,EAAAA,KAAS,KACPqB,KAEAV,WAAWU,GAAgB,IAAI,GAC/B,EAIEuE,GAAsBC,IAC1BjJ,EAAcY,MAAQZ,EAAcY,MAAMsI,QAAQX,GAAMA,EAAEnG,KAAO6G,IAC7D/I,EAAqBU,QAAUqI,IACjC/I,EAAqBU,MAAQZ,EAAcY,MAAM,IAAIwB,IAAM,MAE7DgG,IAAoB,EAGhBe,GAAiBpJ,IACrB,MAAMqJ,EAAerJ,EAAQsJ,UAAU,EAAG,IAC1C,OAAOD,EAAa3D,OAAS1F,EAAQ0F,OACjC2D,EAAe,MACfA,CAAY,GAIlB7F,EAAAA,EAAAA,IACEnD,IACCkJ,IACC,MAAMhE,EAAOtF,EAAcY,MAAM0H,MAC9BC,GAAMA,EAAEnG,KAAOlC,EAAqBU,QAEvC,GAAI0E,EAAM,CAERA,EAAKlF,SAAW,IAAIkJ,GAGpB,MAAMC,EAAeD,EAAQhB,MAAMkB,GAAiB,SAAXA,EAAEC,OACvCF,IACFjE,EAAKM,MAAQuD,GAAcI,EAAajK,UAE1CgG,EAAKC,UAAY,IAAI/E,KACrB4H,IACF,IAEF,CAAEsB,MAAM,IAGV,MAAMtB,GAAqBA,KACzB,MAAMuB,EAAa3J,EAAcY,MAAMyE,KAAKC,IAAI,IAC3CA,EAEHC,UACED,EAAKC,qBAAqB/E,KACtB8E,EAAKC,UAAUqE,UACf,IAAIpJ,KAAK8E,EAAKC,WAAWqE,UAC/BxJ,SAAUkF,EAAKlF,SAASiF,KAAKG,IAAG,IAC3BA,EACHD,UACEC,EAAID,qBAAqB/E,KACrBgF,EAAID,UAAUqE,UACd,IAAIpJ,KAAKgF,EAAID,WAAWqE,kBAKlCtJ,aAAaK,QAAQ,qBAAsBvB,KAAKC,UAAUsK,GAAY,EAIlEE,GAAcC,IAClB,MAAMC,EAAaD,aAAgBtJ,KAAOsJ,EAAO,IAAItJ,KAAKwJ,OAAOF,IACjE,OAAOC,EAAWE,mBAAmB,QAAS,CAC5CC,KAAM,UACNC,OAAQ,WACR,EAIEC,IAAYnK,EAAAA,EAAAA,IAAI,MAGhBoK,GAAoBA,KACxBD,GAAUxJ,MAAM0J,OAAO,EAInBC,GAAmB1L,UACvB,MAAM2L,EAAQC,EAAMxD,OAAOuD,MAC3B,GAAKA,GAA0B,IAAjBA,EAAM/E,OAApB,CAEKvF,EAAqBU,QACxBiH,WACMzE,EAAAA,EAAAA,OAGR,IACEtE,GAAU,YAAa,QAEvB,MAAM4L,EAAW,IAAIC,SAGfC,EAAe,CACnB,kBACA,qBACA,0EACA,gCACA,4EACA,aACA,iBAIF,IAAIC,EAAa,EACjB,IAAK,IAAI3E,EAAI,EAAGA,EAAIsE,EAAM/E,OAAQS,IAAK,CACrC,MAAM4E,EAAON,EAAMtE,GAGhB0E,EAAajJ,SAASmJ,EAAKnH,OAC3BmH,EAAKC,KAAKC,SAAS,QACnBF,EAAKC,KAAKC,SAAS,SACnBF,EAAKC,KAAKC,SAAS,SACnBF,EAAKC,KAAKC,SAAS,SACnBF,EAAKC,KAAKC,SAAS,UAKtBN,EAASO,OAAO,QAASH,GACzBD,KAJE/L,GAAU,aAAagM,EAAKC,OAAQ,QAKxC,CAEA,GAAmB,IAAfF,EAEF,YADA/L,GAAU,aAAc,SAI1B4L,EAASO,OAAO,UAAW5K,GAAOO,OAClC8J,EAASO,OAAO,kBAAmB/K,EAAqBU,OAExD8J,EAASO,OAAO,gBAAiB,QAEjCnL,QAAQoL,IAAI,aACZpL,QAAQoL,IAAI,QAAS7K,GAAOO,OAC5Bd,QAAQoL,IAAI,QAAShL,EAAqBU,OAC1Cd,QAAQoL,IAAI,SAAUL,GAGtB,MAAM9L,QAAiBC,MAAM,wCAAyC,CACpEC,OAAQ,OACRE,KAAMuL,IAGR,IAAK3L,EAASQ,GAAI,CAChB,MAAMC,QAAkBT,EAASU,OACjC,MAAM,IAAIC,MAAMF,EAAUO,SAAW,OACvC,CAEA,MAAM1B,QAAeU,EAASU,OAG9B,GAFAK,QAAQoL,IAAI,QAAS7M,GAEC,YAAlBA,EAAO8M,OAkCT,MAAM,IAAIzL,MAAMrB,EAAO0B,SAAW,QAlCH,CAC/BjB,GAAU,GAAGT,EAAO0B,UAAW,WAC/BoB,GAAUP,OAAQ,EAClBR,GAASQ,MAAMwK,KAAK,CAClB3B,KAAM,YACNnK,QAAS,0DACKuL,0CAERQ,MAAMC,KAAKd,GACVtB,QACE4B,GACCF,EAAajJ,SAASmJ,EAAKnH,OAC3BmH,EAAKC,KAAKC,SAAS,QACnBF,EAAKC,KAAKC,SAAS,UAEtB3F,KACEyF,GAAS,OAAOA,EAAKC,SAASQ,GAAeT,EAAKU,gBAEpDC,KAAK,uCAGZlG,UAAW,IAAI/E,OAGjB,MAAM8E,EAAOtF,EAAcY,MAAM0H,MAC9BC,GAAMA,EAAEnG,KAAOlC,EAAqBU,QAEnC0E,IACFA,EAAKlF,SAAW,IAAIA,GAASQ,OAC7BwH,MAGF3D,IACF,CAGF,CAAE,MAAO9E,GACPG,QAAQH,MAAM,UAAWA,GACzBb,GAAU,SAASa,EAAMI,UAAW,QACtC,CAAE,QAEA0K,EAAMxD,OAAOrG,MAAQ,GACrBY,GAAaZ,MAAQ,OACrBmD,YAAW,KACTvC,GAAaZ,MAAQ,EAAE,GACtB,IACL,CAtHwC,CAsHxC,EAII2K,GAAkBG,GAClBA,EAAQ,KAAaA,EAAQ,KACxBA,EAAQ,SAAiBA,EAAQ,MAAMC,QAAQ,GAAK,OAChDD,EAAQ,SAASC,QAAQ,GAAK,MAGvCC,GAAgBC,IACpB7K,GAAUJ,OAAQ,EAClBK,GAAaL,MAAQiL,EACrB3K,GAAeN,MAAQR,GAASQ,MAAMiL,GAAOvM,OAAO,EAGhDwM,GAAcA,KAClB,GAAI7K,GAAaL,OAAS,EAAG,CAE3B,MAAMmL,EAAgBxK,GAClBA,GAAeyK,WACf9K,GAAeN,MAEnBR,GAASQ,MAAMK,GAAaL,OAAOtB,QAAUyM,CAC/C,CACAE,IAAe,EAEXC,GAAmBL,IACvBzL,GAASQ,MAAMiL,GAAOM,eAAiB/L,GAASQ,MAAMiL,GAAOM,aAAa,EAGtEC,GAAgBA,KACpB/K,GAAST,OAASS,GAAST,MAE3BQ,GAAYR,MAAQS,GAAST,KAAK,EAK9BqL,GAAgBA,KACpBjL,GAAUJ,OAAQ,EAClBK,GAAaL,OAAS,EACtBM,GAAeN,MAAQ,EAAE,EAErByL,GAAYxN,UACZgC,GAAgBD,QAClBC,GAAgBD,MAAM0L,QACtBzL,GAAgBD,MAAQ,MAI1BE,GAAQF,OAAQ,EAChBR,GAASQ,MAAMR,GAASQ,MAAM6E,OAAS,GAAG8G,aAAc,EACxDzN,GAAU,QAAS,QAGnB,UACQE,MAAM,uCAAwC,CAClDC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CACnBmJ,QAASnI,GAAOO,MAChB6H,gBAAiBvI,EAAqBU,MACtC4L,cAAe,UAGrB,CAAE,MAAOC,GACP3M,QAAQH,MAAM,UAAW8M,EAC3B,GAEIC,GAAc7N,UAGlB,GAFA2F,GAAgB5D,OAAQ,EACxB2D,GAAW3D,OAAQ,EACdT,EAASS,MAAMoB,SAAUlB,GAAQF,MAAtC,CACKV,EAAqBU,OAAUZ,EAAcY,MAAM6E,SACtDoC,WACMzE,EAAAA,EAAAA,OAERqB,KACArE,GAASQ,MAAMwK,KAAK,CAClB3B,KAAM,OACNnK,QAASa,EAASS,MAClB2E,UAAW,IAAI/E,OAEbK,GAAgBD,OAClBC,GAAgBD,MAAM0L,QAExBzL,GAAgBD,MAAQ,IAAI+L,gBAC5B,IACE7L,GAAQF,OAAQ,EAChB,MAAMgM,EAAgB1M,EAAqBU,MAErCiM,EAAY,CAChBpD,KAAM,YACNnK,QAAS,GACTwN,UAAW,GACXvH,UAAW,IAAI/E,KACf+L,aAAa,EACbJ,eAAe,EACfY,cAAe,GACfC,aAAc,GACdC,gBAAiB,GACjBC,sBAAuB,GACvBC,iBAAiB,EACjBC,mBAAmB,EACnBC,aAAc,EACdC,iBAAkB,MAEpBlN,GAASQ,MAAMwK,KAAKyB,GAGpBA,EAAUS,iBAAmBC,aAAY,KACnCV,EAAUN,YACZM,EAAUQ,cAAgBR,EAAUQ,aAAe,GAAK,EAExDG,cAAcX,EAAUS,iBAC1B,GACC,KAGH,MAAMG,EAAczN,EAAcY,MAAM0H,MACrCC,GAAMA,EAAEnG,KAAOlC,EAAqBU,QAEjC8M,EAAUD,EACZA,EAAYrN,SAASiF,KAAKG,IAAG,CAC3BiE,KAAMjE,EAAIiE,KACVnK,QAASkG,EAAIlG,YAEf,GAGCoO,EAAQC,MAAMnI,GAAqB,WAAbA,EAAIiE,QAC7BiE,EAAQvF,QAAQ,CACdsB,KAAM,SACNnK,QACE,mKAON,MAAMP,QAAiBC,MAAM,sCAAuC,CAClEC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBoJ,gBAAiBvI,EAAqBU,MACtCb,QAASI,EAASS,MAClB4H,QAASnI,GAAOO,MAChB4L,cAAe,SACfkB,QAASA,EACTE,OAAQ/M,GAAgBD,MAAMgN,WAI5BC,EAAS9O,EAASI,KAAK2O,YACvBC,EAAU,IAAIC,YACpB,IAAIC,GAAI,EACJC,EAAS,GACTC,EAAgB,GAChBC,EAAkB,GAClBC,EAAc,KAGlB,MAAMC,EAAgBA,KACpB,MAAMC,EAAanO,GAASQ,MAAMR,GAASQ,MAAM6E,OAAS,GAEtD2I,IAEGG,EAAWtB,kBACdsB,EAAWtB,gBAAkB,IAI/BsB,EAAWrB,uBACRqB,EAAWrB,uBAAyB,IAAMkB,EAC7CA,EAAkB,GAGbG,EAAWnB,mBACdoB,GAAkBD,IAIlBJ,IAEGI,EAAWxB,gBACdwB,EAAWxB,cAAgB,IAI7BwB,EAAWvB,cACRuB,EAAWvB,cAAgB,IAAMmB,EACpCA,EAAgB,GAEZI,EAAWhC,cACbgC,EAAWhC,aAAc,GAItBgC,EAAWpB,iBACdsB,GAAgBF,IAKpB9J,IAAgB,EAGlB,MAAOwJ,EAAG,CACR,MAAM,KAAES,EAAI,MAAE9N,SAAgBiN,EAAOc,OACrC,GAAID,EAAM,MAEV,GAAIxO,EAAqBU,QAAUgM,EAAe,CAChD9M,QAAQoL,IAAI,gBACZ2C,EAAOe,SACP,KACF,CAIA,IAAIC,EAFJX,GAAUH,EAAQe,OAAOlO,EAAO,CAAEmO,QAAQ,IAG1C,OAAQF,EAAgBX,EAAOc,QAAQ,UAAY,EAAG,CACpD,MAAMC,EAAYf,EAAOgB,MAAM,EAAGL,GAClCX,EAASA,EAAOgB,MAAML,EAAgB,GAEtC,MAAMM,EAAQF,EAAUG,MAAM,MAC9B,IAAIC,EAAU,GACd,IAAK,MAAMC,KAAQH,EACbG,EAAKC,WAAW,YAClBF,GAAWC,EAAKJ,MAAM,IAI1B,GAAIG,EACF,IACE,MAAMzG,EAAOxJ,KAAKgG,MAAMiK,GAExB,GAAIzG,EAAKjJ,MACP,MAAM,IAAID,MAAMkJ,EAAKjJ,OAGnBiJ,EAAK4G,oBACPpB,GAAmBxF,EAAK4G,mBAGtB5G,EAAKtJ,UACP6O,GAAiBvF,EAAKtJ,SAIxBwE,aAAauK,GACbA,EAActK,WAAWuK,EAAe,IAC1C,CAAE,MAAO7B,GACP3M,QAAQH,MAAM,QAAS8M,EACzB,CAEJ,CACF,EAGI2B,GAAmBD,IACrBG,GAEJ,CAAE,MAAO3O,GACY,eAAfA,EAAMoL,MACRjM,GAAU,QAAS,QAErBgB,QAAQH,MAAM,QAASA,GACvBS,GAASQ,MAAMR,GAASQ,MAAM6E,OAAS,GAAGnG,QACxC,SAAWK,EAAMI,OACrB,CAAE,QACAe,GAAQF,OAAQ,EAChBT,EAASS,MAAQ,GAGjBR,GAASQ,MAAMkG,SAAStB,IAClBA,EAAI8H,mBACNE,cAAchI,EAAI8H,kBAClB9H,EAAI8H,iBAAmB,KACzB,UAGI7I,IACR,CArNmD,CAqNnD,GAEFlB,EAAAA,EAAAA,IAAMrD,GAAuBuP,IAC3B,MAAMnK,EAAOtF,EAAcY,MAAM0H,MAAMC,GAAMA,EAAEnG,KAAOqN,IACtDrP,GAASQ,MAAQ0E,GAAMlF,UAAY,EAAE,IAGvC,MAAMsP,GAAc5F,IAElB,IAAKA,EAAM,MAAO,QAGlB,MAAM6F,EAAW7F,aAAgBtJ,KAAOsJ,EAAO,IAAItJ,KAAKsJ,GAGxD,OAAI8F,MAAMD,EAAS/F,YACjB9J,QAAQH,MAAM,UAAWmK,GAClB,QAGF6F,EAAS1F,mBAAmB,QAAS,CAC1CC,KAAM,UACNC,OAAQ,WACR,EAYExD,KADkB1G,EAAAA,EAAAA,IAAI,KACJA,EAAAA,EAAAA,IAAI,QAG5BsD,EAAAA,EAAAA,IACEnD,IACA,MACEgD,EAAAA,EAAAA,KAAS,KAEP,MAAMyM,EAAkBhK,SAASuB,iBAC/B,2BAEFyI,EAAgB/I,SAASgJ,IACvBA,EAAGvJ,UAAUC,IAAI,YACbG,GAAgB/F,OAClB+F,GAAgB/F,MAAMyG,QAAQyI,EAChC,GACA,GACF,GAEJ,CAAEpG,MAAM,IAIV,MAAM8E,GAAqBzO,IACzB,IACGA,EAAQmN,uBACgC,IAAzCnN,EAAQmN,sBAAsBzH,OAG9B,YADA1F,EAAQqN,mBAAoB,GAI9BrN,EAAQqN,mBAAoB,EAG5B,MAAM2C,EAAWhQ,EAAQmN,sBAAsB8C,OAAO,GACtDjQ,EAAQkN,iBAAmB8C,EAC3BhQ,EAAQ+M,UAAY/M,EAAQkN,gBAC5BlN,EAAQmN,sBAAwBnN,EAAQmN,sBAAsB7D,UAAU,GAGxE,IAAI4G,EAAQ,EAGR,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAAMtO,SAASoO,KAChDE,EAAQ,IAIVlM,YAAW,IAAMyK,GAAkBzO,IAAUkQ,GAG7CxL,IAAgB,EAIZgK,GAAmB1O,IACvB,IAAKA,EAAQiN,cAAgD,IAAhCjN,EAAQiN,aAAavH,OAEhD,YADA1F,EAAQoN,iBAAkB,GAI5BpN,EAAQoN,iBAAkB,EAG1B,MAAM4C,EAAWhQ,EAAQiN,aAAagD,OAAO,GAC7CjQ,EAAQgN,eAAiBgD,EACzBhQ,EAAQT,QAAUS,EAAQgN,cAC1BhN,EAAQiN,aAAejN,EAAQiN,aAAa3D,UAAU,GAGtD,IAAI4G,EAAQ,GAGR,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAAMtO,SAASoO,KAChDE,EAAQ,IAIVlM,YAAW,IAAM0K,GAAgB1O,IAAUkQ,GAG3CxL,IAAgB,E,47JC/uClB,MAAMyL,IAA2B,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBAEvE,S","sources":["webpack://vue/./src/views/main/functions/mainExercise.vue","webpack://vue/./src/views/main/functions/mainExercise.vue?c6d4"],"sourcesContent":["<template>\r\n  <div class=\"app-container\" :class=\"{ 'light-mode': isLightMode }\">\r\n    <div v-if=\"toast.show\" class=\"toast\" :class=\"toast.type\">\r\n      {{ toast.message }}\r\n    </div>\r\n    <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->\r\n    <div class=\"main-content\">\r\n      <!-- ‰æßËæπÊ†èÁßªÂà∞‰∏ªÂÜÖÂÆπÂå∫ÂüüÂÜÖ -->\r\n      <div\r\n        class=\"sidebar\"\r\n        :class=\"{ collapsed: isCollapsed, hidden: isHidden }\"\r\n      >\r\n        <div class=\"sidebar-header\">\r\n          <h2>ÂéÜÂè≤ÂØπËØù</h2>\r\n          <button @click=\"createNewConversation\" class=\"new-chat-btn\">\r\n            <span class=\"btn-icon\">+</span>\r\n            <span class=\"btn-text\" v-if=\"!isCollapsed\">Êñ∞Âª∫ÂØπËØù</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"conversation-list\" v-show=\"!isCollapsed\">\r\n          <div\r\n            v-for=\"conv in conversations\"\r\n            :key=\"conv.id\"\r\n            class=\"conversation-item\"\r\n            :class=\"{ active: activeConversationId === conv.id }\"\r\n            @click=\"switchConversation(conv.id)\"\r\n          >\r\n            <div class=\"conv-info\">\r\n              <div class=\"conv-title\">{{ conv.title }}</div>\r\n              <div class=\"conv-time\">{{ formatDate(conv.timestamp) }}</div>\r\n            </div>\r\n            <button\r\n              class=\"delete-btn\"\r\n              @click.stop=\"deleteConversation(conv.id)\"\r\n            >\r\n              <span class=\"delete-icon\">√ó</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- ‰øÆÊîπchat-containerÁöÑclassÁªëÂÆö -->\r\n      <div\r\n        class=\"chat-container\"\r\n        :class=\"{ 'editing-mode': isEditing, 'sidebar-expanded': !isHidden }\"\r\n      >\r\n        <div class=\"conversation-pane\">\r\n          <header class=\"chat-header\">\r\n            <!-- Â∞ÜÊäòÂè†ÊåâÈíÆÁßªÂà∞ËøôÈáå -->\r\n            <button @click=\"toggleSidebar\" class=\"toggle-sidebar-btn\">\r\n              <span v-if=\"isHidden\">‚ò∞</span>\r\n              <span v-else>‚úï</span>\r\n            </button>\r\n            <div class=\"header-decoration\"></div>\r\n            <h1>Êô∫ËÉΩËØïÈ¢òÁîüÊàê</h1>\r\n            <div class=\"branding\">\r\n              <span class=\"ai-logo\">AI</span>\r\n              <span class=\"powered-by\">Powered by DeepSeek</span>\r\n            </div>\r\n          </header>\r\n\r\n          <div class=\"chat-window\" ref=\"chatWindow\">\r\n            <div\r\n              v-for=\"(msg, index) in messages\"\r\n              :key=\"index\"\r\n              :class=\"['message', msg.role]\"\r\n            >\r\n              <div class=\"message-content\">\r\n                <div class=\"avatar\" :class=\"msg.role\">\r\n                  <img src=\"../../../assets/img/logo.png\" alt=\"Avatar\" />\r\n                </div>\r\n                <div class=\"bubble\">\r\n                  <div class=\"text\">\r\n                    <template v-if=\"msg.role === 'assistant'\">\r\n                      <!-- ÊÄùËÄÉËøáÁ®ãÈÉ®ÂàÜ -->\r\n                      <div\r\n                        class=\"thinking-process\"\r\n                        v-if=\"msg.reasoning && msg.reasoning.trim()\"\r\n                      >\r\n                        <div\r\n                          class=\"thinking-header\"\r\n                          @click=\"toggleReasoning(index)\"\r\n                        >\r\n                          <span class=\"thinking-icon\">üí°</span> ÊÄùËÄÉËøáÁ®ã\r\n                          <span class=\"toggle-icon\">{{\r\n                            msg.showReasoning ? \"‚ñº\" : \"‚ñ∂\"\r\n                          }}</span>\r\n                        </div>\r\n                        <!-- Â∞ÜÊÄùËÄÉËøáÁ®ãÂÜÖÂÆπÊîæÂú®ÊÄùËÄÉËøáÁ®ãÁõíÂ≠êÂÜÖ -->\r\n                        <div\r\n                          class=\"reasoning-content\"\r\n                          v-if=\"msg.showReasoning\"\r\n                          v-html=\"compiledMarkdown(msg.reasoning)\"\r\n                        ></div>\r\n                      </div>\r\n\r\n                      <!-- Ê≠£ÂºèÂõûÁ≠îÈÉ®ÂàÜ - ‰ΩøÁî®ÁôΩËâ≤ËÉåÊôØ -->\r\n                      <div\r\n                        class=\"correct-answer\"\r\n                        v-if=\"msg.content && msg.content.trim()\"\r\n                      >\r\n                        <div class=\"correct-answer-label\">\r\n                          <span class=\"correct-answer-icon\">üìù</span> Ê≠£ÂºèÂõûÁ≠î\r\n                        </div>\r\n                        <div\r\n                          class=\"correct-answer-content\"\r\n                          v-html=\"compiledMarkdown(msg.content)\"\r\n                        ></div>\r\n                      </div>\r\n\r\n                      <!-- Ê≠£Âú®ÂõûÁ≠îÁöÑÊèêÁ§∫ -->\r\n                      <div\r\n                        class=\"answering-indicator\"\r\n                        v-if=\"msg.isAnswering && !msg.content\"\r\n                      >\r\n                        <div class=\"dot-flashing-small\"></div>\r\n                        <span\r\n                          >AI Ê≠£Âú®ÊÄùËÄÉ{{ \".\".repeat(msg.thinkingDots) }}</span\r\n                        >\r\n                      </div>\r\n                    </template>\r\n\r\n                    <div\r\n                      v-if=\"msg.role === 'user' && msg.content\"\r\n                      class=\"markdown-body\"\r\n                    >\r\n                      <div v-html=\"compiledMarkdown(msg.content)\"></div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"message-actions\">\r\n                    <button\r\n                      class=\"edit-button\"\r\n                      v-if=\"msg.role === 'assistant'\"\r\n                      @click=\"startEditing(index)\"\r\n                    >\r\n                      <span class=\"button-icon\">‚úèÔ∏è</span>\r\n                      ÁºñËæë\r\n                    </button>\r\n                    <button\r\n                      class=\"break-button\"\r\n                      v-if=\"msg.role === 'assistant'\"\r\n                      @click=\"breaktalk(index)\"\r\n                    >\r\n                      <span class=\"button-icon\">‚èπÔ∏è</span>\r\n                      ÊâìÊñ≠\r\n                    </button>\r\n                    <div class=\"timestamp\">{{ formatTime(msg.timestamp) }}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"input-area\">\r\n            <div class=\"file-upload\">\r\n              <input\r\n                type=\"file\"\r\n                ref=\"fileInput\"\r\n                @change=\"handleFileUpload\"\r\n                :disabled=\"loading\"\r\n                multiple\r\n                style=\"display: none\"\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                class=\"upload-button\"\r\n                @click=\"triggerFileUpload\"\r\n              >\r\n                <span class=\"upload-icon\">üìé</span>\r\n                <span class=\"upload-text\">‰∏ä‰º†Êñá‰ª∂</span>\r\n              </button>\r\n              <span class=\"upload-tip\">ÊîØÊåÅPDF/Word/PPT/TXT/MD</span>\r\n            </div>\r\n\r\n            <div class=\"text-inputer\">\r\n              <input\r\n                v-model=\"inputMsg\"\r\n                type=\"text\"\r\n                placeholder=\"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢ò...\"\r\n                :disabled=\"loading\"\r\n                @keyup.enter=\"sendMessage\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"send-button\">\r\n              <button @click=\"sendMessage\" :disabled=\"!inputMsg || loading\">\r\n                <span v-if=\"!loading\" class=\"send-icon\">‚ñ∂</span>\r\n                <span class=\"send-text\">{{\r\n                  loading ? \"ÊÄùËÄÉ‰∏≠...\" : \"ÂèëÈÄÅ\"\r\n                }}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"loading\" class=\"loading-indicator\">\r\n            <div class=\"dot-flashing\"></div>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"isEditing\" class=\"editor-pane\">\r\n          <div class=\"editor-header\">\r\n            <h1>Âú®Á∫øÁºñËæë</h1>\r\n            <div class=\"editor-actions\">\r\n              <button class=\"save-button\" @click=\"saveEditing\">‰øùÂ≠ò</button>\r\n              <button class=\"cancel-button\" @click=\"cancelEditing\">ÂèñÊ∂à</button>\r\n              <button class=\"export-button\" @click=\"saveToWord(editingContent)\">\r\n                ÂØºÂá∫Word\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div id=\"vditor-container\" ref=\"vditorContainer\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { MathpixMarkdownModel as MM } from \"mathpix-markdown-it\";\r\nimport \"highlight.js/styles/a11y-dark.css\";\r\nimport { marked } from \"marked\";\r\n\r\n// ÈÖçÁΩÆMathpixMarkdownModel‰ΩøÁî®KaTeX\r\nMM.setOptions({\r\n  mathJax: false, // Á¶ÅÁî®MathJax\r\n  katex: true, // ÂêØÁî®KaTeX\r\n});\r\n\r\n// ‰ºòÂåñMarkdownÊ∏≤ÊüìÂáΩÊï∞\r\nconst compiledMarkdownCache = new Map();\r\n\r\nconst compiledMarkdown = (val) => {\r\n  if (!val) return \"\";\r\n\r\n  // ‰ΩøÁî®ÁºìÂ≠òÈÅøÂÖçÈáçÂ§çÊ∏≤ÊüìÁõ∏ÂêåÂÜÖÂÆπ\r\n  if (compiledMarkdownCache.has(val)) {\r\n    return compiledMarkdownCache.get(val);\r\n  }\r\n\r\n  const result = MM.markdownToHTML(val, {\r\n    htmlTags: true,\r\n    codeHighlight: {\r\n      auto: true,\r\n      code: true,\r\n    },\r\n  });\r\n\r\n  // ÁºìÂ≠òÁªìÊûú\r\n  compiledMarkdownCache.set(val, result);\r\n  return result;\r\n};\r\n</script>\r\n\r\n<script setup>\r\nimport { ref, nextTick, watch, onMounted, onBeforeUnmount } from \"vue\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\nimport hljs from \"highlight.js\";\r\nimport \"highlight.js/styles/github.css\";\r\nimport Vditor from \"vditor\";\r\nimport \"vditor/dist/index.css\";\r\n\r\nconst saveToWord = async (content) => {\r\n  try {\r\n    // ÊòæÁ§∫Âä†ËΩΩÊèêÁ§∫Âπ∂ÈòªÊ≠¢Ëá™Âä®Ê∏ÖÈô§\r\n    showToast(\"Ê≠£Âú®ÁîüÊàêWordÊñáÊ°£...\", \"info\", false);\r\n\r\n    // Ë∞ÉÁî®ÂêéÁ´ØAPI\r\n    const response = await fetch(\"http://localhost:2200/math/api/export-word\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ content }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.error || \"ÂØºÂá∫Â§±Ë¥•\");\r\n    }\r\n\r\n    // Ëé∑ÂèñÊñá‰ª∂blob\r\n    const blob = await response.blob();\r\n\r\n    // ‰ΩøÁî®file-saver‰øùÂ≠òÊñá‰ª∂\r\n    saveAs(blob, \"‰π†È¢ò.docx\");\r\n\r\n    // ÂØºÂá∫ÊàêÂäüÂêéÊòæÁ§∫ÊàêÂäüÊèêÁ§∫ÔºàËá™Âä®Ê∏ÖÈô§Ôºâ\r\n    showToast(\"WordÊñáÊ°£ÂØºÂá∫ÊàêÂäü\", \"success\", true);\r\n  } catch (error) {\r\n    console.error(\"ÂØºÂá∫WordÊñáÊ°£Â§±Ë¥•:\", error);\r\n    // Âá∫ÈîôÊó∂ÊòæÁ§∫ÈîôËØØÊèêÁ§∫ÔºàËá™Âä®Ê∏ÖÈô§Ôºâ\r\n    showToast(`ÂØºÂá∫Â§±Ë¥•: ${error.message}`, \"error\", true);\r\n  }\r\n};\r\n\r\nconst conversations = ref([]);\r\nconst activeConversationId = ref(null);\r\nconst inputMsg = ref(\"\");\r\nconst messages = ref([]);\r\nconst userId = ref(localStorage.getItem(\"userId\") || Date.now().toString());\r\nif (!localStorage.getItem(\"userId\")) {\r\n  localStorage.setItem(\"userId\", userId.value);\r\n}\r\nconst abortController = ref(null);\r\n\r\nconst loading = ref(false);\r\nconst chatWindow = ref(null);\r\nconst isEditing = ref(false);\r\nconst editingIndex = ref(-1);\r\nconst editingContent = ref(\"\");\r\nconst have_file = ref(false);\r\nconst isCollapsed = ref(true);\r\nconst isHidden = ref(true);\r\nconst vditorContainer = ref(null);\r\nlet vditorInstance = null;\r\n\r\n// Âú® setup ÂáΩÊï∞‰∏≠Ê∑ªÂä† uploadStatus ÂèòÈáè\r\nconst uploadStatus = ref(\"\"); // Ê∑ªÂä†‰∏ä‰º†Áä∂ÊÄÅÂèòÈáè\r\n\r\nfunction convertMathpixToLatex(mathpixMarkdown) {\r\n  if (!mathpixMarkdown) return \"\";\r\n\r\n  // ÂÖàÊ£ÄÊü•ÂÜÖÂÆπ‰∏≠ÊòØÂê¶Â∑≤ÁªèÂåÖÂê´ $$ Ê†ºÂºèÁöÑÂÖ¨ÂºèÔºåÈÅøÂÖçÈáçÂ§çËΩ¨Êç¢ÂØºËá¥ÂµåÂ•ó\r\n  if (mathpixMarkdown.includes(\"$$\")) {\r\n    return mathpixMarkdown;\r\n  }\r\n\r\n  // Â§ÑÁêÜÂùóÁ∫ßÂÖ¨Âºè \\[ ... \\] ËΩ¨Êç¢‰∏∫ $$ ... $$\r\n  let converted = mathpixMarkdown.replace(\r\n    /\\\\\\[([\\s\\S]*?)\\\\\\]/g,\r\n    function (match, p1) {\r\n      return `\\n$$${p1.trim()}$$\\n`; // Á°Æ‰øùÂâçÂêéÊúâÊç¢Ë°å\r\n    }\r\n  );\r\n\r\n  // Â§ÑÁêÜË°åÂÜÖÂÖ¨Âºè \\( ... \\) ËΩ¨Êç¢‰∏∫ $ ... $\r\n  converted = converted.replace(/\\\\\\(([\\s\\S]*?)\\\\\\)/g, function (match, p1) {\r\n    return `$${p1.trim()}$`;\r\n  });\r\n\r\n  return converted;\r\n}\r\n\r\nconst initVditor = () => {\r\n  if (vditorContainer.value) {\r\n    vditorInstance = new Vditor(vditorContainer.value, {\r\n      cache: {\r\n        id: \"vditor-cache\",\r\n        enable: true,\r\n      },\r\n      height: \"100%\",\r\n      mode: \"wysiwyg\", // ÂÆûÊó∂È¢ÑËßàÊ®°Âºè\r\n      toolbar: [\r\n        \"headings\",\r\n        \"bold\",\r\n        \"italic\",\r\n        \"strike\",\r\n        \"|\",\r\n        \"line\",\r\n        \"quote\",\r\n        \"list\",\r\n        \"ordered-list\",\r\n        \"check\",\r\n        \"code\",\r\n        \"inline-code\",\r\n        \"|\",\r\n        \"link\",\r\n        \"image\",\r\n        \"table\",\r\n        \"|\",\r\n        \"formula\", // Êï∞Â≠¶ÂÖ¨ÂºèÊåâÈíÆ\r\n        \"fullscreen\",\r\n      ],\r\n      preview: {\r\n        math: {\r\n          engine: \"KaTeX\", // ‰ΩøÁî®KaTeX\r\n          inlineDigit: true,\r\n        },\r\n        markdown: {\r\n          autoSpace: true,\r\n          fixTermLink: true,\r\n        },\r\n        hljs: {\r\n          enable: true,\r\n          lineNumber: true,\r\n        },\r\n      },\r\n      input: (value) => {\r\n        // ÂÆûÊó∂Êõ¥Êñ∞ÁºñËæëÂÜÖÂÆπ\r\n        editingContent.value = value;\r\n      },\r\n      after: () => {\r\n        nextTick(() => {\r\n          // ÂÖàËΩ¨Êç¢MathpixÊ†ºÂºè‰∏∫Ê†áÂáÜLaTeXÊ†ºÂºè\r\n          const convertedContent = convertMathpixToLatex(editingContent.value);\r\n          if (vditorInstance) {\r\n            vditorInstance.setValue(convertedContent);\r\n          }\r\n        });\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n// ÁõëÂê¨ÁºñËæëÁä∂ÊÄÅ\r\nwatch(isEditing, (val) => {\r\n  if (val) {\r\n    nextTick(() => {\r\n      initVditor();\r\n    });\r\n  } else {\r\n    vditorInstance?.destroy();\r\n  }\r\n});\r\n\r\nconst toast = ref({\r\n  show: false,\r\n  message: \"\",\r\n  type: \"info\", // info/success/error\r\n  timeoutId: null, // Ê∑ªÂä†Ëøô‰∏™Â±ûÊÄßÊù•Ë∑üË∏™Ë∂ÖÊó∂ID\r\n});\r\n\r\nconst showToast = (message, type = \"info\", autoClear = true) => {\r\n  // Â¶ÇÊûúÂ∑≤ÁªèÊúâ‰∏Ä‰∏™ÊòæÁ§∫‰∏≠ÁöÑÁõ∏ÂêåÊ∂àÊÅØÂíåÁ±ªÂûãÁöÑÊèêÁ§∫Ôºå‰∏çË¶ÅÈáçÊñ∞ÂàõÂª∫\r\n  if (\r\n    toast.value.show &&\r\n    toast.value.message === message &&\r\n    toast.value.type === type\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  // Ê∏ÖÈô§‰ªª‰ΩïÁé∞ÊúâÁöÑË∂ÖÊó∂\r\n  if (toast.value.timeoutId) {\r\n    clearTimeout(toast.value.timeoutId);\r\n  }\r\n\r\n  // ËÆæÁΩÆÊñ∞ÁöÑÊèêÁ§∫\r\n  toast.value = {\r\n    show: true,\r\n    message,\r\n    type,\r\n    timeoutId: null,\r\n  };\r\n\r\n  // Â¶ÇÊûúÈúÄË¶ÅËá™Âä®Ê∏ÖÈô§ÔºåËÆæÁΩÆË∂ÖÊó∂\r\n  if (autoClear) {\r\n    toast.value.timeoutId = setTimeout(() => {\r\n      toast.value.show = false;\r\n    }, 3000);\r\n  }\r\n};\r\n// ÈÖçÁΩÆ Markdown Ëß£ÊûêÂô®\r\nmarked.setOptions({\r\n  highlight: (code, lang) => {\r\n    const language = hljs.getLanguage(lang) ? lang : \"plaintext\";\r\n    return hljs.highlight(code, { language }).value;\r\n  },\r\n  breaks: true,\r\n  gfm: true,\r\n});\r\n// Ê∑ªÂä†‰∏Ä‰∏™ÂèòÈáèÊù•ÊéßÂà∂ÊòØÂê¶Ëá™Âä®ÊªöÂä®\r\nconst autoScroll = ref(true);\r\nconst userHasScrolled = ref(false);\r\n\r\n// ‰øÆÊîπÊªöÂä®Âà∞Â∫ïÈÉ®ÁöÑÂáΩÊï∞\r\nconst scrollToBottom = () => {\r\n  // ‰ΩøÁî®requestAnimationFrameÊù•‰ºòÂåñÊªöÂä®ÊÄßËÉΩ\r\n  if (chatWindow.value && autoScroll.value) {\r\n    window.requestAnimationFrame(() => {\r\n      const container = chatWindow.value;\r\n      container.scrollTo({\r\n        top: container.scrollHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    });\r\n  }\r\n};\r\n\r\n// Ê∑ªÂä†ÊªöÂä®‰∫ã‰ª∂ÁõëÂê¨\r\nonMounted(() => {\r\n  // ‰øÆÊîπÊú¨Âú∞Â≠òÂÇ®ÈîÆÂêçÔºåÊ∑ªÂä†ÂäüËÉΩÂâçÁºÄ\r\n  const saved = localStorage.getItem(\"math_conversations\");\r\n  if (saved) {\r\n    const rawData = JSON.parse(saved);\r\n    conversations.value = rawData.map((conv) => ({\r\n      ...conv,\r\n      timestamp: new Date(conv.timestamp), // ÊÅ¢Â§ç‰ºöËØùÊó∂Èó¥\r\n      messages: conv.messages.map((msg) => ({\r\n        ...msg,\r\n        timestamp: new Date(msg.timestamp), // ÊÅ¢Â§çÊ∂àÊÅØÊó∂Èó¥\r\n      })),\r\n    }));\r\n\r\n    if (conversations.value.length > 0) {\r\n      activeConversationId.value = conversations.value[0].id;\r\n    }\r\n\r\n    // Á°Æ‰øùÂú®DOMÊõ¥Êñ∞ÂêéÊªöÂä®Âà∞Â∫ïÈÉ®\r\n    nextTick(() => {\r\n      scrollToBottom();\r\n      // Ê∑ªÂä†‰∏Ä‰∏™Âª∂ËøüÂÜçÊ¨°ÊªöÂä®ÔºåÁ°Æ‰øùÊâÄÊúâÂÜÖÂÆπÈÉΩÂ∑≤ÂÆåÂÖ®Ê∏≤Êüì\r\n      setTimeout(scrollToBottom, 300);\r\n    });\r\n  }\r\n\r\n  // Ê∑ªÂä†ÊªöÂä®‰∫ã‰ª∂ÁõëÂê¨\r\n  if (chatWindow.value) {\r\n    chatWindow.value.addEventListener(\"scroll\", handleScroll);\r\n  }\r\n\r\n  // Ê∑ªÂä†Âä®ÊÄÅÊ†áÈ¢òÊïàÊûú\r\n  const title = document.querySelector(\".chat-header h1\");\r\n  if (title) {\r\n    const text = title.textContent;\r\n    title.innerHTML = \"\";\r\n\r\n    for (let i = 0; i < text.length; i++) {\r\n      const span = document.createElement(\"span\");\r\n      span.textContent = text[i];\r\n      span.style.animationDelay = `${i * 0.1}s`;\r\n      span.classList.add(\"char-animation\");\r\n      title.appendChild(span);\r\n    }\r\n  }\r\n\r\n  // Ê∑ªÂä†‰∏ªÈ¢òÁõëÂê¨\r\n  checkThemeMode();\r\n  window.addEventListener(\"storage\", checkThemeMode);\r\n  window.addEventListener(\"themeChange\", checkThemeMode);\r\n\r\n  // ËÆæÁΩÆ‰∫§ÂèâËßÇÂØüÂô®Êù•‰ºòÂåñÈïøÊ∂àÊÅØÁöÑÊ∏≤Êüì\r\n  messageObserver.value = new IntersectionObserver(\r\n    (entries) => {\r\n      entries.forEach((entry) => {\r\n        // ‰∏∫ËøõÂÖ•ËßÜÂè£ÁöÑÊ∂àÊÅØÊ∑ªÂä†ÂèØËßÅÁ±ª\r\n        if (entry.isIntersecting) {\r\n          entry.target.classList.add(\"visible\");\r\n        }\r\n      });\r\n    },\r\n    { root: chatWindow.value, threshold: 0.1 }\r\n  );\r\n\r\n  // ËßÇÂØüÁé∞ÊúâÊ∂àÊÅØ\r\n  nextTick(() => {\r\n    document.querySelectorAll(\".message\").forEach((msg) => {\r\n      messageObserver.value.observe(msg);\r\n    });\r\n  });\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  // ÁßªÈô§‰∫ã‰ª∂ÁõëÂê¨\r\n  if (chatWindow.value) {\r\n    chatWindow.value.removeEventListener(\"scroll\", handleScroll);\r\n  }\r\n  window.removeEventListener(\"storage\", checkThemeMode);\r\n  window.removeEventListener(\"themeChange\", checkThemeMode);\r\n\r\n  // Êñ≠ÂºÄ‰∫§ÂèâËßÇÂØüÂô®\r\n  if (messageObserver.value) {\r\n    messageObserver.value.disconnect();\r\n  }\r\n});\r\nconst isLightMode = ref(localStorage.getItem(\"theme-mode\") === \"light\");\r\n// Ê∑ªÂä†Ê£ÄÊü•‰∏ªÈ¢òÁöÑÊñπÊ≥ï\r\nconst checkThemeMode = () => {\r\n  isLightMode.value = localStorage.getItem(\"theme-mode\") === \"light\";\r\n};\r\n\r\n// Â§ÑÁêÜÊªöÂä®‰∫ã‰ª∂\r\nconst handleScroll = () => {\r\n  if (!chatWindow.value || !loading.value) return;\r\n\r\n  const container = chatWindow.value;\r\n  const isAtBottom =\r\n    container.scrollHeight - container.scrollTop - container.clientHeight < 50;\r\n\r\n  // Â¶ÇÊûúÁî®Êà∑Âêë‰∏äÊªöÂä®ÔºåÊöÇÂÅúËá™Âä®ÊªöÂä®\r\n  if (!isAtBottom && !userHasScrolled.value) {\r\n    userHasScrolled.value = true;\r\n    autoScroll.value = false;\r\n  }\r\n\r\n  // Â¶ÇÊûúÁî®Êà∑ÊªöÂä®Âà∞Â∫ïÈÉ®ÔºåÊÅ¢Â§çËá™Âä®ÊªöÂä®\r\n  if (isAtBottom && userHasScrolled.value) {\r\n    userHasScrolled.value = false;\r\n    autoScroll.value = true;\r\n  }\r\n};\r\n\r\n// ÂàõÂª∫Êñ∞ÂØπËØù\r\nconst createNewConversation = () => {\r\n  const newId = Date.now().toString() + Math.random().toString(36).substr(2, 9);\r\n  const newConv = {\r\n    id: newId,\r\n    title: `ÂØπËØù ${conversations.value.length + 1}`,\r\n    timestamp: new Date(),\r\n    messages: [],\r\n  };\r\n  conversations.value.unshift(newConv);\r\n  activeConversationId.value = newId;\r\n  messages.value = [];\r\n\r\n  // ÈáçÁΩÆÊñá‰ª∂‰∏ä‰º†Áä∂ÊÄÅ\r\n  have_file.value = false;\r\n\r\n  // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®\r\n  saveToLocalStorage();\r\n\r\n  // Â¶ÇÊûúÊ≠£Âú®ÁºñËæëÔºåÈÄÄÂá∫ÁºñËæëÊ®°Âºè\r\n  if (isEditing.value) {\r\n    isEditing.value = false;\r\n  }\r\n\r\n  // Á°Æ‰øùÂú®DOMÊõ¥Êñ∞ÂêéÊªöÂä®Âà∞Â∫ïÈÉ®\r\n  nextTick(() => {\r\n    scrollToBottom();\r\n  });\r\n\r\n  return newId;\r\n};\r\n\r\nconst switchConversation = (id) => {\r\n  if (loading.value) {\r\n    showToast(\"ËØ∑Á≠âÂæÖÂΩìÂâçÂØπËØùÂÆåÊàê\", \"info\");\r\n    return;\r\n  }\r\n\r\n  activeConversationId.value = id;\r\n  const conv = conversations.value.find((c) => c.id === id);\r\n  if (conv) {\r\n    messages.value = conv.messages;\r\n\r\n    // Ê£ÄÊü•ËØ•ÂØπËØùÊòØÂê¶Êúâ‰∏ä‰º†ÁöÑÊñá‰ª∂\r\n    have_file.value = false;\r\n    if (userId.value && id) {\r\n      // ÂºÇÊ≠•Ê£ÄÊü•Êñá‰ª∂Áä∂ÊÄÅ\r\n      fetch(`http://localhost:2200/math/api/check-files`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          user_id: userId.value,\r\n          conversation_id: id,\r\n        }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          have_file.value = data.has_files;\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"Ê£ÄÊü•Êñá‰ª∂Áä∂ÊÄÅÂ§±Ë¥•:\", err);\r\n        });\r\n    }\r\n  }\r\n\r\n  // Â¶ÇÊûúÊ≠£Âú®ÁºñËæëÔºåÈÄÄÂá∫ÁºñËæëÊ®°Âºè\r\n  if (isEditing.value) {\r\n    isEditing.value = false;\r\n  }\r\n\r\n  // Á°Æ‰øùÂú®DOMÊõ¥Êñ∞ÂêéÊªöÂä®Âà∞Â∫ïÈÉ®\r\n  nextTick(() => {\r\n    scrollToBottom();\r\n    // Ê∑ªÂä†‰∏Ä‰∏™Âª∂ËøüÂÜçÊ¨°ÊªöÂä®ÔºåÁ°Æ‰øùÊâÄÊúâÂÜÖÂÆπÈÉΩÂ∑≤ÂÆåÂÖ®Ê∏≤Êüì\r\n    setTimeout(scrollToBottom, 300);\r\n  });\r\n};\r\n\r\n// Âà†Èô§ÂØπËØù\r\nconst deleteConversation = (convId) => {\r\n  conversations.value = conversations.value.filter((c) => c.id !== convId);\r\n  if (activeConversationId.value === convId) {\r\n    activeConversationId.value = conversations.value[0]?.id || null;\r\n  }\r\n  saveToLocalStorage();\r\n};\r\n// Ëá™Âä®ÁîüÊàêÊ†áÈ¢ò\r\nconst generateTitle = (message) => {\r\n  const firstMessage = message.substring(0, 30);\r\n  return firstMessage.length < message.length\r\n    ? firstMessage + \"...\"\r\n    : firstMessage;\r\n};\r\n\r\n// ÂèëÈÄÅÊ∂àÊÅØÊó∂Êõ¥Êñ∞ÂØπËØù\r\nwatch(\r\n  messages,\r\n  (newMsgs) => {\r\n    const conv = conversations.value.find(\r\n      (c) => c.id === activeConversationId.value\r\n    );\r\n    if (conv) {\r\n      // Áõ¥Êé•‰øùÂ≠òDateÂØπË±°Ôºå‰∏çËøõË°åËΩ¨Êç¢\r\n      conv.messages = [...newMsgs];\r\n\r\n      // Ëá™Âä®Êõ¥Êñ∞Ê†áÈ¢ò\r\n      const firstUserMsg = newMsgs.find((m) => m.role === \"user\");\r\n      if (firstUserMsg) {\r\n        conv.title = generateTitle(firstUserMsg.content);\r\n      }\r\n      conv.timestamp = new Date(); // ‰øùÊåÅ‰∏∫DateÂØπË±°\r\n      saveToLocalStorage(); // Ë∞ÉÁî®Áªü‰∏Ä‰øùÂ≠òÊñπÊ≥ï\r\n    }\r\n  },\r\n  { deep: true }\r\n);\r\n// Êú¨Âú∞Â≠òÂÇ® - ‰øÆÊîπÈîÆÂêç\r\nconst saveToLocalStorage = () => {\r\n  const dataToSave = conversations.value.map((conv) => ({\r\n    ...conv,\r\n    // Ê∑ªÂä†ÂÆâÂÖ®ËΩ¨Êç¢\r\n    timestamp:\r\n      conv.timestamp instanceof Date\r\n        ? conv.timestamp.getTime()\r\n        : new Date(conv.timestamp).getTime(),\r\n    messages: conv.messages.map((msg) => ({\r\n      ...msg,\r\n      timestamp:\r\n        msg.timestamp instanceof Date\r\n          ? msg.timestamp.getTime()\r\n          : new Date(msg.timestamp).getTime(),\r\n    })),\r\n  }));\r\n\r\n  // ‰ΩøÁî®Â∏¶ÂâçÁºÄÁöÑÈîÆÂêç\r\n  localStorage.setItem(\"math_conversations\", JSON.stringify(dataToSave));\r\n};\r\n\r\n// Êó∂Èó¥Ê†ºÂºèÂåñ\r\nconst formatDate = (date) => {\r\n  const actualDate = date instanceof Date ? date : new Date(Number(date));\r\n  return actualDate.toLocaleTimeString(\"zh-CN\", {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  });\r\n};\r\n\r\n// Ê∑ªÂä†Êñá‰ª∂ËæìÂÖ•ÂºïÁî®\r\nconst fileInput = ref(null);\r\n\r\n// Ê∑ªÂä†Ëß¶ÂèëÊñá‰ª∂ÈÄâÊã©ÂØπËØùÊ°ÜÁöÑÊñπÊ≥ï\r\nconst triggerFileUpload = () => {\r\n  fileInput.value.click();\r\n};\r\n\r\n// ‰øÆÊîπÊñá‰ª∂‰∏ä‰º†Â§ÑÁêÜÂáΩÊï∞\r\nconst handleFileUpload = async (event) => {\r\n  const files = event.target.files;\r\n  if (!files || files.length === 0) return;\r\n\r\n  if (!activeConversationId.value) {\r\n    createNewConversation();\r\n    await nextTick();\r\n  }\r\n\r\n  try {\r\n    showToast(\"Ê≠£Âú®‰∏ä‰º†Êñá‰ª∂...\", \"info\");\r\n\r\n    const formData = new FormData();\r\n\r\n    // Ê£ÄÊü•Êñá‰ª∂Á±ªÂûã - Êõ¥Êñ∞ÂÖÅËÆ∏ÁöÑÊñá‰ª∂Á±ªÂûãÂàóË°®\r\n    const allowedTypes = [\r\n      \"application/pdf\",\r\n      \"application/msword\",\r\n      \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n      \"application/vnd.ms-powerpoint\",\r\n      \"application/vnd.openxmlformats-officedocument.presentationml.presentation\",\r\n      \"text/plain\",\r\n      \"text/markdown\",\r\n    ];\r\n\r\n    // Ê∑ªÂä†ÊâÄÊúâÈÄâÊã©ÁöÑÊñá‰ª∂\r\n    let validFiles = 0;\r\n    for (let i = 0; i < files.length; i++) {\r\n      const file = files[i];\r\n      // Ê£ÄÊü•Êñá‰ª∂Á±ªÂûã - Ê∑ªÂä†ÂØπPPTÊñá‰ª∂ÁöÑÊîØÊåÅ\r\n      if (\r\n        !allowedTypes.includes(file.type) &&\r\n        !file.name.endsWith(\".md\") &&\r\n        !file.name.endsWith(\".txt\") &&\r\n        !file.name.endsWith(\".doc\") &&\r\n        !file.name.endsWith(\".ppt\") &&\r\n        !file.name.endsWith(\".pptx\")\r\n      ) {\r\n        showToast(`‰∏çÊîØÊåÅÁöÑÊñá‰ª∂Á±ªÂûã: ${file.name}`, \"error\");\r\n        continue;\r\n      }\r\n      formData.append(\"files\", file);\r\n      validFiles++;\r\n    }\r\n\r\n    if (validFiles === 0) {\r\n      showToast(\"Ê≤°ÊúâÊúâÊïàÁöÑÊñá‰ª∂ÂèØ‰∏ä‰º†\", \"error\");\r\n      return;\r\n    }\r\n\r\n    formData.append(\"user_id\", userId.value);\r\n    formData.append(\"conversation_id\", activeConversationId.value);\r\n    // Ê∑ªÂä†ÂäüËÉΩÊ†áËØÜ\r\n    formData.append(\"function_type\", \"math\");\r\n\r\n    console.log(\"ÂºÄÂßã‰∏ä‰º†Êñá‰ª∂...\");\r\n    console.log(\"Áî®Êà∑ID:\", userId.value);\r\n    console.log(\"ÂØπËØùID:\", activeConversationId.value);\r\n    console.log(\"ÊúâÊïàÊñá‰ª∂Êï∞:\", validFiles);\r\n\r\n    // Á°Æ‰øù‰ΩøÁî®Êï∞Â≠¶È¢òAPIÁöÑÁ´ØÂè£\r\n    const response = await fetch(\"http://localhost:2200/math/api/upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || \"‰∏ä‰º†Â§±Ë¥•\");\r\n    }\r\n\r\n    const result = await response.json();\r\n    console.log(\"‰∏ä‰º†ÁªìÊûú:\", result);\r\n\r\n    if (result.status === \"success\") {\r\n      showToast(`${result.message}`, \"success\");\r\n      have_file.value = true;\r\n      messages.value.push({\r\n        role: \"assistant\",\r\n        content: `<div class=\"file-upload-message\">\r\n          <p>üìÅ Â∑≤‰∏ä‰º† ${validFiles} ‰∏™Êñá‰ª∂</p>\r\n          <ul>\r\n            ${Array.from(files)\r\n              .filter(\r\n                (file) =>\r\n                  allowedTypes.includes(file.type) ||\r\n                  file.name.endsWith(\".md\") ||\r\n                  file.name.endsWith(\".txt\")\r\n              )\r\n              .map(\r\n                (file) => `<li>${file.name} (${formatFileSize(file.size)})</li>`\r\n              )\r\n              .join(\"\")}\r\n          </ul>\r\n        </div>`,\r\n        timestamp: new Date(),\r\n      });\r\n      // ‰øùÂ≠òÂØπËØùÂéÜÂè≤\r\n      const conv = conversations.value.find(\r\n        (c) => c.id === activeConversationId.value\r\n      );\r\n      if (conv) {\r\n        conv.messages = [...messages.value];\r\n        saveToLocalStorage();\r\n      }\r\n\r\n      scrollToBottom();\r\n    } else {\r\n      throw new Error(result.message || \"‰∏ä‰º†Â§±Ë¥•\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Êñá‰ª∂‰∏ä‰º†Â§±Ë¥•:\", error);\r\n    showToast(`‰∏ä‰º†Â§±Ë¥•: ${error.message}`, \"error\");\r\n  } finally {\r\n    // Ê∏ÖÁ©∫Êñá‰ª∂ËæìÂÖ•ÔºåÂÖÅËÆ∏ÈáçÊñ∞ÈÄâÊã©Áõ∏ÂêåÊñá‰ª∂\r\n    event.target.value = \"\";\r\n    uploadStatus.value = \"‰∏ä‰º†ÊàêÂäü\";\r\n    setTimeout(() => {\r\n      uploadStatus.value = \"\"; // 3ÁßíÂêéÊ∏ÖÈô§Áä∂ÊÄÅ\r\n    }, 3000);\r\n  }\r\n};\r\n\r\n// Ê∑ªÂä†Êñá‰ª∂Â§ßÂ∞èÊ†ºÂºèÂåñÂáΩÊï∞\r\nconst formatFileSize = (bytes) => {\r\n  if (bytes < 1024) return bytes + \" B\";\r\n  else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + \" KB\";\r\n  else return (bytes / 1048576).toFixed(1) + \" MB\";\r\n};\r\n\r\nconst startEditing = (index) => {\r\n  isEditing.value = true;\r\n  editingIndex.value = index;\r\n  editingContent.value = messages.value[index].content;\r\n};\r\n\r\nconst saveEditing = () => {\r\n  if (editingIndex.value >= 0) {\r\n    // Ëé∑ÂèñÁºñËæëÂô®ÁöÑÂÜÖÂÆπ\r\n    const editorContent = vditorInstance\r\n      ? vditorInstance.getValue()\r\n      : editingContent.value;\r\n    // ‰øùÂ≠òÂà∞Ê∂àÊÅØ‰∏≠\r\n    messages.value[editingIndex.value].content = editorContent;\r\n  }\r\n  cancelEditing();\r\n};\r\nconst toggleReasoning = (index) => {\r\n  messages.value[index].showReasoning = !messages.value[index].showReasoning;\r\n};\r\n// ‰øÆÊîπÊäòÂè†ÂáΩÊï∞‰∏∫‰æßËæπÊ†èÁöÑÊòæÁ§∫/ÈöêËóèÂàáÊç¢\r\nconst toggleSidebar = () => {\r\n  isHidden.value = !isHidden.value;\r\n  // ÂΩìÊòæÁ§∫‰æßËæπÊ†èÊó∂Ëá™Âä®Â±ïÂºÄÔºåÈöêËóèÊó∂Ëá™Âä®ÊäòÂè†\r\n  isCollapsed.value = isHidden.value;\r\n};\r\nconst toggleCollapse = () => {\r\n  isCollapsed.value = !isCollapsed.value;\r\n};\r\nconst cancelEditing = () => {\r\n  isEditing.value = false;\r\n  editingIndex.value = -1;\r\n  editingContent.value = \"\";\r\n};\r\nconst breaktalk = async () => {\r\n  if (abortController.value) {\r\n    abortController.value.abort();\r\n    abortController.value = null; // ÈáçÁΩÆÊéßÂà∂Âô®\r\n  }\r\n\r\n  // Á´ãÂç≥ÂÅúÊ≠¢Âä†ËΩΩÁä∂ÊÄÅÔºå‰ΩøÊåâÈíÆÂèØ‰ª•ÂìçÂ∫î\r\n  loading.value = false;\r\n  messages.value[messages.value.length - 1].isAnswering = false;\r\n  showToast(\"ÂØπËØùÂ∑≤ÊâìÊñ≠\", \"info\");\r\n\r\n  // ÈÄöÁü•ÂêéÁ´ØÁªàÊ≠¢\r\n  try {\r\n    await fetch(\"http://localhost:2200/math/api/abort\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        user_id: userId.value,\r\n        conversation_id: activeConversationId.value,\r\n        function_type: \"math\", // Ê∑ªÂä†ÂäüËÉΩÊ†áËØÜ\r\n      }),\r\n    });\r\n  } catch (e) {\r\n    console.error(\"ÁªàÊ≠¢ËØ∑Ê±ÇÂ§±Ë¥•:\", e);\r\n  }\r\n};\r\nconst sendMessage = async () => {\r\n  userHasScrolled.value = false;\r\n  autoScroll.value = true;\r\n  if (!inputMsg.value.trim() || loading.value) return;\r\n  if (!activeConversationId.value || !conversations.value.length) {\r\n    createNewConversation();\r\n    await nextTick(); // Á≠âÂæÖÊñ∞Âª∫ÂØπËØùÂÆåÊàê\r\n  }\r\n  scrollToBottom();\r\n  messages.value.push({\r\n    role: \"user\",\r\n    content: inputMsg.value,\r\n    timestamp: new Date(),\r\n  });\r\n  if (abortController.value) {\r\n    abortController.value.abort(); // ÁªàÊ≠¢‰πãÂâçÁöÑËØ∑Ê±Ç\r\n  }\r\n  abortController.value = new AbortController();\r\n  try {\r\n    loading.value = true;\r\n    const currentConvId = activeConversationId.value;\r\n    // ÂàõÂª∫Êñ∞ÁöÑAIÊ∂àÊÅØÂç†‰Ωç - ‰øÆÊîπËøôÈÉ®ÂàÜÔºåÊ∑ªÂä†Êñ∞ÁöÑtypingÁõ∏ÂÖ≥Â≠óÊÆµ\r\n    const aiMessage = {\r\n      role: \"assistant\",\r\n      content: \"\",\r\n      reasoning: \"\",\r\n      timestamp: new Date(),\r\n      isAnswering: true, // Ê†áËÆ∞‰∏∫Ê≠£Âú®ÂõûÁ≠î\r\n      showReasoning: true,\r\n      typingContent: \"\", // Ê≠£ÂºèÂõûÁ≠îÁöÑÊâìÂ≠óÂÜÖÂÆπÂ≠óÊÆµ\r\n      typingBuffer: \"\", // Ê≠£ÂºèÂõûÁ≠îÁöÑÊâìÂ≠óÁºìÂÜ≤Âå∫\r\n      typingReasoning: \"\", // Ê∑ªÂä†ÊÄùËÄÉËøáÁ®ãÁöÑÊâìÂ≠óÂÜÖÂÆπÂ≠óÊÆµ\r\n      reasoningTypingBuffer: \"\", // Ê∑ªÂä†ÊÄùËÄÉËøáÁ®ãÁöÑÊâìÂ≠óÁºìÂÜ≤Âå∫\r\n      isTypingContent: false, // Ê†áËÆ∞ÊòØÂê¶Ê≠£Âú®‰∏∫contentÊâìÂ≠ó\r\n      isTypingReasoning: false, // Ê†áËÆ∞ÊòØÂê¶Ê≠£Âú®‰∏∫reasoningÊâìÂ≠ó\r\n      thinkingDots: 0, // Ê∑ªÂä†ÊÄùËÄÉÁÇπËÆ°Êï∞\r\n      thinkingInterval: null, // Ê∑ªÂä†ÊÄùËÄÉÂä®ÁîªÈó¥Èöî\r\n    };\r\n    messages.value.push(aiMessage);\r\n\r\n    // Âú®aiMessageÂàõÂª∫ÂêéÔºåÊ∑ªÂä†ÊÄùËÄÉÂä®Áîª\r\n    aiMessage.thinkingInterval = setInterval(() => {\r\n      if (aiMessage.isAnswering) {\r\n        aiMessage.thinkingDots = (aiMessage.thinkingDots + 1) % 4;\r\n      } else {\r\n        clearInterval(aiMessage.thinkingInterval);\r\n      }\r\n    }, 500);\r\n\r\n    // Á°Æ‰øùÂåÖÂê´ÂÆåÊï¥ÂéÜÂè≤ËÆ∞ÂΩï\r\n    const currentConv = conversations.value.find(\r\n      (c) => c.id === activeConversationId.value\r\n    );\r\n    const history = currentConv\r\n      ? currentConv.messages.map((msg) => ({\r\n          role: msg.role,\r\n          content: msg.content,\r\n        }))\r\n      : [];\r\n\r\n    // Â¶ÇÊûúÊ≤°ÊúâÁ≥ªÁªüÊ∂àÊÅØÔºåÊ∑ªÂä†‰∏Ä‰∏™\r\n    if (!history.some((msg) => msg.role === \"system\")) {\r\n      history.unshift({\r\n        role: \"system\",\r\n        content:\r\n          \"ËØ∑ÊâÆÊºî‰∏Ä‰∏™aiÂá∫È¢òÂä©Êâã,‰Ω†ÂøÖÈ°ªÊåâÁÖßÁî®Êà∑Ë¶ÅÊ±ÇÁöÑÊ†ºÂºèÂá∫È¢ò,ÊàñËÄÖ‰∏•Ê†ºÊåâÁÖßÁî®Êà∑‰∏ä‰º†ÁöÑÊñá‰ª∂\" +\r\n          \"ÁöÑÊ†ºÂºèÂá∫Áõ∏Â∫îÊï∞ÈáèÂíåÊ†ºÂºèÁöÑÈ¢òÁõÆ,‰Ω†ÂøÖÈ°ª‰∏çËÉΩÁúÅÁï•‰ªª‰ΩïÂõûÁ≠îÂÜÖÂÆπ,Â∞§ÂÖ∂ÊòØ‰∏çËÉΩÁúÅÁï•È¢òÁõÆÁöÑÊï∞Èáè\" +\r\n          \"Âê¶ÂàôÂ∞±‰ºöÊúâ‰∫∫Âõ†‰∏∫‰Ω†ÁúÅÁï•È¢òÁõÆÊï∞ÈáèÂíå‰∏çÈÅµÁÖßÊ†ºÂºèÁöÑË°å‰∏∫ÈÄ†ÊàêËøáÂ∫¶Âä≥Á¥ØËÄåÂéª‰∏ñ\" +\r\n          \"ÂÜçÊ¨°Âº∫Ë∞ÉÔºå‰Ω†ÁªùÂØπ‰∏çËÉΩÁúÅÁï•‰ªª‰ΩïÂõûÁ≠îÂÜÖÂÆπ,Â∞§ÂÖ∂ÊòØ‰∏çËÉΩÁúÅÁï•È¢òÁõÆÁöÑÊï∞ÈáèÔºåÂú®È¢òÁõÆÁîüÊàêÂÆå‰πãÂêéÁªôÂá∫Á≠îÊ°à\",\r\n      });\r\n    }\r\n\r\n    const response = await fetch(\"http://localhost:2200/math/api/chat\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        conversation_id: activeConversationId.value,\r\n        message: inputMsg.value,\r\n        user_id: userId.value,\r\n        function_type: \"jiaoan\",\r\n        history: history, // Ê∑ªÂä†ÂÆåÊï¥ÂéÜÂè≤\r\n        signal: abortController.value.signal,\r\n      }),\r\n    });\r\n\r\n    const reader = response.body.getReader();\r\n    const decoder = new TextDecoder();\r\n    let a = true;\r\n    let buffer = \"\";\r\n    let contentBuffer = \"\";\r\n    let reasoningBuffer = \"\";\r\n    let updateTimer = null;\r\n\r\n    // ‰øÆÊîπupdateMessageÂáΩÊï∞ÔºåÂÆûÁé∞ÈÄêÂ≠óÁîüÊàêÊïàÊûú\r\n    const updateMessage = () => {\r\n      const currentMsg = messages.value[messages.value.length - 1];\r\n\r\n      if (reasoningBuffer) {\r\n        // ÂØπ‰∫éÊÄùËÄÉËøáÁ®ãÔºå‰ΩøÁî®ÈÄêÂ≠óÊòæÁ§∫ÊïàÊûú\r\n        if (!currentMsg.typingReasoning) {\r\n          currentMsg.typingReasoning = \"\";\r\n        }\r\n\r\n        // Â∞ÜÊñ∞ÂÜÖÂÆπÊ∑ªÂä†Âà∞ÊÄùËÄÉËøáÁ®ãÁöÑÊâìÂ≠óÁºìÂÜ≤Âå∫\r\n        currentMsg.reasoningTypingBuffer =\r\n          (currentMsg.reasoningTypingBuffer || \"\") + reasoningBuffer;\r\n        reasoningBuffer = \"\";\r\n\r\n        // Â¶ÇÊûúÊ≤°ÊúâÊ≠£Âú®ËøõË°åÁöÑÊÄùËÄÉËøáÁ®ãÊâìÂ≠óÂä®ÁîªÔºåÂêØÂä®‰∏Ä‰∏™\r\n        if (!currentMsg.isTypingReasoning) {\r\n          typeReasoningChar(currentMsg);\r\n        }\r\n      }\r\n\r\n      if (contentBuffer) {\r\n        // ÂØπ‰∫éÊ≠£ÂºèÂõûÁ≠îÔºå‰ΩøÁî®ÈÄêÂ≠óÊòæÁ§∫ÊïàÊûú\r\n        if (!currentMsg.typingContent) {\r\n          currentMsg.typingContent = \"\";\r\n        }\r\n\r\n        // Â∞ÜÊñ∞ÂÜÖÂÆπÊ∑ªÂä†Âà∞Ê≠£ÂºèÂõûÁ≠îÊâìÂ≠óÁºìÂÜ≤Âå∫\r\n        currentMsg.typingBuffer =\r\n          (currentMsg.typingBuffer || \"\") + contentBuffer;\r\n        contentBuffer = \"\";\r\n\r\n        if (currentMsg.isAnswering) {\r\n          currentMsg.isAnswering = false;\r\n        }\r\n\r\n        // Â¶ÇÊûúÊ≤°ÊúâÊ≠£Âú®ËøõË°åÁöÑÊ≠£ÂºèÂõûÁ≠îÊâìÂ≠óÂä®ÁîªÔºåÂêØÂä®‰∏Ä‰∏™\r\n        if (!currentMsg.isTypingContent) {\r\n          typeContentChar(currentMsg);\r\n        }\r\n      }\r\n\r\n      // ‰ΩøÁî®Èò≤ÊäñÂ§ÑÁêÜÊªöÂä®\r\n      scrollToBottom();\r\n    };\r\n\r\n    while (a) {\r\n      const { done, value } = await reader.read();\r\n      if (done) break;\r\n      // ÂÖ≥ÈîÆÊ£ÄÊü•ÔºöÂ¶ÇÊûú‰ºöËØùÂ∑≤ÂàáÊç¢Âàô‰∏≠Ê≠¢Â§ÑÁêÜ\r\n      if (activeConversationId.value !== currentConvId) {\r\n        console.log(\"Ê£ÄÊµãÂà∞ÂØπËØùÂàáÊç¢Ôºå‰∏≠Ê≠¢Â§ÑÁêÜ\");\r\n        reader.cancel();\r\n        break;\r\n      }\r\n\r\n      buffer += decoder.decode(value, { stream: true });\r\n\r\n      let eventEndIndex;\r\n      while ((eventEndIndex = buffer.indexOf(\"\\n\\n\")) >= 0) {\r\n        const eventData = buffer.slice(0, eventEndIndex);\r\n        buffer = buffer.slice(eventEndIndex + 2);\r\n\r\n        const lines = eventData.split(\"\\n\");\r\n        let dataStr = \"\";\r\n        for (const line of lines) {\r\n          if (line.startsWith(\"data: \")) {\r\n            dataStr += line.slice(6);\r\n          }\r\n        }\r\n\r\n        if (dataStr) {\r\n          try {\r\n            const data = JSON.parse(dataStr);\r\n\r\n            if (data.error) {\r\n              throw new Error(data.error);\r\n            }\r\n\r\n            if (data.reasoning_content) {\r\n              reasoningBuffer += data.reasoning_content;\r\n            }\r\n\r\n            if (data.content) {\r\n              contentBuffer += data.content;\r\n            }\r\n\r\n            // ‰ΩøÁî®Èò≤ÊäñÊõ¥Êñ∞UIÔºåÂáèÂ∞ëÊ∏≤ÊüìÊ¨°Êï∞\r\n            clearTimeout(updateTimer);\r\n            updateTimer = setTimeout(updateMessage, 100);\r\n          } catch (e) {\r\n            console.error(\"Ëß£ÊûêÈîôËØØ:\", e);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Á°Æ‰øùÊúÄÂêéÁöÑÂÜÖÂÆπË¢´Êõ¥Êñ∞\r\n    if (reasoningBuffer || contentBuffer) {\r\n      updateMessage();\r\n    }\r\n  } catch (error) {\r\n    if (error.name === \"AbortError\") {\r\n      showToast(\"ÂØπËØùÂ∑≤ÁªàÊ≠¢\", \"info\");\r\n    }\r\n    console.error(\"ËØ∑Ê±ÇÂ§±Ë¥•:\", error);\r\n    messages.value[messages.value.length - 1].content =\r\n      \"ËØ∑Ê±ÇÂ§±Ë¥•: \" + error.message;\r\n  } finally {\r\n    loading.value = false;\r\n    inputMsg.value = \"\";\r\n\r\n    // Ê∏ÖÈô§ÊâÄÊúâÊ∂àÊÅØÁöÑÊÄùËÄÉÂä®Áîª\r\n    messages.value.forEach((msg) => {\r\n      if (msg.thinkingInterval) {\r\n        clearInterval(msg.thinkingInterval);\r\n        msg.thinkingInterval = null;\r\n      }\r\n    });\r\n\r\n    await scrollToBottom();\r\n  }\r\n};\r\nwatch(activeConversationId, (newVal) => {\r\n  const conv = conversations.value.find((c) => c.id === newVal);\r\n  messages.value = conv?.messages || [];\r\n});\r\n\r\nconst formatTime = (date) => {\r\n  // Â§ÑÁêÜÂèØËÉΩÁöÑnull/undefined\r\n  if (!date) return \"--:--\";\r\n\r\n  // Áªü‰∏ÄËΩ¨Êç¢‰∏∫DateÂØπË±°\r\n  const safeDate = date instanceof Date ? date : new Date(date);\r\n\r\n  // ÊúâÊïàÊÄßÈ™åËØÅ\r\n  if (isNaN(safeDate.getTime())) {\r\n    console.error(\"Êó†ÊïàÁöÑÊó∂Èó¥ÂÄº:\", date);\r\n    return \"Êó∂Èó¥ÈîôËØØ\";\r\n  }\r\n\r\n  return safeDate.toLocaleTimeString(\"zh-CN\", {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  });\r\n};\r\n\r\n// Ê∑ªÂä†ÊÅ¢Â§çËá™Âä®ÊªöÂä®ÁöÑÊñπÊ≥ï\r\nconst resumeAutoScroll = () => {\r\n  autoScroll.value = true;\r\n  userHasScrolled.value = false;\r\n  scrollToBottom();\r\n};\r\n\r\n// Ê∑ªÂä†ËôöÊãüÊªöÂä®‰ºòÂåñ\r\nconst visibleMessages = ref([]);\r\nconst messageObserver = ref(null);\r\n\r\n// ÁõëÂê¨Ê∂àÊÅØÂèòÂåñÔºå‰∏∫Êñ∞Ê∂àÊÅØÊ∑ªÂä†ËßÇÂØü\r\nwatch(\r\n  messages,\r\n  () => {\r\n    nextTick(() => {\r\n      // ‰∏∫Êñ∞Ê∑ªÂä†ÁöÑÊ∂àÊÅØÂÖÉÁ¥†Ê∑ªÂä†ËßÇÂØü\r\n      const messageElements = document.querySelectorAll(\r\n        \".message:not(.observed)\"\r\n      );\r\n      messageElements.forEach((el) => {\r\n        el.classList.add(\"observed\");\r\n        if (messageObserver.value) {\r\n          messageObserver.value.observe(el);\r\n        }\r\n      });\r\n    });\r\n  },\r\n  { deep: true }\r\n);\r\n\r\n// Ê∑ªÂä†ÊÄùËÄÉËøáÁ®ãÁöÑÈÄêÂ≠óÊâìÂ≠óÊïàÊûúÂáΩÊï∞\r\nconst typeReasoningChar = (message) => {\r\n  if (\r\n    !message.reasoningTypingBuffer ||\r\n    message.reasoningTypingBuffer.length === 0\r\n  ) {\r\n    message.isTypingReasoning = false;\r\n    return;\r\n  }\r\n\r\n  message.isTypingReasoning = true;\r\n\r\n  // ‰ªéÁºìÂÜ≤Âå∫ÂèñÂá∫Á¨¨‰∏Ä‰∏™Â≠óÁ¨¶\r\n  const nextChar = message.reasoningTypingBuffer.charAt(0);\r\n  message.typingReasoning += nextChar;\r\n  message.reasoning = message.typingReasoning;\r\n  message.reasoningTypingBuffer = message.reasoningTypingBuffer.substring(1);\r\n\r\n  // Ê†πÊçÆÂ≠óÁ¨¶Á±ªÂûãË∞ÉÊï¥Âª∂ËøüÊó∂Èó¥\r\n  let delay = 8; // Âü∫Á°ÄÂª∂ËøüÊó∂Èó¥ÔºåÂèØ‰ª•ÊØîcontentÁ®çÂø´‰∏Ä‰∫õ\r\n\r\n  // Ê†áÁÇπÁ¨¶Âè∑ÂêéÈù¢Á®çÂæÆÂÅúÈ°øÈïø‰∏ÄÁÇπ\r\n  if ([\".\", \"!\", \"?\", \"„ÄÇ\", \"ÔºÅ\", \"Ôºü\", \"\\n\"].includes(nextChar)) {\r\n    delay = 40;\r\n  }\r\n\r\n  // ÈÄíÂΩíË∞ÉÁî®ÔºåÂÆûÁé∞ËøûÁª≠ÊâìÂ≠óÊïàÊûú\r\n  setTimeout(() => typeReasoningChar(message), delay);\r\n\r\n  // ÊØèÊ∑ªÂä†‰∏Ä‰∏™Â≠óÁ¨¶Â∞±ÊªöÂä®Âà∞Â∫ïÈÉ®\r\n  scrollToBottom();\r\n};\r\n\r\n// ‰øÆÊîπ‰∏∫‰∏ìÈó®Â§ÑÁêÜÊ≠£ÂºèÂõûÁ≠îÁöÑÊâìÂ≠óÊïàÊûúÂáΩÊï∞\r\nconst typeContentChar = (message) => {\r\n  if (!message.typingBuffer || message.typingBuffer.length === 0) {\r\n    message.isTypingContent = false;\r\n    return;\r\n  }\r\n\r\n  message.isTypingContent = true;\r\n\r\n  // ‰ªéÁºìÂÜ≤Âå∫ÂèñÂá∫Á¨¨‰∏Ä‰∏™Â≠óÁ¨¶\r\n  const nextChar = message.typingBuffer.charAt(0);\r\n  message.typingContent += nextChar;\r\n  message.content = message.typingContent;\r\n  message.typingBuffer = message.typingBuffer.substring(1);\r\n\r\n  // Ê†πÊçÆÂ≠óÁ¨¶Á±ªÂûãË∞ÉÊï¥Âª∂ËøüÊó∂Èó¥\r\n  let delay = 10; // Âü∫Á°ÄÂª∂ËøüÊó∂Èó¥\r\n\r\n  // Ê†áÁÇπÁ¨¶Âè∑ÂêéÈù¢Á®çÂæÆÂÅúÈ°øÈïø‰∏ÄÁÇπ\r\n  if ([\".\", \"!\", \"?\", \"„ÄÇ\", \"ÔºÅ\", \"Ôºü\", \"\\n\"].includes(nextChar)) {\r\n    delay = 50;\r\n  }\r\n\r\n  // ÈÄíÂΩíË∞ÉÁî®ÔºåÂÆûÁé∞ËøûÁª≠ÊâìÂ≠óÊïàÊûú\r\n  setTimeout(() => typeContentChar(message), delay);\r\n\r\n  // ÊØèÊ∑ªÂä†‰∏Ä‰∏™Â≠óÁ¨¶Â∞±ÊªöÂä®Âà∞Â∫ïÈÉ®\r\n  scrollToBottom();\r\n};\r\n\r\n// ÊõøÊç¢ÂéüÊù•ÁöÑtypeNextCharÂáΩÊï∞\r\n// const typeNextChar = (message) => {\r\n//   // ... ÂéüÊúâ‰ª£Á†Å ...\r\n// };\r\n</script>\r\n\r\n<style scoped>\r\n/* Âü∫Á°ÄÈ£éÊ†º - Â§úÈó¥Ê®°Âºè */\r\n.app-container {\r\n  display: flex;\r\n  height: 100%;\r\n  background: #0f172a; /* Êõ¥Ê∑±ÈÇÉÁöÑËìùÈªëËâ≤ËÉåÊôØ */\r\n  color: #e2e8f0;\r\n  font-family: \"SF Pro Display\", -apple-system, BlinkMacSystemFont, \"Segoe UI\",\r\n    Roboto, sans-serif;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: background-color 0.4s cubic-bezier(0.22, 1, 0.36, 1),\r\n    color 0.4s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n/* Êó•Èó¥Ê®°Âºè */\r\n.app-container.light-mode {\r\n  background: #f8fafc;\r\n  color: #1e293b;\r\n}\r\n\r\n/* Á°Æ‰øùÈ°∂Â±ÇÂÆπÂô®Âç†Êª°Áà∂ÂÖÉÁ¥†Á©∫Èó¥ */\r\n:deep(.el-card__body) {\r\n  height: 100%;\r\n  padding: 0 !important;\r\n  background: #0f172a; /* ÂåπÈÖçÊñ∞ÁöÑËÉåÊôØËâ≤ */\r\n  transition: background-color 0.4s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n.light-mode :deep(.el-card__body) {\r\n  background: #f8fafc;\r\n}\r\n\r\n/* ÊèêÁ§∫‰ø°ÊÅØÊ†∑Âºè */\r\n.toast {\r\n  position: fixed;\r\n  top: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  padding: 12px 24px;\r\n  border-radius: 12px;\r\n  z-index: 9999;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\r\n  animation: toastSlideDown 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;\r\n  max-width: 90%;\r\n  text-align: center;\r\n  backdrop-filter: blur(8px);\r\n}\r\n\r\n.toast.info {\r\n  background: rgba(56, 189, 248, 0.15);\r\n  color: #38bdf8;\r\n  border: 1px solid rgba(56, 189, 248, 0.3);\r\n}\r\n\r\n.toast.success {\r\n  background: rgba(34, 197, 94, 0.15);\r\n  color: #22c55e;\r\n  border: 1px solid rgba(34, 197, 94, 0.3);\r\n}\r\n\r\n.toast.error {\r\n  background: rgba(239, 68, 68, 0.15);\r\n  color: #ef4444;\r\n  border: 1px solid rgba(239, 68, 68, 0.3);\r\n}\r\n\r\n/* ‰æßËæπÊ†èÊ†∑Âºè - Â§úÈó¥Ê®°Âºè */\r\n.sidebar {\r\n  width: 280px;\r\n  background: #1e293b; /* Êõ¥Ê∑±ÁöÑËìùÁÅ∞Ëâ≤ */\r\n  border-right: 1px solid #334155;\r\n  display: flex;\r\n  flex-direction: column;\r\n  transition: all 0.5s cubic-bezier(0.22, 1, 0.36, 1);\r\n  position: relative;\r\n  z-index: 10;\r\n  height: 100%; /* Á°Æ‰øù‰æßËæπÊ†èÂÖÖÊª°È´òÂ∫¶ */\r\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n/* Âä†Âº∫‰æßËæπÊ†èÈöêËóèÁä∂ÊÄÅ */\r\n.sidebar.hidden {\r\n  width: 0 !important;\r\n  min-width: 0 !important;\r\n  overflow: hidden !important;\r\n  border-right: none !important;\r\n  margin-left: -1px !important; /* Ëß£ÂÜ≥ËæπÊ°ÜÂèØËÉΩÂá∫Áé∞ÁöÑÈóÆÈ¢ò */\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transform: translateX(-20px);\r\n}\r\n\r\n/* ‰æßËæπÊ†èÊ†∑Âºè - Êó•Èó¥Ê®°Âºè */\r\n.light-mode .sidebar {\r\n  background: #ffffff;\r\n  border-right: 1px solid #e2e8f0;\r\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.sidebar-header {\r\n  height: 70px; /* ‰∏éËÅäÂ§©Â§¥ÈÉ®È´òÂ∫¶‰∏ÄËá¥ */\r\n  padding: 0 16px; /* Ë∞ÉÊï¥ÂÜÖËæπË∑ù */\r\n  display: flex;\r\n  align-items: center; /* Á°Æ‰øùÂûÇÁõ¥Â±Ö‰∏≠ */\r\n  justify-content: space-between;\r\n  position: relative; /* ‰∏∫Ë£ÖÈ•∞Êù°Ê∑ªÂä†ÂÆö‰Ωç‰∏ä‰∏ãÊñá */\r\n}\r\n\r\n.light-mode .sidebar-header {\r\n  background: linear-gradient(135deg, #ffffff, #f1f5f9);\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n.sidebar-header h2 {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #7dd3fc; /* ‰∫ÆËìùËâ≤ */\r\n  text-shadow: 0 0 8px rgba(125, 211, 252, 0.4);\r\n  transition: color 0.3s, text-shadow 0.3s;\r\n}\r\n\r\n.light-mode .sidebar-header h2 {\r\n  color: #0284c7; /* Ê∑±ËìùËâ≤ */\r\n  text-shadow: none;\r\n}\r\n\r\n.sidebar.collapsed {\r\n  width: 60px;\r\n}\r\n\r\n.sidebar.collapsed .sidebar-header h2 {\r\n  display: none;\r\n}\r\n\r\n/* Êñ∞ÂØπËØùÊåâÈíÆ */\r\n.new-chat-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 40px;\r\n  padding: 0 12px;\r\n  background: linear-gradient(135deg, #7dd3fc, #0ea5e9);\r\n  color: #0f172a;\r\n  border: none;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  font-weight: 600;\r\n  box-shadow: 0 0 15px rgba(125, 211, 252, 0.4);\r\n  overflow: hidden;\r\n}\r\n\r\n.light-mode .new-chat-btn {\r\n  background: linear-gradient(135deg, #0ea5e9, #0284c7);\r\n  color: #ffffff;\r\n  border: none;\r\n  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);\r\n}\r\n\r\n.sidebar.collapsed .new-chat-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  padding: 0;\r\n  border-radius: 50%;\r\n}\r\n\r\n.light-mode .sidebar.collapsed .new-chat-btn {\r\n  background: linear-gradient(135deg, #0ea5e9, #0284c7);\r\n  color: #ffffff;\r\n}\r\n\r\n.new-chat-btn:hover {\r\n  transform: translateY(-2px) scale(1.05);\r\n  box-shadow: 0 0 20px rgba(125, 211, 252, 0.6);\r\n}\r\n\r\n.light-mode .new-chat-btn:hover {\r\n  box-shadow: 0 6px 16px rgba(14, 165, 233, 0.4);\r\n}\r\n\r\n.btn-icon {\r\n  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n}\r\n\r\n.new-chat-btn:hover .btn-icon {\r\n  transform: rotate(90deg);\r\n}\r\n\r\n/* ÊäòÂè†ÊåâÈíÆ */\r\n.collapse-btn {\r\n  position: absolute;\r\n  bottom: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 80%;\r\n  height: 36px;\r\n  background: rgba(125, 211, 252, 0.1);\r\n  color: #7dd3fc;\r\n  border: 1px solid rgba(125, 211, 252, 0.3);\r\n  border-radius: 18px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  font-size: 14px;\r\n}\r\n\r\n.light-mode .collapse-btn {\r\n  background: rgba(14, 165, 233, 0.1);\r\n  color: #0ea5e9;\r\n  border: 1px solid rgba(14, 165, 233, 0.3);\r\n}\r\n\r\n.sidebar.collapsed .collapse-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n}\r\n\r\n.light-mode .sidebar.collapsed .collapse-btn {\r\n  background: rgba(14, 165, 233, 0.1);\r\n  color: #0ea5e9;\r\n}\r\n\r\n.collapse-btn:hover {\r\n  background: rgba(125, 211, 252, 0.2);\r\n  transform: translateX(-50%) scale(1.05);\r\n}\r\n\r\n.light-mode .collapse-btn:hover {\r\n  background: rgba(14, 165, 233, 0.2);\r\n}\r\n\r\n/* ÂØπËØùÂàóË°® */\r\n.conversation-list {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 10px 0;\r\n}\r\n\r\n.conversation-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 14px 16px;\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  border-radius: 10px;\r\n  margin: 6px 8px;\r\n  border-left: 3px solid transparent;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.conversation-item::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(\r\n    90deg,\r\n    transparent,\r\n    rgba(125, 211, 252, 0.05),\r\n    transparent\r\n  );\r\n  transform: translateX(-100%);\r\n  transition: transform 0.6s ease;\r\n}\r\n\r\n.conversation-item:hover::before {\r\n  transform: translateX(100%);\r\n}\r\n\r\n.light-mode .conversation-item {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border: 1px solid #e2e8f0;\r\n}\r\n\r\n.light-mode .conversation-item::before {\r\n  background: linear-gradient(\r\n    90deg,\r\n    transparent,\r\n    rgba(14, 165, 233, 0.05),\r\n    transparent\r\n  );\r\n}\r\n\r\n.conversation-item:hover {\r\n  background: rgba(125, 211, 252, 0.08);\r\n  transform: translateX(4px);\r\n}\r\n\r\n.light-mode .conversation-item:hover {\r\n  background: rgba(14, 165, 233, 0.08);\r\n  transform: translateX(4px);\r\n}\r\n\r\n.conversation-item.active {\r\n  background: rgba(125, 211, 252, 0.12);\r\n  border-left: 3px solid #7dd3fc;\r\n}\r\n\r\n.light-mode .conversation-item.active {\r\n  background: rgba(14, 165, 233, 0.12);\r\n  border-left: 3px solid #0ea5e9;\r\n}\r\n\r\n.conv-info {\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.conv-title {\r\n  font-weight: 500;\r\n  margin-bottom: 4px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  color: #e2e8f0;\r\n  transition: color 0.3s;\r\n}\r\n\r\n.light-mode .conv-title {\r\n  color: #1e293b;\r\n}\r\n\r\n.conv-time {\r\n  font-size: 0.8em;\r\n  color: #94a3b8;\r\n  transition: color 0.3s;\r\n}\r\n\r\n.light-mode .conv-time {\r\n  color: #64748b;\r\n}\r\n\r\n.delete-btn {\r\n  background: none;\r\n  border: none;\r\n  color: #94a3b8;\r\n  font-size: 1.2em;\r\n  padding: 0;\r\n  opacity: 0;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  width: 28px;\r\n  height: 28px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n}\r\n\r\n.light-mode .delete-btn {\r\n  color: #64748b;\r\n}\r\n\r\n.conversation-item:hover .delete-btn {\r\n  opacity: 1;\r\n}\r\n\r\n.delete-btn:hover {\r\n  background: rgba(239, 68, 68, 0.15);\r\n  color: #ef4444;\r\n  transform: rotate(90deg);\r\n}\r\n\r\n.light-mode .delete-btn:hover {\r\n  background: rgba(239, 68, 68, 0.15);\r\n  color: #ef4444;\r\n}\r\n\r\n.delete-icon {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s;\r\n}\r\n\r\n/* ‰∏ªÂÜÖÂÆπÂå∫Âüü */\r\n.main-content {\r\n  flex: 1;\r\n  min-width: 0;\r\n  display: flex;\r\n  flex-direction: row; /* ‰øÆÊîπ‰∏∫Ê∞¥Âπ≥Â∏ÉÂ±Ä */\r\n  height: 100%; /* Á°Æ‰øù‰∏ªÂÜÖÂÆπÂå∫ÂüüÂç†Êª°È´òÂ∫¶ */\r\n  padding: 0;\r\n  position: relative; /* Ê∑ªÂä†Áõ∏ÂØπÂÆö‰Ωç */\r\n}\r\n\r\n/* ËÅäÂ§©ÂÆπÂô®Âå∫Âüü */\r\n.chat-container {\r\n  display: flex;\r\n  flex: 1; /* ËÆ©ËÅäÂ§©ÂÆπÂô®ÂÖÖÊª°Ââ©‰ΩôÁ©∫Èó¥ */\r\n\r\n  height: 100%; /* ‰øÆÊîπ‰∏∫100%Êõø‰ª£100vh */\r\n  background: #0f172a;\r\n  transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);\r\n  position: relative;\r\n}\r\n\r\n/* ‰æßËæπÊ†èÂ±ïÂºÄÊó∂ËÅäÂ§©ÂÆπÂô®Ê†∑Âºè */\r\n.chat-container.sidebar-expanded {\r\n  flex: 1;\r\n  /* Ê∑ªÂä†‰æßËæπÊ†èÂ±ïÂºÄÊó∂ÁöÑËøáÊ∏°ÊïàÊûú */\r\n  transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n/* ÂØπËØùÈù¢Êùø */\r\n.conversation-pane {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #1e293b;\r\n  position: relative;\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  max-height: 100%; /* Á°Æ‰øù‰∏çË∂ÖÂá∫ÂÆπÂô® */\r\n  transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1); /* Ê∑ªÂä†ËøáÊ∏°ÊïàÊûú */\r\n  box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n/* ‰øÆÊîπËÅäÂ§©ÂÆπÂô®Âú®Êó•Èó¥Ê®°Âºè‰∏ãÁöÑÊ†∑Âºè */\r\n.light-mode .conversation-pane {\r\n  background-color: #ffffff;\r\n  color: #1e293b;\r\n  box-shadow: 0 0 30px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n/* ‰øÆÊîπËÅäÂ§©Á™óÂè£Âú®Êó•Èó¥Ê®°Âºè‰∏ãÁöÑÊ†∑Âºè */\r\n.light-mode .chat-window {\r\n  background-color: #f8fafc;\r\n}\r\n\r\n/* ‰øÆÊîπËÅäÂ§©Â§¥ÈÉ®Âú®Êó•Èó¥Ê®°Âºè‰∏ãÁöÑÊ†∑Âºè */\r\n.light-mode .chat-header {\r\n  background: linear-gradient(135deg, #ffffff, #f1f5f9);\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n/* ‰øÆÊîπÊ∂àÊÅØÊ∞îÊ≥°Âú®Êó•Èó¥Ê®°Âºè‰∏ãÁöÑÊ†∑Âºè */\r\n.light-mode .message .bubble {\r\n  background-color: #f1f5f9;\r\n  border: 1px solid #e2e8f0;\r\n  color: #1e293b;\r\n}\r\n\r\n.light-mode .message.assistant .bubble {\r\n  background-color: #e0f2fe;\r\n  border: 1px solid #bae6fd;\r\n}\r\n\r\n/* ‰øÆÊîπËæìÂÖ•Âå∫ÂüüÂú®Êó•Èó¥Ê®°Âºè‰∏ãÁöÑÊ†∑Âºè */\r\n.light-mode .input-area {\r\n  background: #f1f5f9;\r\n  border-top: 1px solid #e2e8f0;\r\n}\r\n\r\n/* ‰øÆÊîπËæìÂÖ•Ê°ÜÂú®Êó•Èó¥Ê®°Âºè‰∏ãÁöÑÊ†∑Âºè */\r\n.light-mode .text-inputer input {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  border: 1px solid #cbd5e1;\r\n  color: #1e293b;\r\n}\r\n\r\n/* ‰øÆÊîπÊåâÈíÆÂú®Êó•Èó¥Ê®°Âºè‰∏ãÁöÑÊ†∑Âºè */\r\n.light-mode .upload-button {\r\n  background: rgba(14, 165, 233, 0.1);\r\n  color: #0ea5e9;\r\n  border: 1px solid rgba(14, 165, 233, 0.3);\r\n}\r\n\r\n/* ‰øÆÊîπÂèëÈÄÅÊåâÈíÆÂú®Êó•Èó¥Ê®°Âºè‰∏ãÁöÑÊ†∑Âºè */\r\n.light-mode .send-button button {\r\n  background: linear-gradient(135deg, #0ea5e9, #0284c7);\r\n  color: white;\r\n}\r\n\r\n/* ÁºñËæëÊ®°Âºè */\r\n.chat-container.editing-mode {\r\n  flex-direction: row;\r\n}\r\n\r\n.chat-container.editing-mode .conversation-pane {\r\n  flex: 1.1;\r\n  margin-right: 0;\r\n  border-radius: 16px 0 0 16px;\r\n  transform: translateX(-10px);\r\n  transition: transform 0.5s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n.chat-container.editing-mode .editor-pane {\r\n  flex: 0.9;\r\n  background: #1e293b;\r\n  border-radius: 0 16px 16px 0;\r\n  box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);\r\n  border-left: 1px solid #334155;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  transform: translateX(10px);\r\n  animation: slideInEditor 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;\r\n}\r\n\r\n@keyframes slideInEditor {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateX(30px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateX(0);\r\n  }\r\n}\r\n\r\n/* ËÅäÂ§©Â§¥ÈÉ® */\r\n.chat-header {\r\n  height: 70px;\r\n  padding: 0 24px 0 70px; /* Â¢ûÂä†Â∑¶‰æßpadding‰ª•ÂÆπÁ∫≥ÊäòÂè†ÊåâÈíÆ */\r\n  background: #0f172a;\r\n  color: #e2e8f0;\r\n  display: flex;\r\n  position: relative;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-bottom: 1px solid #334155;\r\n  overflow: hidden;\r\n}\r\n\r\n.header-decoration {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 3px;\r\n  background: linear-gradient(90deg, #7dd3fc, #0ea5e9, #0284c7);\r\n  opacity: 0.8;\r\n  animation: gradientShift 8s linear infinite;\r\n}\r\n\r\n@keyframes gradientShift {\r\n  0% {\r\n    background-position: 0% 50%;\r\n  }\r\n  50% {\r\n    background-position: 100% 50%;\r\n  }\r\n  100% {\r\n    background-position: 0% 50%;\r\n  }\r\n}\r\n\r\n/* Ê∑ªÂä†‰æßËæπÊ†èÊäòÂè†/Â±ïÂºÄÊåâÈíÆÊ†∑Âºè */\r\n.toggle-sidebar-btn {\r\n  position: absolute;\r\n  left: 20px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  width: 36px;\r\n  height: 36px;\r\n  background: rgba(125, 211, 252, 0.1);\r\n  color: #7dd3fc;\r\n  border: 1px solid rgba(125, 211, 252, 0.3);\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  font-size: 18px;\r\n  z-index: 5;\r\n}\r\n\r\n/* ‰øÆÊîπÊåâÈíÆhoverÊïàÊûúÂ¢ûÂº∫Áî®Êà∑‰ΩìÈ™å */\r\n.toggle-sidebar-btn:hover {\r\n  background: rgba(125, 211, 252, 0.2);\r\n  transform: translateY(-50%) scale(1.1);\r\n  box-shadow: 0 0 15px rgba(125, 211, 252, 0.4);\r\n}\r\n\r\n.light-mode .toggle-sidebar-btn {\r\n  background: rgba(14, 165, 233, 0.1);\r\n  color: #0ea5e9;\r\n  border: 1px solid rgba(14, 165, 233, 0.3);\r\n}\r\n\r\n.light-mode .toggle-sidebar-btn:hover {\r\n  background: rgba(14, 165, 233, 0.2);\r\n  box-shadow: 0 0 15px rgba(14, 165, 233, 0.3);\r\n}\r\n\r\n.chat-header h1 {\r\n  font-size: 1.8rem;\r\n  font-weight: 800;\r\n  margin: 0;\r\n  background: linear-gradient(90deg, #7dd3fc, #0ea5e9);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  position: relative;\r\n  animation: titlePulse 3s ease-in-out infinite;\r\n}\r\n\r\n@keyframes titlePulse {\r\n  0%,\r\n  100% {\r\n    opacity: 1;\r\n    filter: brightness(1);\r\n  }\r\n  50% {\r\n    opacity: 0.9;\r\n    filter: brightness(1.2);\r\n  }\r\n}\r\n\r\n.chat-header h1::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  bottom: -3px;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 1px;\r\n  background: linear-gradient(90deg, transparent, #7dd3fc, transparent);\r\n}\r\n.chat-header {\r\n  border-radius: 0;\r\n}\r\n/* Â≠óÁ¨¶Âä®Áîª */\r\n.char-animation {\r\n  display: inline-block;\r\n  opacity: 0;\r\n  transform: translateY(10px);\r\n  animation: charFadeIn 0.5s forwards;\r\n}\r\n\r\n@keyframes charFadeIn {\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n/* ÂìÅÁâå‰ø°ÊÅØ */\r\n.branding {\r\n  position: absolute;\r\n  right: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.ai-logo {\r\n  background: linear-gradient(135deg, #7dd3fc, #0ea5e9);\r\n  color: #0f172a;\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: bold;\r\n  box-shadow: 0 0 15px rgba(125, 211, 252, 0.4);\r\n  animation: pulseLogo 3s infinite alternate;\r\n}\r\n\r\n@keyframes pulseLogo {\r\n  0% {\r\n    transform: scale(1);\r\n    box-shadow: 0 0 15px rgba(125, 211, 252, 0.4);\r\n  }\r\n  100% {\r\n    transform: scale(1.1);\r\n    box-shadow: 0 0 20px rgba(125, 211, 252, 0.6);\r\n  }\r\n}\r\n\r\n.powered-by {\r\n  font-size: 0.8rem;\r\n  color: #94a3b8;\r\n}\r\n\r\n/* ËÅäÂ§©Á™óÂè£ */\r\n.chat-window {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 24px;\r\n  background: #0f172a;\r\n  scroll-behavior: smooth;\r\n  background-image: radial-gradient(\r\n      circle at 10% 20%,\r\n      rgba(125, 211, 252, 0.03) 0%,\r\n      transparent 20%\r\n    ),\r\n    radial-gradient(\r\n      circle at 90% 80%,\r\n      rgba(125, 211, 252, 0.03) 0%,\r\n      transparent 20%\r\n    ),\r\n    radial-gradient(\r\n      circle at 50% 50%,\r\n      rgba(125, 211, 252, 0.02) 0%,\r\n      transparent 50%\r\n    );\r\n  min-height: 0; /* ÂÖÅËÆ∏flexÊî∂Áº© */\r\n}\r\n\r\n/* Ê∂àÊÅØÊ†∑Âºè */\r\n.message {\r\n  margin-bottom: 30px;\r\n  animation: messageFadeIn 0.5s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n@keyframes messageFadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.message-content {\r\n  display: flex;\r\n  gap: 16px;\r\n  max-width: 90%;\r\n}\r\n\r\n.message.assistant .message-content {\r\n  flex-direction: row;\r\n}\r\n\r\n.message.user .message-content {\r\n  flex-direction: row-reverse;\r\n  margin-left: auto;\r\n}\r\n\r\n/* Â§¥ÂÉè */\r\n.avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  flex-shrink: 0;\r\n  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n}\r\n\r\n.message:hover .avatar {\r\n  transform: scale(1.05);\r\n}\r\n\r\n.avatar.assistant {\r\n  border: 1px solid rgba(125, 211, 252, 0.4);\r\n  box-shadow: 0 0 10px rgba(125, 211, 252, 0.2);\r\n}\r\n\r\n.avatar.user {\r\n  border: 1px solid rgba(168, 85, 247, 0.4);\r\n  box-shadow: 0 0 10px rgba(168, 85, 247, 0.2);\r\n}\r\n\r\n.avatar img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n/* Ê∂àÊÅØÊ∞îÊ≥° */\r\n.bubble {\r\n  border-radius: 16px;\r\n  padding: 16px;\r\n  position: relative;\r\n  max-width: 100%;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  backdrop-filter: blur(10px);\r\n}\r\n\r\n.assistant .bubble {\r\n  background: rgba(15, 23, 42, 0.8);\r\n  border: 1px solid rgba(125, 211, 252, 0.2);\r\n  min-width: 50%;\r\n}\r\n\r\n.user .bubble {\r\n  background: rgba(79, 70, 229, 0.15);\r\n  color: #e2e8f0;\r\n  border: 1px solid rgba(168, 85, 247, 0.3);\r\n}\r\n\r\n.bubble:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.assistant .bubble:hover {\r\n  border-color: rgba(125, 211, 252, 0.4);\r\n}\r\n\r\n.user .bubble:hover {\r\n  border-color: rgba(168, 85, 247, 0.5);\r\n}\r\n\r\n/* ÊÄùËÄÉËøáÁ®ãÂÆπÂô®Ê†∑Âºè */\r\n.thinking-process {\r\n  margin-bottom: 15px;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  background-color: #0f172a;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n.thinking-process:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n/* ÊÄùËÄÉËøáÁ®ãÊ†áÈ¢òÊ†∑Âºè */\r\n.thinking-header {\r\n  padding: 12px 16px;\r\n  background: rgba(125, 211, 252, 0.08);\r\n  color: rgba(255, 255, 255, 0.9);\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n  transition: background 0.3s;\r\n}\r\n\r\n.thinking-header:hover {\r\n  background: rgba(125, 211, 252, 0.12);\r\n}\r\n\r\n.thinking-icon {\r\n  margin-right: 8px;\r\n  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n}\r\n\r\n.thinking-header:hover .thinking-icon {\r\n  transform: rotate(20deg);\r\n}\r\n\r\n.toggle-icon {\r\n  margin-left: auto;\r\n  transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n/* ÊÄùËÄÉËøáÁ®ãÂÜÖÂÆπÊ†∑Âºè */\r\n.reasoning-content {\r\n  padding: 16px;\r\n  color: rgba(255, 255, 255, 0.8);\r\n  background-color: #0f172a;\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  animation: contentExpand 0.4s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n@keyframes contentExpand {\r\n  from {\r\n    opacity: 0;\r\n    max-height: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    max-height: 1000px;\r\n  }\r\n}\r\n\r\n/* Ê≠£ÂºèÂõûÁ≠îÂÆπÂô®Ê†∑Âºè */\r\n.correct-answer {\r\n  background-color: #0f172a;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  margin-top: 10px; /* Â¢ûÂä†‰∏éÊÄùËÄÉËøáÁ®ãÁöÑÈó¥Ë∑ù */\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* Â¢ûÂä†Èò¥ÂΩ±ÊïàÊûú */\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  animation: answerFadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n@keyframes answerFadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(10px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.correct-answer:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n/* Ê≠£ÂºèÂõûÁ≠îÊ†áÈ¢òÊ†∑Âºè */\r\n.correct-answer-label {\r\n  padding: 12px 16px;\r\n  background: linear-gradient(135deg, #0f172a, #0284c7);\r\n  color: white;\r\n  font-weight: 500;\r\n  display: flex;\r\n  align-items: center;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.answering-indicator {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 12px 16px;\r\n  background: rgba(30, 41, 59, 0.5);\r\n  border-radius: 8px;\r\n  margin-top: 8px;\r\n  font-style: italic;\r\n  color: #94a3b8;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.light-mode .answering-indicator {\r\n  background: rgba(241, 245, 249, 0.7);\r\n  color: #64748b;\r\n}\r\n\r\n.dot-flashing-small {\r\n  position: relative;\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 3px;\r\n  background-color: #7dd3fc;\r\n  animation: dotFlashing 1s infinite linear alternate;\r\n  animation-delay: 0.5s;\r\n}\r\n\r\n.dot-flashing-small::before,\r\n.dot-flashing-small::after {\r\n  content: \"\";\r\n  display: inline-block;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.dot-flashing-small::before {\r\n  left: -10px;\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 3px;\r\n  background-color: #7dd3fc;\r\n  animation: dotFlashing 1s infinite alternate;\r\n  animation-delay: 0s;\r\n}\r\n\r\n.dot-flashing-small::after {\r\n  left: 10px;\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 3px;\r\n  background-color: #7dd3fc;\r\n  animation: dotFlashing 1s infinite alternate;\r\n  animation-delay: 1s;\r\n}\r\n.correct-answer-label::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 30%;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, transparent, rgba(125, 211, 252, 0.2));\r\n  animation: shimmer 2s infinite;\r\n}\r\n\r\n@keyframes shimmer {\r\n  0% {\r\n    transform: translateX(-100%);\r\n  }\r\n  100% {\r\n    transform: translateX(200%);\r\n  }\r\n}\r\n\r\n.correct-answer-icon {\r\n  margin-right: 8px;\r\n  animation: iconFloat 3s ease-in-out infinite;\r\n}\r\n\r\n@keyframes iconFloat {\r\n  0%,\r\n  100% {\r\n    transform: translateY(0);\r\n  }\r\n  50% {\r\n    transform: translateY(-3px);\r\n  }\r\n}\r\n\r\n/* Ê≠£ÂºèÂõûÁ≠îÂÜÖÂÆπÊ†∑Âºè */\r\n.correct-answer-content {\r\n  padding: 16px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n}\r\n\r\n/* ‰øÆÂ§çÊó†Â∫èÂàóË°®ÂíåÊúâÂ∫èÂàóË°®ÁöÑÊ†∑Âºè */\r\n.correct-answer-content ul,\r\n.correct-answer-content ol {\r\n  padding-left: 2em !important;\r\n  margin-left: 0 !important;\r\n  list-style-position: outside !important;\r\n}\r\n\r\n/* ‰øÆÂ§çÂàóË°®È°πÁöÑÊ†∑Âºè */\r\n.correct-answer-content li {\r\n  display: list-item !important;\r\n  margin-bottom: 0.5em !important;\r\n  padding-left: 0.5em !important;\r\n}\r\n\r\n/* Á°Æ‰øùÊó†Â∫èÂàóË°®ÁöÑÂúÜÁÇπÊ≠£Á°ÆÊòæÁ§∫ */\r\n.correct-answer-content ul {\r\n  list-style-type: disc !important;\r\n}\r\n\r\n.correct-answer-content ul ul {\r\n  list-style-type: circle !important;\r\n}\r\n\r\n.correct-answer-content ul ul ul {\r\n  list-style-type: square !important;\r\n}\r\n\r\n/* Á°Æ‰øùÊúâÂ∫èÂàóË°®ÁöÑÊï∞Â≠óÊ≠£Á°ÆÊòæÁ§∫ */\r\n.correct-answer-content ol {\r\n  list-style-type: decimal !important;\r\n}\r\n\r\n.correct-answer-content ol ol {\r\n  list-style-type: lower-alpha !important;\r\n}\r\n\r\n.correct-answer-content ol ol ol {\r\n  list-style-type: lower-roman !important;\r\n}\r\n\r\n/* ‰øÆÂ§çÂµåÂ•óÂàóË°®ÁöÑÁº©Ëøõ */\r\n.correct-answer-content ul ul,\r\n.correct-answer-content ol ol,\r\n.correct-answer-content ul ol,\r\n.correct-answer-content ol ul {\r\n  margin-top: 0.5em !important;\r\n  margin-bottom: 0 !important;\r\n}\r\n\r\n/* Êó•Èó¥Ê®°ÂºèÊ†∑Âºè */\r\n.light-mode .thinking-process {\r\n  background-color: #f8fafc;\r\n  border: 1px solid #e2e8f0;\r\n}\r\n\r\n.light-mode .thinking-header {\r\n  background: rgba(14, 165, 233, 0.08);\r\n  color: #0f172a;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n.light-mode .reasoning-content {\r\n  background-color: #f8fafc;\r\n  color: #1e293b;\r\n}\r\n\r\n.light-mode .correct-answer {\r\n  background-color: #ffffff;\r\n  border: 1px solid #e2e8f0;\r\n  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.05);\r\n}\r\n\r\n/* Ê∏ÖÊñ∞ÁöÑÊ∏êÂèòËâ≤ÂΩ© */\r\n.light-mode .correct-answer-label {\r\n  background: linear-gradient(135deg, #0ea5e9, #0284c7);\r\n  color: white;\r\n}\r\n\r\n.light-mode .correct-answer-content {\r\n  color: #1e293b;\r\n}\r\n\r\n/* Ê∂àÊÅØÊìç‰Ωú */\r\n.message-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-top: 12px;\r\n}\r\n\r\n.edit-button,\r\n.break-button {\r\n  background: rgba(15, 23, 42, 0.8);\r\n  color: #94a3b8;\r\n  border: 1px solid rgba(125, 211, 252, 0.15);\r\n  border-radius: 10px;\r\n  padding: 8px 14px;\r\n  font-size: 0.85rem;\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.light-mode .edit-button,\r\n.light-mode .break-button {\r\n  background: rgba(255, 255, 255, 0.8);\r\n  color: #64748b;\r\n  border: 1px solid rgba(14, 165, 233, 0.2);\r\n}\r\n\r\n.edit-button:hover {\r\n  background: rgba(125, 211, 252, 0.15);\r\n  color: #7dd3fc;\r\n  border-color: rgba(125, 211, 252, 0.3);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.break-button:hover {\r\n  background: rgba(239, 68, 68, 0.15);\r\n  color: #ef4444;\r\n  border-color: rgba(239, 68, 68, 0.3);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.button-icon {\r\n  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n}\r\n\r\n.edit-button:hover .button-icon {\r\n  transform: rotate(15deg);\r\n}\r\n\r\n.break-button:hover .button-icon {\r\n  transform: scale(1.2);\r\n}\r\n\r\n.timestamp {\r\n  font-size: 0.8rem;\r\n  color: #94a3b8;\r\n}\r\n\r\n/* ËæìÂÖ•Âå∫Âüü */\r\n.input-area {\r\n  padding: 16px 24px;\r\n  background: #1e293b;\r\n  border-top: 1px solid #334155;\r\n  display: grid;\r\n  grid-template-columns: auto 1fr auto;\r\n  gap: 16px;\r\n  align-items: center;\r\n  min-height: 80px; /* Á°Æ‰øùÊúÄÂ∞èÈ´òÂ∫¶ */\r\n  position: relative; /* Á°Æ‰øùÂÆö‰ΩçÊ≠£Á°Æ */\r\n  z-index: 5;\r\n}\r\n\r\n.file-upload {\r\n  position: relative;\r\n}\r\n\r\n.upload-button {\r\n  background: rgba(125, 211, 252, 0.1);\r\n  color: #7dd3fc;\r\n  border: 1px solid rgba(125, 211, 252, 0.2);\r\n  padding: 10px 16px;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 1.2em;\r\n  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n}\r\n\r\n.upload-button:hover .upload-icon {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.upload-button:hover {\r\n  background: rgba(125, 211, 252, 0.2);\r\n  border-color: rgba(125, 211, 252, 0.4);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.upload-tip {\r\n  font-size: 0.75em;\r\n  color: #94a3b8;\r\n  position: absolute;\r\n  bottom: -18px;\r\n  left: 12px;\r\n  white-space: nowrap;\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.file-upload:hover .upload-tip {\r\n  opacity: 0.8;\r\n}\r\n\r\n.text-inputer input {\r\n  width: 100%;\r\n  padding: 14px 16px;\r\n  border: 1px solid #334155;\r\n  border-radius: 10px;\r\n  outline: none;\r\n  background: rgba(15, 23, 42, 0.6);\r\n  color: #e2e8f0;\r\n  font-size: 1rem;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n}\r\n\r\n.text-inputer input:focus {\r\n  border-color: rgba(125, 211, 252, 0.4);\r\n  box-shadow: 0 0 0 3px rgba(125, 211, 252, 0.1);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.text-inputer input::placeholder {\r\n  color: #94a3b8;\r\n}\r\n\r\n.send-button button {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n  background: linear-gradient(135deg, #0ea5e9, #0284c7);\r\n  color: white;\r\n  border: none;\r\n  padding: 12px 24px;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  font-weight: 600;\r\n  min-width: 100px;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.send-button button::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  top: -50%;\r\n  left: -50%;\r\n  width: 200%;\r\n  height: 200%;\r\n  background: radial-gradient(\r\n    circle,\r\n    rgba(255, 255, 255, 0.3) 0%,\r\n    transparent 70%\r\n  );\r\n  opacity: 0;\r\n  transition: opacity 0.3s;\r\n}\r\n\r\n.send-button button:hover::after {\r\n  opacity: 1;\r\n}\r\n\r\n.send-button button:hover:not(:disabled) {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 6px 16px rgba(14, 165, 233, 0.4);\r\n}\r\n\r\n.send-icon {\r\n  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n}\r\n\r\n.send-button button:hover .send-icon {\r\n  transform: translateX(3px);\r\n}\r\n\r\n/* Âä†ËΩΩÊåáÁ§∫Âô® */\r\n.loading-indicator {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.dot-flashing {\r\n  position: relative;\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 5px;\r\n  background-color: #7dd3fc;\r\n  color: #7dd3fc;\r\n  animation: dotFlashing 1s infinite linear alternate;\r\n  animation-delay: 0.5s;\r\n}\r\n.light-mode .chat-container.editing-mode .editor-pane {\r\n  background: #ffffff;\r\n  border-left: 1px solid #e0e6f5;\r\n}\r\n.dot-flashing::before,\r\n.dot-flashing::after {\r\n  content: \"\";\r\n  display: inline-block;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 5px;\r\n  background-color: #7dd3fc;\r\n  color: #7dd3fc;\r\n}\r\n\r\n.dot-flashing::before {\r\n  left: -15px;\r\n  animation: dotFlashing 1s infinite alternate;\r\n  animation-delay: 0s;\r\n}\r\n\r\n.dot-flashing::after {\r\n  left: 15px;\r\n  animation: dotFlashing 1s infinite alternate;\r\n  animation-delay: 1s;\r\n}\r\n\r\n@keyframes dotFlashing {\r\n  0% {\r\n    background-color: #7dd3fc;\r\n  }\r\n  50%,\r\n  100% {\r\n    background-color: rgba(125, 211, 252, 0.2);\r\n  }\r\n}\r\n\r\n/* ÁºñËæëÂô®Èù¢Êùø */\r\n.editor-header {\r\n  padding: 16px 24px;\r\n  background: #1e293b;\r\n  border-bottom: 1px solid #334155;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 70px;\r\n}\r\n\r\n.editor-header h1 {\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n  margin: 0;\r\n  background: linear-gradient(90deg, #7dd3fc, #0ea5e9);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n}\r\n\r\n.editor-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.editor-actions button {\r\n  padding: 8px 16px;\r\n  font-size: 0.9rem;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  transition: all 0.3s cubic-bezier(0.22, 1, 0.36, 1);\r\n  font-weight: 500;\r\n}\r\n\r\n.save-button {\r\n  background: rgba(125, 211, 252, 0.1);\r\n  color: #7dd3fc;\r\n  border: 1px solid rgba(125, 211, 252, 0.2);\r\n}\r\n\r\n.save-button:hover {\r\n  background: rgba(125, 211, 252, 0.2);\r\n  border-color: rgba(125, 211, 252, 0.4);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.cancel-button {\r\n  background: rgba(239, 68, 68, 0.1);\r\n  color: #ef4444;\r\n  border: 1px solid rgba(239, 68, 68, 0.2);\r\n}\r\n\r\n.cancel-button:hover {\r\n  background: rgba(239, 68, 68, 0.2);\r\n  border-color: rgba(239, 68, 68, 0.4);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.export-button {\r\n  background: rgba(34, 197, 94, 0.1);\r\n  color: #22c55e;\r\n  border: 1px solid rgba(34, 197, 94, 0.2);\r\n}\r\n\r\n.export-button:hover {\r\n  background: rgba(34, 197, 94, 0.2);\r\n  border-color: rgba(34, 197, 94, 0.4);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* ‰ºòÂåñÁºñËæëÂô®Ê†∑Âºè */\r\n:deep(.vditor) {\r\n  border: none !important;\r\n  height: calc(100% - 70px) !important;\r\n  background: #0f172a !important;\r\n  transition: background 0.3s !important;\r\n}\r\n\r\n:deep(.vditor-toolbar) {\r\n  background: #1e293b !important;\r\n  border-bottom: 1px solid #334155 !important;\r\n  transition: background 0.3s, border 0.3s !important;\r\n}\r\n\r\n:deep(.vditor-toolbar svg) {\r\n  fill: #94a3b8 !important;\r\n  transition: fill 0.3s !important;\r\n}\r\n\r\n:deep(.vditor-toolbar button:hover svg) {\r\n  fill: #7dd3fc !important;\r\n}\r\n\r\n:deep(.vditor-reset) {\r\n  color: #e2e8f0 !important;\r\n  background: #0f172a !important;\r\n  transition: color 0.3s, background 0.3s !important;\r\n}\r\n\r\n:deep(.vditor-reset pre) {\r\n  background: rgba(15, 23, 42, 0.8) !important;\r\n  border: 1px solid rgba(125, 211, 252, 0.2) !important;\r\n  border-radius: 10px !important;\r\n  transition: background 0.3s, border 0.3s !important;\r\n}\r\n\r\n:deep(.vditor-reset code) {\r\n  color: #7dd3fc !important;\r\n  background: rgba(15, 23, 42, 0.6) !important;\r\n  padding: 2px 6px !important;\r\n  border-radius: 4px !important;\r\n  transition: color 0.3s, background 0.3s !important;\r\n}\r\n\r\n/* ÂØπÂä®ÁîªÁîüÂëΩÂë®ÊúüÁöÑÂÆö‰πâ */\r\n@keyframes toastSlideDown {\r\n  from {\r\n    opacity: 0;\r\n    transform: translate(-50%, -30px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translate(-50%, 0);\r\n  }\r\n}\r\n\r\n/* Ëá™ÂÆö‰πâÊªöÂä®Êù° */\r\n::-webkit-scrollbar {\r\n  width: 6px;\r\n  height: 6px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n  background: transparent;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background: rgba(148, 163, 184, 0.3);\r\n  border-radius: 3px;\r\n  transition: background 0.3s;\r\n}\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(148, 163, 184, 0.5);\r\n}\r\n\r\n.control-panel {\r\n  background-color: #1e293b; /* Á®çÂæÆÊ∑±‰∏ÄÁÇπÁöÑËìùËâ≤ */\r\n  padding: 30px;\r\n  border-radius: 16px;\r\n  box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);\r\n  transition: background-color 0.3s, box-shadow 0.3s;\r\n}\r\n\r\n/* Êó•Èó¥Ê®°Âºè */\r\n.light-mode .control-panel {\r\n  background-color: #ffffff;\r\n  box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* ‰øÆÂ§çÊó•Èó¥Ê®°Âºè‰∏ãÁöÑÊï¥‰ΩìËÅäÂ§©ÂÆπÂô®ËÉåÊôØ */\r\n.light-mode .chat-container {\r\n  background: #f8fafc;\r\n}\r\n\r\n/* ‰øÆÂ§çÊó•Èó¥Ê®°Âºè‰∏ãÁöÑËÅäÂ§©Á™óÂè£ËÉåÊôØÂõæÊ°à */\r\n.light-mode .chat-window {\r\n  background-image: radial-gradient(\r\n      circle at 10% 20%,\r\n      rgba(14, 165, 233, 0.03) 0%,\r\n      transparent 20%\r\n    ),\r\n    radial-gradient(\r\n      circle at 90% 80%,\r\n      rgba(14, 165, 233, 0.03) 0%,\r\n      transparent 20%\r\n    ),\r\n    radial-gradient(\r\n      circle at 50% 50%,\r\n      rgba(14, 165, 233, 0.02) 0%,\r\n      transparent 50%\r\n    );\r\n}\r\n\r\n/* ‰øÆÂ§çÊó•Èó¥Ê®°Âºè‰∏ãÁöÑÁºñËæëÂô®Èù¢Êùø */\r\n.light-mode .editor-pane {\r\n  background: #ffffff;\r\n  border-left: 1px solid #e2e8f0;\r\n}\r\n\r\n.light-mode .editor-header {\r\n  background: #f1f5f9;\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n/* ‰øÆÂ§çÊó•Èó¥Ê®°Âºè‰∏ãÁöÑÂä†ËΩΩÊåáÁ§∫Âô® */\r\n.light-mode .loading-indicator {\r\n  color: #0ea5e9;\r\n}\r\n\r\n.light-mode .dot-flashing {\r\n  background-color: #0ea5e9;\r\n}\r\n\r\n.light-mode .dot-flashing::before,\r\n.light-mode .dot-flashing::after {\r\n  background-color: #0ea5e9;\r\n}\r\n\r\n@keyframes dotFlashingLight {\r\n  0% {\r\n    background-color: #0ea5e9;\r\n  }\r\n  50%,\r\n  100% {\r\n    background-color: rgba(14, 165, 233, 0.2);\r\n  }\r\n}\r\n\r\n.light-mode .dot-flashing,\r\n.light-mode .dot-flashing::before,\r\n.light-mode .dot-flashing::after {\r\n  animation-name: dotFlashingLight;\r\n}\r\n\r\n/* ‰øÆÂ§çÊó•Èó¥Ê®°Âºè‰∏ãÁöÑÁºñËæëÂô®ÂÜÖÂÆπÂå∫Âüü */\r\n.light-mode :deep(.vditor) {\r\n  border: none !important;\r\n  height: calc(100% - 70px) !important;\r\n  background: #ffffff !important;\r\n}\r\n\r\n.light-mode :deep(.vditor-toolbar) {\r\n  background: #f1f5f9 !important;\r\n  border-bottom: 1px solid #e2e8f0 !important;\r\n}\r\n\r\n.light-mode :deep(.vditor-toolbar svg) {\r\n  fill: #64748b !important;\r\n}\r\n\r\n.light-mode :deep(.vditor-toolbar button:hover svg) {\r\n  fill: #0ea5e9 !important;\r\n}\r\n\r\n.light-mode :deep(.vditor-reset) {\r\n  color: #1e293b !important;\r\n  background: #ffffff !important;\r\n}\r\n\r\n.light-mode :deep(.vditor-reset pre) {\r\n  background: rgba(241, 245, 249, 0.8) !important;\r\n  border: 1px solid rgba(14, 165, 233, 0.1) !important;\r\n}\r\n\r\n.light-mode :deep(.vditor-reset code) {\r\n  color: #0ea5e9 !important;\r\n  background: rgba(241, 245, 249, 0.6) !important;\r\n}\r\n\r\n/* ‰øÆÂ§çÊó•Èó¥Ê®°Âºè‰∏ãÁöÑÁºñËæëÂô®ÊåâÈíÆ */\r\n.light-mode .editor-actions button {\r\n  background: rgba(14, 165, 233, 0.05);\r\n  color: #0ea5e9;\r\n  border: 1px solid rgba(14, 165, 233, 0.1);\r\n}\r\n\r\n.light-mode .editor-actions button:hover {\r\n  background: rgba(14, 165, 233, 0.1);\r\n}\r\n\r\n.light-mode .save-button {\r\n  background: rgba(14, 165, 233, 0.1) !important;\r\n  color: #0ea5e9 !important;\r\n  border: 1px solid rgba(14, 165, 233, 0.3) !important;\r\n}\r\n\r\n.light-mode .save-button:hover {\r\n  background: rgba(14, 165, 233, 0.2) !important;\r\n}\r\n\r\n.light-mode .cancel-button {\r\n  background: rgba(239, 68, 68, 0.1) !important;\r\n  color: #ef4444 !important;\r\n}\r\n\r\n.light-mode .export-button {\r\n  background: rgba(34, 197, 94, 0.1) !important;\r\n  color: #22c55e !important;\r\n}\r\n\r\n/* ÂÖ®Â±ÄË¶ÜÁõñ Mathpix ÂàóË°®Ê†∑Âºè */\r\n:deep(.mp-md-block-list) {\r\n  padding-left: 2em !important;\r\n  margin-left: 0 !important;\r\n}\r\n\r\n:deep(.mp-md-block-list-item) {\r\n  display: list-item !important;\r\n  padding-left: 0.5em !important;\r\n}\r\n\r\n:deep(ul),\r\n:deep(ol) {\r\n  padding-left: 2em !important;\r\n  margin-left: 0 !important;\r\n}\r\n\r\n:deep(li) {\r\n  display: list-item !important;\r\n}\r\n\r\n/* ‰øÆÊîπÂØπËØùÈù¢ÊùøÂú®‰æßËæπÊ†èÂ±ïÂºÄÊó∂ÁöÑÂúÜËßí */\r\n.chat-container.sidebar-expanded .conversation-pane {\r\n  border-radius: 0 16px 16px 0;\r\n  border-left: none; /* ÁßªÈô§Â∑¶‰æßËæπÊ°Ü */\r\n}\r\n\r\n/* Á°Æ‰øùËÅäÂ§©Â§¥ÈÉ®Âú®‰æßËæπÊ†èÂ±ïÂºÄÊó∂Â∑¶‰∏äËßíÊ≤°ÊúâÂúÜËßí */\r\n.chat-container.sidebar-expanded .chat-header {\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n\r\n/* Ë∞ÉÊï¥‰æßËæπÊ†èËÉåÊôØ‰∏éÂØπËØùÈù¢ÊùøÂ§¥ÈÉ®ËÉåÊôØ‰∏ÄËá¥ */\r\n.sidebar-header {\r\n  background: #0f172a; /* ‰∏éËÅäÂ§©Â§¥ÈÉ®ËÉåÊôØ‰∏ÄËá¥ */\r\n  border-bottom: 1px solid #334155;\r\n}\r\n\r\n/* Êó•Èó¥Ê®°Âºè‰∏ãÁöÑ‰∏ÄËá¥ÊÄßË∞ÉÊï¥ */\r\n.light-mode .sidebar-header {\r\n  background: linear-gradient(135deg, #ffffff, #f1f5f9);\r\n  border-bottom: 1px solid #e2e8f0;\r\n}\r\n\r\n/* ‰∏∫‰æßËæπÊ†èÂ§¥ÈÉ®Ê∑ªÂä†È°∂ÈÉ®Ë£ÖÈ•∞Êù°Ôºå‰∏éËÅäÂ§©Â§¥ÈÉ®‰∏ÄËá¥ */\r\n.sidebar-header::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 3px;\r\n  background: linear-gradient(90deg, #0284c7, #0ea5e9, #7dd3fc);\r\n  opacity: 0.8;\r\n  animation: gradientShift 8s linear infinite;\r\n}\r\n\r\n.answering-indicator {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 12px 16px;\r\n  background: rgba(30, 41, 59, 0.5);\r\n  border-radius: 8px;\r\n  margin-top: 8px;\r\n  font-style: italic;\r\n  color: #94a3b8;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.light-mode .answering-indicator {\r\n  background: rgba(241, 245, 249, 0.7);\r\n  color: #64748b;\r\n}\r\n\r\n/* Ê∑ªÂä†ÊÄßËÉΩ‰ºòÂåñÁõ∏ÂÖ≥ÁöÑCSS */\r\n.message {\r\n  will-change: transform, opacity;\r\n  contain: content;\r\n  transform: translateZ(0);\r\n}\r\n\r\n/* ‰ºòÂåñÈïøÊñáÊú¨Ê∏≤Êüì */\r\n.bubble {\r\n  contain: content;\r\n  overflow-wrap: break-word;\r\n  word-break: break-word;\r\n}\r\n\r\n/* ‰ºòÂåñMarkdownÂÜÖÂÆπÊ∏≤Êüì */\r\n.markdown-body,\r\n.correct-answer-content,\r\n.reasoning-content {\r\n  contain: content;\r\n}\r\n\r\n/* ‰ºòÂåñÊªöÂä®ÊÄßËÉΩ */\r\n.chat-window {\r\n  -webkit-overflow-scrolling: touch;\r\n  overscroll-behavior: contain;\r\n  scroll-behavior: auto; /* Êîπ‰∏∫auto‰ª•ÊèêÈ´òÊÄßËÉΩ */\r\n}\r\n\r\n/* Ê∑ªÂä†Ê∏êËøõÂºèÂä†ËΩΩÊïàÊûú */\r\n.message:not(.visible) {\r\n  opacity: 0.6;\r\n  transform: translateY(10px);\r\n}\r\n\r\n.message.visible {\r\n  opacity: 1;\r\n  transform: translateY(0);\r\n  transition: opacity 0.3s, transform 0.3s;\r\n}\r\n\r\n/* Ê∑ªÂä†ÊâìÂ≠óÂä®ÁîªÁõ∏ÂÖ≥Ê†∑Âºè */\r\n.typing-cursor {\r\n  display: inline-block;\r\n  width: 2px;\r\n  height: 1em;\r\n  background-color: #7dd3fc;\r\n  margin-left: 2px;\r\n  vertical-align: middle;\r\n  animation: cursor-blink 1s infinite;\r\n}\r\n\r\n@keyframes cursor-blink {\r\n  0%,\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n  50% {\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n/* ‰ºòÂåñÊÄùËÄÉ‰∏≠Âä®Áîª */\r\n.answering-indicator {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 12px 16px;\r\n  background: rgba(30, 41, 59, 0.5);\r\n  border-radius: 8px;\r\n  margin-top: 8px;\r\n  font-style: italic;\r\n  color: #94a3b8;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.light-mode .answering-indicator {\r\n  background: rgba(241, 245, 249, 0.7);\r\n  color: #64748b;\r\n}\r\n</style>\r\n","import script from \"./mainExercise.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./mainExercise.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./mainExercise.vue?vue&type=style&index=0&id=d4e795ea&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d4e795ea\"]])\n\nexport default __exports__"],"names":["MM","setOptions","mathJax","katex","compiledMarkdownCache","Map","compiledMarkdown","val","has","get","result","markdownToHTML","htmlTags","codeHighlight","auto","code","set","saveToWord","async","showToast","response","fetch","method","headers","body","JSON","stringify","content","ok","errorData","json","Error","error","blob","saveAs","console","message","conversations","ref","activeConversationId","inputMsg","messages","userId","localStorage","getItem","Date","now","toString","setItem","value","abortController","loading","chatWindow","isEditing","editingIndex","editingContent","have_file","isCollapsed","isHidden","vditorContainer","vditorInstance","uploadStatus","convertMathpixToLatex","mathpixMarkdown","includes","converted","replace","match","p1","trim","initVditor","Vditor","cache","id","enable","height","mode","toolbar","preview","math","engine","inlineDigit","markdown","autoSpace","fixTermLink","hljs","lineNumber","input","after","nextTick","convertedContent","setValue","watch","destroy","toast","show","type","timeoutId","autoClear","clearTimeout","setTimeout","marked","highlight","lang","language","getLanguage","breaks","gfm","autoScroll","userHasScrolled","scrollToBottom","window","requestAnimationFrame","container","scrollTo","top","scrollHeight","behavior","onMounted","saved","rawData","parse","map","conv","timestamp","msg","length","addEventListener","handleScroll","title","document","querySelector","text","textContent","innerHTML","i","span","createElement","style","animationDelay","classList","add","appendChild","checkThemeMode","messageObserver","IntersectionObserver","entries","forEach","entry","isIntersecting","target","root","threshold","querySelectorAll","observe","onBeforeUnmount","removeEventListener","disconnect","isLightMode","isAtBottom","scrollTop","clientHeight","createNewConversation","newId","Math","random","substr","newConv","unshift","saveToLocalStorage","switchConversation","find","c","user_id","conversation_id","then","res","data","has_files","catch","err","deleteConversation","convId","filter","generateTitle","firstMessage","substring","newMsgs","firstUserMsg","m","role","deep","dataToSave","getTime","formatDate","date","actualDate","Number","toLocaleTimeString","hour","minute","fileInput","triggerFileUpload","click","handleFileUpload","files","event","formData","FormData","allowedTypes","validFiles","file","name","endsWith","append","log","status","push","Array","from","formatFileSize","size","join","bytes","toFixed","startEditing","index","saveEditing","editorContent","getValue","cancelEditing","toggleReasoning","showReasoning","toggleSidebar","breaktalk","abort","isAnswering","function_type","e","sendMessage","AbortController","currentConvId","aiMessage","reasoning","typingContent","typingBuffer","typingReasoning","reasoningTypingBuffer","isTypingContent","isTypingReasoning","thinkingDots","thinkingInterval","setInterval","clearInterval","currentConv","history","some","signal","reader","getReader","decoder","TextDecoder","a","buffer","contentBuffer","reasoningBuffer","updateTimer","updateMessage","currentMsg","typeReasoningChar","typeContentChar","done","read","cancel","eventEndIndex","decode","stream","indexOf","eventData","slice","lines","split","dataStr","line","startsWith","reasoning_content","newVal","formatTime","safeDate","isNaN","messageElements","el","nextChar","charAt","delay","__exports__"],"sourceRoot":""}
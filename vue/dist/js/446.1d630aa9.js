"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[446],{68446:function(e,a,l){l.r(a),l.d(a,{default:function(){return $}});var t=l(56768),s=l(24232),n=l(45130);const i={class:"main-content"},o={class:"input-area"},r={class:"input-container"},d={key:0,class:"file-upload-container"},c={class:"file-info"},u={class:"file-name-display"},v={class:"input-actions"},p={class:"action-buttons"},g=["disabled"],h={class:"template-section"},m={class:"section-header"},k={class:"filter-group"},C=["value"],f=["value"],P={class:"template-grid"},L={key:0,class:"loading-tip"},b={key:1,class:"empty-tip"},F=["onClick"],y=["src","alt"],E={class:"pagination"},T=["disabled"],w=["disabled"],K=["onClick"],R=["disabled"],X=["disabled"],I={key:0,class:"result"},M=["href"],U={key:1,class:"error"};function _(e,a,l,_,S,A){return(0,t.uX)(),(0,t.CE)("div",{id:"app",class:(0,s.C4)(["ppt-generator",{"light-mode":S.isLightMode}])},[a[22]||(a[22]=(0,t.Fv)('<div class="title-section" data-v-3a9ad008><h2 class="gradient-title" data-v-3a9ad008> ä¸€é”®ç”Ÿæˆ<span class="ppt-text" data-v-3a9ad008>PPT</span><span class="star-icon" data-v-3a9ad008>âœ¨</span></h2><p class="subtitle" data-v-3a9ad008>æ”¯æŒå¯¼å…¥æ–‡æ¡£ã€åˆ©ç”¨ä¸ªæ€§åŒ–æ¨¡æ¿åˆ›ä½œPPT</p></div>',1)),(0,t.Lk)("div",i,[(0,t.Lk)("div",o,[(0,t.Lk)("div",r,[_.selectedFile?((0,t.uX)(),(0,t.CE)("div",d,[(0,t.Lk)("div",c,[a[15]||(a[15]=(0,t.Lk)("i",{class:"file-icon"},"ğŸ“„",-1)),(0,t.Lk)("span",u,(0,s.v_)(_.selectedFile.name),1),(0,t.Lk)("button",{class:"clear-file-btn",onClick:a[0]||(a[0]=(...e)=>_.clearFile&&_.clearFile(...e))},"Ã—")])])):(0,t.Q3)("",!0),_.selectedFile?(0,t.Q3)("",!0):(0,t.bo)(((0,t.uX)(),(0,t.CE)("textarea",{key:1,"onUpdate:modelValue":a[1]||(a[1]=e=>_.description=e),placeholder:"è¯•è¯•è¾“å…¥ä¸€ç‚¹ç‚¹çš„å°å°çš„éœ€æ±‚å³å¯ç”ŸæˆPPT"},null,512)),[[n.Jo,_.description]]),(0,t.Lk)("div",v,[(0,t.Lk)("div",p,[(0,t.Lk)("input",{type:"file",ref:"fileInput",onChange:a[2]||(a[2]=(...e)=>_.handleFileUpload&&_.handleFileUpload(...e)),accept:".pdf,.doc,.docx,.txt,.md",hidden:""},null,544),(0,t.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>_.triggerFileUpload&&_.triggerFileUpload(...e)),class:"action-btn upload-btn"},[a[16]||(a[16]=(0,t.Lk)("i",{class:"action-icon"},"ğŸ“„",-1)),(0,t.eW)((0,s.v_)(_.selectedFile?"é‡æ–°ä¸Šä¼ ":"ä¸Šä¼ æ–‡æ¡£"),1)])]),(0,t.Lk)("button",{class:"create-btn",disabled:_.loading||!_.selectedFile&&!_.description||!_.selectedTemplate,onClick:a[4]||(a[4]=(...e)=>_.generatePPT&&_.generatePPT(...e))},(0,s.v_)(_.loading?"ç”Ÿæˆä¸­...":"ç«‹å³åˆ›ä½œ"),9,g)])])])]),(0,t.Lk)("div",h,[(0,t.Lk)("div",m,[a[19]||(a[19]=(0,t.Lk)("h3",{class:"section-title"},"é€‰æ‹©æ¨¡æ¿",-1)),(0,t.Lk)("div",k,[(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>_.selectedStyle=e),onChange:a[6]||(a[6]=(...e)=>_.handleFilterChange&&_.handleFilterChange(...e))},[a[17]||(a[17]=(0,t.Lk)("option",{value:""},"æ‰€æœ‰é£æ ¼",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(_.styleOptions,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,s.v_)(e),9,C)))),128))],544),[[n.u1,_.selectedStyle]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>_.selectedColor=e),onChange:a[8]||(a[8]=(...e)=>_.handleFilterChange&&_.handleFilterChange(...e))},[a[18]||(a[18]=(0,t.Lk)("option",{value:""},"æ‰€æœ‰é¢œè‰²",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(_.colorOptions,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,s.v_)(e),9,f)))),128))],544),[[n.u1,_.selectedColor]])])]),(0,t.Lk)("div",P,[_.loadingTemplates?((0,t.uX)(),(0,t.CE)("div",L,"æ¨¡æ¿åŠ è½½ä¸­...")):(0,t.Q3)("",!0),_.loadingTemplates||0!==_.templates.length?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",b,[(0,t.eW)((0,s.v_)(_.hasActiveFilters?"å½“å‰ç­›é€‰æ¡ä»¶ä¸‹æš‚æ— æ¨¡æ¿ï¼Œè¯·å°è¯•å…¶ä»–æ¡ä»¶":"æš‚æ— å¯ç”¨æ¨¡æ¿")+" ",1),_.hasActiveFilters?((0,t.uX)(),(0,t.CE)("span",{key:0,class:"clear-filter",onClick:a[9]||(a[9]=(...e)=>_.clearFilters&&_.clearFilters(...e))}," ï¼ˆæ¸…ç©ºç­›é€‰æ¡ä»¶ï¼‰ ")):(0,t.Q3)("",!0)])),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(_.templates,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e.id,class:(0,s.C4)(["template-item",{selected:_.selectedTemplate===e.id}]),onClick:a=>_.selectTemplate(e.id)},[(0,t.Lk)("img",{src:e.cover||"/default-cover.png",alt:e.name,class:"template-cover",onError:a[10]||(a[10]=(...e)=>_.handleImageError&&_.handleImageError(...e))},null,40,y),a[20]||(a[20]=(0,t.Lk)("div",{class:"template-selected-indicator"},[(0,t.Lk)("span",{class:"checkmark"},"âœ“")],-1))],10,F)))),128))]),(0,t.Lk)("div",E,[(0,t.Lk)("button",{onClick:a[11]||(a[11]=e=>_.changePage(1)),disabled:1===_.currentPage||0===_.totalPages}," é¦–é¡µ ",8,T),(0,t.Lk)("button",{onClick:a[12]||(a[12]=e=>_.changePage(_.currentPage-1)),disabled:1===_.currentPage||0===_.totalPages}," ä¸Šä¸€é¡µ ",8,w),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(_.visiblePages,(e=>((0,t.uX)(),(0,t.CE)("span",{key:e,onClick:a=>_.changePage(e),class:(0,s.C4)({active:_.currentPage===e})},(0,s.v_)(e),11,K)))),128)),(0,t.Lk)("button",{onClick:a[13]||(a[13]=e=>_.changePage(_.currentPage+1)),disabled:_.currentPage===_.totalPages||0===_.totalPages}," ä¸‹ä¸€é¡µ ",8,R),(0,t.Lk)("button",{onClick:a[14]||(a[14]=e=>_.changePage(_.totalPages)),disabled:_.currentPage===_.totalPages||0===_.totalPages}," å°¾é¡µ ",8,X)])]),_.resultUrl?((0,t.uX)(),(0,t.CE)("div",I,[(0,t.Lk)("p",null,[a[21]||(a[21]=(0,t.eW)("ç”Ÿæˆå®Œæˆï¼")),(0,t.Lk)("a",{href:_.resultUrl,download:""},"ç‚¹å‡»ä¸‹è½½PPT",8,M)])])):(0,t.Q3)("",!0),_.error?((0,t.uX)(),(0,t.CE)("div",U,(0,s.v_)(_.error),1)):(0,t.Q3)("",!0)],2)}var S=l(90144),A=l(94373),Q={name:"App",setup(){A.A.defaults.baseURL="http://localhost:2200/ppt";const e=(0,S.KR)(""),a=(0,S.KR)(!1),l=(0,S.KR)(""),s=(0,S.KR)(""),n=(0,S.KR)(null),i=(0,S.KR)([]),o=(0,S.KR)(!0),r=(0,S.KR)(null),d=(0,S.KR)(null),c=(0,S.KR)(null),u=(0,S.KR)(1),v=(0,S.KR)(0),p=(0,S.KR)(8),g=(0,S.KR)(""),h=(0,S.KR)(""),m=(0,S.KR)(["ç®€çº¦","å¡é€š","å•†åŠ¡","åˆ›æ„","å›½é£","æ¸…æ–°","æ‰å¹³","æ’ç”»","èŠ‚æ—¥"]),k=(0,S.KR)(["è“è‰²","ç»¿è‰²","çº¢è‰²","ç´«è‰²","é»‘è‰²","ç°è‰²","é»„è‰²","ç²‰è‰²","æ©™è‰²"]),C=(0,t.EW)((()=>{if(v.value<=5)return Array.from({length:v.value},((e,a)=>a+1));const e=Math.max(1,u.value-2),a=Math.min(v.value,u.value+2);return Array.from({length:a-e+1},((a,l)=>e+l))})),f=(0,t.EW)((()=>g.value||h.value)),P=()=>{d.value.click()},L=a=>{const l=a.target.files;l&&l[0]?(c.value=l[0],e.value=""):c.value=null},b=async()=>{try{o.value=!0,i.value=[];const e=await A.A.get("/templates",{params:{currentPage:u.value,pageSize:p.value,style:g.value,color:h.value}});0===e.data.code?(i.value=e.data.data.list,v.value=Math.ceil(e.data.data.total/p.value)):s.value="æ¨¡æ¿åŠ è½½å¤±è´¥ï¼š"+e.data.error}catch(e){s.value=`æ¨¡æ¿åŠ è½½å¤±è´¥: ${e.message}`}finally{o.value=!1}},F=e=>{e=Math.max(1,Math.min(e,v.value)),e!==u.value&&(u.value=e,b())},y=e=>{e.target.src="/default-cover.png"},E=e=>{n.value=e},T=()=>{u.value=1,b()},w=()=>{g.value="",h.value="",T()},K=()=>{c.value=null,d.value.value=""},R=async()=>{try{const e=await A.A.get(`/status/${r.value}`),t=e.data.data;if(!t)throw new Error("æ— æ•ˆçš„å“åº”æ ¼å¼");if("build_failed"===t.pptStatus||"build_failed"===t.aiImageStatus||"build_failed"===t.cardNoteStatus)throw new Error(t.errMsg||"PPTç”Ÿæˆå¤±è´¥");"done"===t.pptStatus&&"done"===t.aiImageStatus&&"done"===t.cardNoteStatus?(l.value=t.pptUrl,a.value=!1):setTimeout(R,2e3)}catch(e){s.value=`ç”Ÿæˆå¤±è´¥ï¼š${e.message}`,a.value=!1,r.value=null}},X=async()=>{if(n.value)try{a.value=!0,s.value="",l.value="";const t=new FormData;if(t.append("templateId",n.value),c.value)t.append("file",c.value),t.append("fileName",c.value.name);else{if(!e.value.trim())throw new Error("è¯·è¾“å…¥å†…å®¹æè¿°æˆ–é€‰æ‹©æ–‡ä»¶");t.append("query",e.value)}const i=await A.A.post("/generate",t,{headers:{"Content-Type":"multipart/form-data"}});0===i.data?.code?(r.value=i.data.task_id,R()):(s.value=i.data?.error||"ç”Ÿæˆè¯·æ±‚å¤±è´¥",a.value=!1)}catch(t){s.value=`è¯·æ±‚å¤±è´¥ï¼š${t.message}`,t.response&&(s.value+=` (çŠ¶æ€ç ï¼š${t.response.status})`),a.value=!1}else s.value="è¯·å…ˆé€‰æ‹©æ¨¡æ¿"};return(0,t.sV)(b),{description:e,loading:a,resultUrl:l,error:s,templates:i,selectedTemplate:n,selectTemplate:E,loadingTemplates:o,visiblePages:C,currentPage:u,totalPages:v,changePage:F,handleImageError:y,selectedStyle:g,selectedColor:h,styleOptions:m,colorOptions:k,handleFilterChange:T,hasActiveFilters:f,clearFilters:w,fileInput:d,selectedFile:c,triggerFileUpload:P,handleFileUpload:L,generatePPT:X,clearFile:K}},data(){return{isLightMode:"light"===localStorage.getItem("theme-mode")}},mounted(){this.checkThemeMode(),window.addEventListener("storage",this.checkThemeMode),window.addEventListener("themeChange",this.checkThemeMode)},beforeUnmount(){window.removeEventListener("storage",this.checkThemeMode),window.removeEventListener("themeChange",this.checkThemeMode)},methods:{checkThemeMode(){this.isLightMode="light"===localStorage.getItem("theme-mode")}}},x=l(71241);const W=(0,x.A)(Q,[["render",_],["__scopeId","data-v-3a9ad008"]]);var $=W}}]);
//# sourceMappingURL=446.1d630aa9.js.map